const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vue-virtual-scroller.esm-B1RQ8vjp.js","assets/index-DSm9wnlA.js","assets/index-CZxxpChG.css"])))=>i.map(i=>d[i]);
import{Q as Fe,i as Te,r as g,S as Ue,c as J,j as We,A as be,o as qe,w as Je,a as o,h as d,d as s,k as Ve,u as Xe,p as ke,t as k,x as he,D as He,F as se,e as ae,y as Ye,G as Ke,v as Qe,U as Ze,m as et,s as E,b as l,V as tt,f as st,n as at,W as nt,_ as ot}from"./index-DSm9wnlA.js";import{b as lt}from"./back-icon-xKqy7r3s.js";const ye="taiyaki.selections.v1";function it(u){if(!u)return{};try{const c=JSON.parse(u);return typeof c=="object"&&c?c:{}}catch{return{}}}function rt(){try{return it(localStorage.getItem(ye))}catch{return{}}}function X(u){try{localStorage.setItem(ye,JSON.stringify(u))}catch(c){console.warn("Failed to persist selections to localStorage:",c)}}function dt(u){const c=new Set,v=[];for(const f of u)c.has(f)||(c.add(f),v.push(f));return v}const ut=Fe("selections",{state:()=>({data:rt()}),actions:{list(u){const c=this.data[u]||{};return Object.entries(c).map(([v,f])=>({name:v,count:f.ids.length,updatedAt:f.updatedAt})).sort((v,f)=>f.updatedAt-v.updatedAt)},save(u,c,v){if(!u||!c)return;const f=dt(v.filter(Boolean));this.data[u]||(this.data[u]={}),this.data[u][c]={ids:f,updatedAt:Date.now()},X(this.data)},load(u,c){const v=this.data[u];return v?v[c]?.ids?[...v[c].ids]:[]:[]},delete(u,c){const v=this.data[u];!v||!(c in v)||(delete v[c],Object.keys(v).length===0&&delete this.data[u],X(this.data))},clearDeck(u){this.data[u]&&(delete this.data[u],X(this.data))},clearAll(){this.data={},X(this.data)}}}),ct="/assets/bomb-Dbo5WG8N.png",pt="/assets/sharknado-DE1BlCR3.png",vt="/assets/headsup-CZLusrOt.png",gt="/assets/spellingblitz-DuYpPWY-.png",mt="/assets/spelling-guesser-Lfb09Kaz.png",ft="/assets/sound-matcher-GJ2M5bnK.png",bt="/assets/bingo-DCY4t3Hh.png",kt={class:"deck-page"},ht={class:"page-topbar"},yt=["src"],wt={class:"deck-title"},_t={class:"deck-header"},St={class:"deck-header-row"},Ct={class:"deck-header-row"},Et={class:"deck-header-row"},Nt=["disabled"],At=["aria-hidden"],It=["aria-hidden"],xt={class:"button-container"},Dt={class:"corner-rail"},jt={key:0,class:"corner tl new"},Mt={key:1,class:"corner tr xp"},Rt=["src"],$t={class:"corner-rail"},Bt={key:0,class:"corner tl new"},zt={key:1,class:"corner tr xp"},Gt=["src"],Lt={class:"corner-rail"},Ot={key:0,class:"corner tl new"},Pt={key:1,class:"corner tr xp"},Ft=["src"],Tt={class:"corner-rail"},Ut={key:0,class:"corner tl new"},Wt={key:1,class:"corner tr xp"},qt=["src"],Jt={class:"corner-rail"},Vt={key:0,class:"corner tl new"},Xt={key:1,class:"corner tr xp"},Ht=["src"],Yt={class:"corner-rail"},Kt={key:0,class:"corner tl new"},Qt={key:1,class:"corner tr xp"},Zt=["src"],es={class:"corner-rail"},ts={key:0,class:"corner tl new"},ss={key:1,class:"corner tr xp"},as=["src"],ns=["aria-hidden"],os={class:"add-section"},ls={class:"radio"},is=["checked"],rs=["disabled"],ds=["value"],us={class:"add-section"},cs={class:"radio"},ps=["checked"],vs=["disabled"],gs={key:0,class:"error",role:"alert"},ms={class:"add-actions"},fs=["disabled"],bs=["disabled"],ks={class:"muted small",style:{"margin-top":"8px"}},hs={key:4,id:"load-modal",class:"popup add-popup",role:"dialog","aria-modal":"true"},ys={key:0,class:"saved-list"},ws={class:"saved-name"},_s={class:"saved-actions"},Ss=["onClick"],Cs=["onClick"],Es={key:1,class:"muted"},Ns={class:"add-actions"},As={class:"count-line"},Is={id:"card-count"},xs={class:"card-content"},Ds=["src","alt"],js={class:"card-text"},Ms={key:0,class:"furigana"},Rs={key:1,class:"kanji"},$s={class:"english"},Bs={key:5,class:"error"},zs="eitake.iconcache.",Gs="public-assets",Ls=230,Os=Te({__name:"DeckViewer",setup(u){const c=Ze(()=>nt(()=>import("./vue-virtual-scroller.esm-B1RQ8vjp.js"),__vite__mapDeps([0,1,2])).then(t=>t.RecycleScroller||t.default?.RecycleScroller||t)),v={bomb:ct,sharknado:pt,headsup:vt,spellingblitz:gt,spellingguesser:mt,soundmatcher:ft,bingo:bt},f=g({});function ne(t){const e=t.split("/").pop()||t;return zs+e}async function we(t){const e=ne(t);if(f.value[e])return f.value[e];const n=localStorage.getItem(e);if(n)return f.value[e]=n,n;try{const i=await(await fetch(t)).blob(),r=new FileReader,m=await new Promise((S,h)=>{r.onload=()=>S(String(r.result)),r.onerror=h,r.readAsDataURL(i)});return localStorage.setItem(e,m),f.value[e]=m,m}catch{return t}}async function _e(){for(const t of Object.values(v))we(t)}const D=t=>{const e=v[t],n=ne(e);return f.value[n]||e};function j(t){const e=t.target;e.style.visibility="hidden",e.onerror=null}function oe(t){if(!t)return"";const{data:e}=E.storage.from(Gs).getPublicUrl(t);return e?.publicUrl??""}const Se={bomb:[],sharknado:[],headsup:[],spellingblitz:["xp","new"],spellingguesser:["xp","new"],soundmatcher:["xp","new"],bingo:["new"]},le=(t,e)=>(Se[t]||[]).includes(e),M=t=>le(t,"new"),R=t=>le(t,"xp"),H=et(),y=Xe(),V=ut(),I=Ue(),w=g(""),O=g(""),ie=g(!1);function re(){const t=H.params,e=H.query,n=t.id??t.deckId??e.id;w.value=typeof n=="string"?n:"",O.value=w.value||"unknown-deck",ie.value=String(e.kind||"").toLowerCase()==="custom"}re();const _=g(""),C=g([]),P=g(null),p=g(new Set),x=g(0),$=g(!1),B=g(!1),z=g(!1),Y=g([]),F=g(""),N=g(!1),U=g(""),W=g(!1),T=g(null),A=g(!1),K=J(()=>(V.list(O.value)||[]).map(e=>typeof e=="string"?e:e?.name??"").filter(e=>!!e)),Ce=J(()=>C.value.length),de=J(()=>C.value.length>0&&p.value.size===C.value.length),q=g(2);function ue(){const t=window.innerWidth;return t>=1500?6:t>=1280?5:t>=1024?4:t>=760?3:2}function ce(){const t=ue();t!==q.value&&(q.value=t)}const Ee=J(()=>{const t=q.value||2,e=C.value,n=[];for(let a=0,i=0;a<e.length;a+=t,i++)n.push({key:i,items:e.slice(a,a+t)});return n});We(async()=>{_e(),q.value=ue(),window.addEventListener("resize",ce,{passive:!0}),await be(async()=>{await pe()},150),document.addEventListener("click",ve)}),qe(()=>{window.removeEventListener("resize",ce),document.removeEventListener("click",ve)}),Je(()=>H.fullPath,async()=>{re(),await be(async()=>{await pe()},150)});function Ne(t){if(Array.isArray(t))return t.map(e=>String(e).toLowerCase());if(typeof t=="string")return t.split(/[,\s]+/).map(e=>e.trim().toLowerCase()).filter(Boolean);if(t&&typeof t=="object")try{return Array.from(t).map(n=>String(n).toLowerCase())}catch{}return[]}async function pe(){if(P.value=null,p.value.clear(),x.value++,!w.value)throw P.value="Missing deck id in route.",new Error(P.value);try{if(ie.value){const{data:r,error:m}=await E.from("custom_decks").select("id, title").eq("id",w.value).single();if(m)throw m;_.value=r?.title||w.value;const{data:S,error:h}=await E.from("v_custom_deck_cards_expanded").select("card_id, position, english, japanese_kanji, japanese_furigana, image_url").eq("deck_id",w.value).order("position",{ascending:!0});if(h)throw h;const L=(S??[]).map(b=>({id:b.card_id,english:b.english??"",japanese:{kanji:b.japanese_kanji??void 0,furigana:b.japanese_furigana??void 0},image_url:oe(b.image_url),is_bonus:!1}));C.value=L,L.forEach(b=>p.value.add(b.id)),x.value++;return}const{data:t,error:e}=await E.from("decks").select("id, title, slug").eq("id",w.value).single();if(e)throw e;_.value=t?.title||t?.slug||w.value;const{data:n,error:a}=await E.from("v_deck_cards_expanded").select(`
        deck_id,
        card_id,
        position,
        english,
        japanese_kanji,
        japanese_furigana,
        image_url,
        audio_url,
        tags,
        card_tags
      `).eq("deck_id",w.value).order("position",{ascending:!0});if(a)throw a;const i=(n||[]).map(r=>{const m=r.tags??r.card_tags??null,h=Ne(m).includes("bonus");return{id:r.card_id,english:r.english??"",japanese:{kanji:r.japanese_kanji??void 0,furigana:r.japanese_furigana??void 0},image_url:oe(r.image_url),is_bonus:h}});C.value=i,i.forEach(r=>p.value.add(r.id)),x.value++}catch(t){console.error(t),P.value=t?.message??"Failed to load deck."}}const Ae=()=>y.back();function Ie(){$.value=!0}function Q(){$.value=!1}function xe(){B.value=!0}function Z(){B.value=!1}async function De(){T.value=null,N.value=!1,U.value="",F.value="",z.value=!0;const{data:t,error:e}=await E.from("custom_decks").select("id, title, card_count").order("updated_at",{ascending:!1});if(e){T.value=e.message;return}Y.value=t??[]}function ee(){z.value=!1}function ve(t){const e=t.target;$.value&&!e.closest("#review-menu")&&!e.closest("[data-open-review]")&&Q(),B.value&&!e.closest("#game-menu")&&!e.closest("[data-open-game]")&&Z(),z.value&&!e.closest("#add-menu")&&!e.closest("[data-open-add]")&&ee(),A.value&&!e.closest("#load-modal")&&!e.closest("#load-selection-btn")&&(A.value=!1)}function te(t){Q();const e=w.value;if(!e)return;const n=Array.from(p.value),a={};n.length&&(a.ids=n.join(",")),t==="review"?(a.mode="review",y.push({name:"FlashcardReview",params:{id:e},query:a})):t==="random"?(a.mode="random",y.push({name:"FlashcardReview",params:{id:e},query:a})):t==="japanese"&&y.push({name:"JapaneseFlashcardReview",params:{id:e},query:a})}async function G(t){Z();const e=w.value;if(!e)return;const n=async()=>{const a=me();if(!a.length)return alert("Select at least one card to play."),null;try{await fe(a.map(i=>i.image_url),{concurrency:8,timeoutMs:250})}catch{}return a};if(t==="bomb"){const a=await n();if(!a)return;I.set({cards:a,mode:"bomb"}),sessionStorage.setItem("eitake.bombgame.transit.v1",JSON.stringify({cards:a,mode:"bomb"})),y.push({name:"bomb-game",params:{id:e}})}else if(t==="sharknado"){const a=await n();if(!a)return;I.set({cards:a,mode:"sharknado"}),sessionStorage.setItem("eitake.sharknado.transit.v1",JSON.stringify({cards:a,mode:"sharknado"})),y.push({name:"sharknado",params:{id:e}})}else if(t==="headsup"){const a=await n();if(!a)return;I.set({cards:a,mode:"headsup"}),sessionStorage.setItem("eitake.sharknado.transit.v1",JSON.stringify({cards:a,mode:"headsup"})),y.push({name:"headsup",params:{id:e}})}else if(t==="spellingblitz"){const a=await n();if(!a)return;I.set({cards:a,mode:"spellingblitz",startMode:"easy"}),sessionStorage.setItem("eitake.spellingblitz.transit.v1",JSON.stringify({cards:a,startMode:"easy"})),y.push({name:"spellingblitz",params:{id:e},query:{mode:"easy"}})}else if(t==="spellingguesser"){const a=await n();if(!a)return;I.set({cards:a,mode:"spellingguesser",deckName:_.value}),sessionStorage.setItem("eitake.spellingguesser.transit.v1",JSON.stringify({cards:a,deckName:_.value})),y.push({name:"spellingguesser",params:{id:e},query:{deckName:_.value}})}else if(t==="soundmatcher"){const a=await n();if(!a)return;I.seedForListening?.({deckId:e,deckName:_.value,cards:a,startMode:"easy",audioLocale:"en-US",ttsRate:1})??I.set({cards:a,mode:"listening",startMode:"easy",deckName:_.value}),sessionStorage.setItem("eitake.soundmatcher.transit.v1",JSON.stringify({cards:a,deckName:_.value,startMode:"easy",deckId:e})),y.push({name:"sound-matcher",params:{deckId:e}})}else if(t==="bingo"){const a=me();if(a.length<9){alert("Select at least 9 cards to play Bingo (3×3).");return}try{await fe(a.map(i=>i.image_url),{concurrency:8,timeoutMs:250})}catch{}I.set({cards:a,mode:"bingo",deckName:_.value}),sessionStorage.setItem("eitake.bingo.transit.v1",JSON.stringify({cards:a,deckName:_.value})),y.push({name:"bingo",params:{id:e}})}}function ge(t){return t.image_url||t.image||""}function je(t){p.value.has(t)?p.value.delete(t):p.value.add(t),x.value++}function Me(){de.value?p.value.clear():C.value.forEach(t=>p.value.add(t.id)),x.value++}function Re(){if(!C.value.length||!p.value.size)return;const t=new Set(C.value.filter(e=>e.is_bonus).map(e=>e.id));p.value.forEach(e=>{t.has(e)&&p.value.delete(e)}),x.value++}function me(){return C.value.filter(t=>p.value.has(t.id)).map(t=>({id:t.id,english:t.english,image_url:ge(t),japanese:t.japanese??null}))}function fe(t,{concurrency:e=8,timeoutMs:n=250}={}){const a=[...t.filter(Boolean)];let i=0,r;const m=new Promise(L=>r=L),S=Date.now()+n;function h(){if(!a.length){i===0&&r();return}if(Date.now()>S){i===0&&r();return}for(;i<e&&a.length;){i++;const L=a.shift(),b=new Image;b.onload=b.onerror=()=>{i--,h()},b.decoding="async",b.loading="eager",b.referrerPolicy="no-referrer",b.src=L}}return h(),m}function $e(){const t=Array.from(p.value);if(!t.length){alert("No cards selected to save.");return}const e=`Set (${new Date().toLocaleString()})`,n=window.prompt("Name this selection:",e);if(n)try{V.save(O.value,n,t),A.value=!0}catch(a){console.error(a),alert("Failed to save selection.")}}function Be(t){try{const e=V.load(O.value,t)||[];p.value.clear(),e.forEach(n=>p.value.add(n)),x.value++,A.value=!1}catch(e){console.error(e),alert("Failed to load selection.")}}function ze(t){try{V.delete(O.value,t)}catch(e){console.error(e),alert("Failed to delete selection.")}}const Ge=J(()=>$.value||B.value||z.value||A.value);function Le(){$.value=!1,B.value=!1,z.value=!1,A.value=!1}async function Oe(){if(!N.value){if(!F.value)throw new Error("Choose a custom deck.");return F.value}const t=U.value.trim();if(!t)throw new Error("Enter a title for the new custom deck.");const{data:e,error:n}=await E.auth.getUser();if(n||!e?.user?.id)throw new Error("Not authenticated");const{data:a,error:i}=await E.from("custom_decks").insert({owner_user_id:e.user.id,title:t,visibility:"private"}).select("id, title, card_count").single();if(i)throw i;return Y.value.unshift(a),F.value=a.id,N.value=!1,U.value="",a.id}async function Pe(){W.value=!0,T.value=null;try{const t=await Oe(),e=Array.from(p.value);if(e.length===0)throw new Error("Select at least one card to add.");const{data:n,error:a}=await E.from("custom_deck_cards").select("position").eq("deck_id",t).order("position",{ascending:!1}).limit(1);if(a)throw a;let i=(n?.[0]?.position??0)||0;const r=e.map(S=>(i+=1e3,{deck_id:t,flashcard_id:S,position:i})),{error:m}=await E.from("custom_deck_cards").upsert(r,{onConflict:"deck_id,flashcard_id"});if(m)throw m;ee(),alert(`Added ${e.length} card(s) to your custom deck.`)}catch(t){T.value=t?.message??"Failed to add cards."}finally{W.value=!1}}return(t,e)=>(l(),o("section",kt,[Ge.value?(l(),o("div",{key:0,class:"frosted-overlay",role:"presentation","aria-hidden":"true",onClick:Le})):d("",!0),s("div",ht,[s("button",{class:"icon-btn back-btn",type:"button",onClick:Ae,"aria-label":"Back",title:"Back"},[s("img",{class:"icon",src:ke(lt),alt:""},null,8,yt)]),s("h1",wt,k(_.value||O.value),1),s("button",{class:"add-to-custom-btn",type:"button","data-open-add":"",onClick:e[0]||(e[0]=n=>De()),"aria-label":"Add to custom deck",title:"Add to Custom Deck"},[...e[28]||(e[28]=[s("span",{class:"icon"},"+",-1),s("span",{class:"label"},"Add to Custom Deck",-1)])])]),s("div",_t,[s("div",St,[s("button",{"data-open-review":"",type:"button",onClick:e[1]||(e[1]=n=>Ie())},"Review Mode"),s("button",{"data-open-game":"",type:"button",onClick:e[2]||(e[2]=n=>xe())},"Games")]),s("div",Ct,[s("button",{id:"toggle-bonus-btn",type:"button",onClick:e[3]||(e[3]=n=>Re())},"Deselect Bonus Words"),s("button",{id:"toggle-all-btn",type:"button",onClick:e[4]||(e[4]=n=>Me())},k(de.value?"Deselect All":"Select All"),1)]),s("div",Et,[s("button",{type:"button",onClick:e[5]||(e[5]=n=>$e())},"Save Selection"),s("button",{id:"load-selection-btn",type:"button",onClick:e[6]||(e[6]=n=>A.value=!0),disabled:!K.value.length}," Load Selection ",8,Nt)])]),$.value?(l(),o("div",{key:1,id:"review-menu",class:"popup",role:"dialog","aria-modal":"true","aria-hidden":!$.value},[e[29]||(e[29]=s("h3",null,"Select a Review Mode",-1)),s("button",{class:"normal-review-btn",type:"button",onClick:e[7]||(e[7]=n=>te("review"))},"Regular Order"),s("button",{class:"random-btn",type:"button",onClick:e[8]||(e[8]=n=>te("random"))},"Random Order"),s("button",{class:"japanese-mode-btn",type:"button",onClick:e[9]||(e[9]=n=>te("japanese"))},"Japanese Mode (Random)"),s("button",{class:"cancel-btn",type:"button",onClick:e[10]||(e[10]=n=>Q())},"Cancel")],8,At)):d("",!0),B.value?(l(),o("div",{key:2,id:"game-menu",class:"game-popup",role:"dialog","aria-modal":"true","aria-hidden":!B.value},[e[51]||(e[51]=s("h3",null,"Select a Game Mode",-1)),s("div",xt,[s("button",{class:"game-btn bomb-game-btn",type:"button",onClick:e[11]||(e[11]=n=>G("bomb"))},[s("div",Dt,[M("bomb")?(l(),o("div",jt,[...e[30]||(e[30]=[s("span",null,"NEW",-1)])])):d("",!0),R("bomb")?(l(),o("div",Mt,[...e[31]||(e[31]=[s("span",null,"XP",-1)])])):d("",!0)]),e[32]||(e[32]=s("p",{class:"game-popup-text"},"Bomb Game",-1)),s("img",{class:"game-icon",src:D("bomb"),alt:"Bomb Game",loading:"eager",decoding:"async",fetchpriority:"high",onError:j},null,40,Rt)]),s("button",{class:"game-btn sharknado-game-btn",type:"button",onClick:e[12]||(e[12]=n=>G("sharknado"))},[s("div",$t,[M("sharknado")?(l(),o("div",Bt,[...e[33]||(e[33]=[s("span",null,"NEW",-1)])])):d("",!0),R("sharknado")?(l(),o("div",zt,[...e[34]||(e[34]=[s("span",null,"XP",-1)])])):d("",!0)]),e[35]||(e[35]=s("p",{class:"game-popup-text"},"Sharknado!",-1)),s("img",{class:"game-icon",src:D("sharknado"),alt:"Sharknado",loading:"eager",decoding:"async",fetchpriority:"high",onError:j},null,40,Gt)]),s("button",{class:"game-btn headsup-game-btn",type:"button",onClick:e[13]||(e[13]=n=>G("headsup"))},[s("div",Lt,[M("headsup")?(l(),o("div",Ot,[...e[36]||(e[36]=[s("span",null,"NEW",-1)])])):d("",!0),R("headsup")?(l(),o("div",Pt,[...e[37]||(e[37]=[s("span",null,"XP",-1)])])):d("",!0)]),e[38]||(e[38]=s("p",{class:"game-popup-text"},"Heads Up",-1)),s("img",{class:"game-icon",src:D("headsup"),alt:"Heads Up",loading:"eager",decoding:"async",fetchpriority:"high",onError:j},null,40,Ft)]),s("button",{class:"game-btn spelling-blitz-btn",type:"button",onClick:e[14]||(e[14]=n=>G("spellingblitz"))},[s("div",Tt,[M("spellingblitz")?(l(),o("div",Ut,[...e[39]||(e[39]=[s("span",null,"NEW",-1)])])):d("",!0),R("spellingblitz")?(l(),o("div",Wt,[...e[40]||(e[40]=[s("span",null,"XP",-1)])])):d("",!0)]),e[41]||(e[41]=s("p",{class:"game-popup-text"},"Spelling Blitz",-1)),s("img",{class:"game-icon",src:D("spellingblitz"),alt:"Spelling Blitz",loading:"eager",decoding:"async",fetchpriority:"high",onError:j},null,40,qt)]),s("button",{class:"game-btn spelling-guesser-btn",type:"button",onClick:e[15]||(e[15]=n=>G("spellingguesser"))},[s("div",Jt,[M("spellingguesser")?(l(),o("div",Vt,[...e[42]||(e[42]=[s("span",null,"NEW",-1)])])):d("",!0),R("spellingguesser")?(l(),o("div",Xt,[...e[43]||(e[43]=[s("span",null,"XP",-1)])])):d("",!0)]),e[44]||(e[44]=s("p",{class:"game-popup-text"},"Spelling Guesser",-1)),s("img",{class:"game-icon",src:D("spellingguesser"),alt:"Spelling Guesser",loading:"eager",decoding:"async",fetchpriority:"high",onError:j},null,40,Ht)]),s("button",{class:"game-btn sound-matcher-btn",type:"button",onClick:e[16]||(e[16]=n=>G("soundmatcher"))},[s("div",Yt,[M("soundmatcher")?(l(),o("div",Kt,[...e[45]||(e[45]=[s("span",null,"NEW",-1)])])):d("",!0),R("soundmatcher")?(l(),o("div",Qt,[...e[46]||(e[46]=[s("span",null,"XP",-1)])])):d("",!0)]),e[47]||(e[47]=s("p",{class:"game-popup-text"},"Sound Matcher",-1)),s("img",{class:"game-icon",src:D("soundmatcher"),alt:"Sound Matcher",loading:"eager",decoding:"async",fetchpriority:"high",onError:j},null,40,Zt)]),s("button",{class:"game-btn bingo-btn",type:"button",onClick:e[17]||(e[17]=n=>G("bingo"))},[s("div",es,[M("bingo")?(l(),o("div",ts,[...e[48]||(e[48]=[s("span",null,"NEW",-1)])])):d("",!0),R("bingo")?(l(),o("div",ss,[...e[49]||(e[49]=[s("span",null,"XP",-1)])])):d("",!0)]),e[50]||(e[50]=s("p",{class:"game-popup-text"},"Bingo",-1)),s("img",{class:"game-icon",src:D("bingo"),alt:"Bingo",loading:"eager",decoding:"async",fetchpriority:"high",onError:j},null,40,as)])]),s("button",{class:"cancel-btn",type:"button",onClick:e[18]||(e[18]=n=>Z())},"Cancel")],8,It)):d("",!0),z.value?(l(),o("div",{key:3,id:"add-menu",class:"popup add-popup",role:"dialog","aria-modal":"true","aria-hidden":!z.value},[e[55]||(e[55]=s("h3",{style:{"margin-top":"0"}},"Add to Custom Deck",-1)),s("div",os,[s("label",ls,[s("input",{type:"radio",name:"add-target",checked:!N.value,onChange:e[19]||(e[19]=n=>N.value=!1)},null,40,is),e[52]||(e[52]=s("span",null,"Select existing deck",-1))]),he(s("select",{class:"deck-select",disabled:N.value,"onUpdate:modelValue":e[20]||(e[20]=n=>F.value=n)},[e[53]||(e[53]=s("option",{value:"",disabled:""},"Select a deck…",-1)),(l(!0),o(se,null,ae(Y.value,n=>(l(),o("option",{key:n.id,value:n.id},k(n.title)+" ("+k(n.card_count)+") ",9,ds))),128))],8,rs),[[He,F.value]])]),s("div",us,[s("label",cs,[s("input",{type:"radio",name:"add-target",checked:N.value,onChange:e[21]||(e[21]=n=>N.value=!0)},null,40,ps),e[54]||(e[54]=s("span",null,"Create a new custom deck",-1))]),he(s("input",{class:"deck-input",type:"text",disabled:!N.value,"onUpdate:modelValue":e[22]||(e[22]=n=>U.value=n),maxlength:"120",placeholder:"New deck title"},null,8,vs),[[Ye,U.value,void 0,{trim:!0}]])]),T.value?(l(),o("p",gs,k(T.value),1)):d("",!0),s("div",ms,[s("button",{class:"cancel-btn",type:"button",onClick:e[23]||(e[23]=n=>ee()),disabled:W.value},"Cancel",8,fs),s("button",{class:"confirm-btn",type:"button",onClick:e[24]||(e[24]=n=>Pe()),disabled:W.value},k(W.value?"Adding…":"Add"),9,bs)]),s("p",ks,k(p.value.size)+" card(s) selected ",1)],8,ns)):d("",!0),A.value?(l(),o("div",hs,[e[56]||(e[56]=s("h3",{style:{"margin-top":"0"}},"Load a Saved Selection",-1)),K.value.length?(l(),o("div",ys,[(l(!0),o(se,null,ae(K.value,n=>(l(),o("div",{class:"saved-row",key:n},[s("div",ws,k(n),1),s("div",_s,[s("button",{type:"button",onClick:a=>Be(n)},"Load",8,Ss),s("button",{type:"button",class:"danger",onClick:a=>ze(n)},"Delete",8,Cs)])]))),128))])):(l(),o("p",Es,"No saved selections yet.")),s("div",Ns,[s("button",{class:"cancel-btn",type:"button",onClick:e[25]||(e[25]=n=>A.value=!1)},"Close")])])):d("",!0),s("h2",As,[e[57]||(e[57]=Ke("Cards in this Deck: ",-1)),s("span",Is,k(Ce.value),1)]),Ve(ke(c),{class:"deck-scroller",items:Ee.value,"item-size":Ls,"key-field":"key"},{default:Qe(({item:n})=>[s("div",{class:"row-grid",style:at({gridTemplateColumns:`repeat(${q.value}, 1fr)`})},[(l(!0),o(se,null,ae(n.items,(a,i,r,m)=>{const S=[x.value,p.value.has(a.id)];if(m&&m.key===a.id&&tt(m,S))return m;const h=(l(),o("div",{key:a.id,class:st(["deck-card",{selected:p.value.has(a.id)}]),onClick:L=>je(a.id)},[s("div",xs,[s("img",{src:ge(a),alt:a.english,class:"deck-card-img",loading:"lazy",decoding:"async",referrerpolicy:"no-referrer",draggable:"false"},null,8,Ds),s("div",js,[a.japanese?.furigana?(l(),o("p",Ms,k(a.japanese.furigana),1)):d("",!0),a.japanese?.kanji?(l(),o("p",Rs,k(a.japanese.kanji),1)):d("",!0),s("p",$s,k(a.english),1)])])],10,["onClick"]));return h.memo=S,h},e,26),128))],4)]),_:1},8,["items"]),P.value?(l(),o("p",Bs,k(P.value),1)):d("",!0)]))}}),Ts=ot(Os,[["__scopeId","data-v-2c7e2d59"]]);export{Ts as default};
