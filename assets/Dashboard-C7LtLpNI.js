import{d as Q,r as b,c as S,o as N,a as p,b as t,t as E,e as X,s as q,f,_ as Y,g as pt,n as C,F as Z,h as J,i as dt,w as P,j as ct,k as kt,u as xt,l as et,m as ut,p as St,q as Wt,v as Et,x as z,y as It,C as Mt,U as zt,z as G}from"./index-BMgXBjWP.js";const Bt={class:"dw-root","aria-label":"Daily Word"},Rt={class:"dw-top"},Dt={class:"dw-date"},Lt={key:0,class:"dw-body"},Tt={key:1,class:"dw-body"},Ct={class:"dw-word"},Ht={key:0,class:"dw-pos"},Ut={class:"dw-def"},Ft={class:"dw-error-msg"},Ot={class:"dw-foot"},Pt={class:"dw-source"},Vt={key:2,class:"dw-body"},qt={class:"dw-word"},Xt={key:0,class:"dw-pos"},Yt={class:"dw-def"},Gt={class:"dw-foot"},Nt={class:"dw-source"},$t=Q({__name:"DailyWord",setup(H){const e={provider:"Local fallback",date:null,word:"Broken",definition:"This website is broken, and the dev should fix it soon.",partOfSpeech:null},A=b(!0),n=b(null),g=b(null);function B(i){return new Date(i+"T00:00:00").toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}const y=["noun","verb","adjective","adverb","pronoun","preposition","conjunction","interjection","determiner","article"];function k(i){return i.replace(/\s+/g," ").trim()}function R(i){return i&&i.charAt(0).toUpperCase()+i.slice(1)}function T(i){const u=i.toLowerCase();for(const c of y)if(new RegExp(`\\b${c}\\b\\s*[:–—-]`,"i").test(i))return R(c);for(const c of y)if(new RegExp(`\\(\\s*${c}\\s*\\)`,"i").test(i))return R(c);for(const c of y)if(new RegExp(`\\b${c}\\b`,"i").test(u))return R(c);return null}function D(i,u){let c=i;if(u){const x=u.toLowerCase(),w=c.toLowerCase().search(new RegExp(`\\b${x}\\b\\s*[:–—-]`));w>=0&&(c=c.slice(w).replace(new RegExp(`^.*?\\b${x}\\b\\s*[:–—-]\\s*`,"i"),"")||c)}c=c.replace(/^\s*(definition|meaning)\s*[:–—-]\s*/i,"");const W=c.split(new RegExp("(?<=[.!?])\\s+")).map(x=>k(x)).filter(Boolean);if(!W.length)return k(c)||null;for(const x of W)if(x.length>=12&&x.length<=300)return x;return W[0]||null}const v=S(()=>{const i=g.value;if(i){const u=i.summary?k(i.summary):"",c=i.partOfSpeech??(u?T(u):null)??null,W=i.definition??(u?D(u,c):null)??null;return{provider:i.provider||"Wordsmith — A Word A Day",date:i.date,word:i.word||e.word,pos:c,definition:W||e.definition}}return{provider:e.provider,date:e.date,word:e.word,pos:e.partOfSpeech,definition:e.definition}}),M=S(()=>v.value.date?B(v.value.date):"—");async function I(){A.value=!0,n.value=null;try{const{data:i,error:u}=await q.functions.invoke("daily-word",{method:"GET"});if(u)throw u;const c=i;if(!c||typeof c.word!="string")throw new Error("Malformed response from daily-word function.");g.value=c}catch(i){const u=i?.message||i?.details||(typeof i=="string"?i:"Unknown error");n.value=u,g.value=null}finally{A.value=!1}}return N(()=>{I()}),(i,u)=>(f(),p("section",Bt,[t("header",Rt,[t("div",Dt,E(M.value),1)]),A.value?(f(),p("div",Lt,[...u[0]||(u[0]=[t("div",{class:"dw-skel dw-skel-word"},null,-1),t("div",{class:"dw-skel dw-skel-pos"},null,-1),t("div",{class:"dw-skel dw-skel-def"},null,-1),t("div",{class:"dw-skel dw-skel-def"},null,-1)])])):n.value?(f(),p("div",Tt,[t("div",Ct,E(v.value.word),1),v.value.pos?(f(),p("div",Ht,E(v.value.pos),1)):X("",!0),t("div",Ut,E(v.value.definition),1),t("div",Ft,E(n.value),1),t("footer",Ot,[t("div",Pt," Source: "+E(v.value.provider),1)])])):(f(),p("div",Vt,[t("div",qt,E(v.value.word),1),v.value.pos?(f(),p("div",Xt,E(v.value.pos),1)):X("",!0),t("div",Yt,E(v.value.definition),1),t("footer",Gt,[t("div",Nt," Source: "+E(v.value.provider),1)])]))]))}}),jt=Y($t,[["__scopeId","data-v-299c5ca8"]]),Kt={key:0,class:"siw__empty"},Zt={key:1,class:"siw__viewport"},Jt=["src"],Qt=["src"],te={key:0,class:"siw__fade","aria-hidden":"true"},ee=Q({__name:"ScrollingImageWall",props:{images:{},tileWidth:{default:96},tileHeight:{default:96},gap:{default:14},visibleCount:{default:0},speedPxPerSec:{default:26},direction:{default:"left"},linkTarget:{default:"_blank"},linkRel:{default:"noopener noreferrer"},edgeFade:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0}},setup(H){const e=H,A=b(null),n=b(0),g=S(()=>Array.isArray(e.images)&&e.images.length>0),B=S(()=>{const r=[];for(const _ of e.images||[])typeof _=="string"?r.push({src:_}):_&&typeof _.src=="string"&&r.push({src:_.src,href:_.href});return r});let y=null;function k(){const r=A.value;r&&(n.value=Math.round(r.getBoundingClientRect().width))}N(()=>{k(),A.value&&"ResizeObserver"in window?(y=new ResizeObserver(()=>k()),y.observe(A.value)):window.addEventListener("resize",k,{passive:!0})}),pt(()=>{y&&A.value&&y.unobserve(A.value),y=null,window.removeEventListener("resize",k),W()});const R=S(()=>{const r=e.tileWidth+e.gap,_=Math.max(1,Math.ceil(Math.max(1,n.value)/Math.max(1,r))+2),m=e.visibleCount&&e.visibleCount>0?e.visibleCount:0;return m>0?Math.max(1,m+2):_}),T=S(()=>{const r=R.value;return r<=1?e.tileWidth:r*e.tileWidth+(r-1)*e.gap}),D=S(()=>{if(!g.value)return[];const r=B.value,_=r.length,m=R.value,U=[];for(let F=0;F<m;F++)U.push(r[F%_]);return U}),v=b(0);let M=null,I=0;const i=S(()=>e.direction==="right"?1:-1);function u(r){I||(I=r);const _=(r-I)/1e3;if(I=r,!w.isDown){const m=Math.max(0,e.speedPxPerSec);v.value+=i.value*m*_,v.value=x(v.value)}M=window.requestAnimationFrame(u)}function c(){M==null&&(I=0,M=window.requestAnimationFrame(u))}function W(){M!=null&&(window.cancelAnimationFrame(M),M=null,I=0)}function x(r){const _=T.value;if(!_||_<=0)return r;let m=r%_;return m>0&&(m-=_),m}N(()=>{c()});const w={isDown:!1,pointerId:-1,startX:0,startOffset:0};function V(r){e.draggable&&g.value&&(r.pointerType==="mouse"&&r.button!==0||(w.isDown=!0,w.pointerId=r.pointerId,w.startX=r.clientX,w.startOffset=v.value,r.currentTarget?.setPointerCapture?.(r.pointerId)))}function a(r){if(!e.draggable||!w.isDown||r.pointerId!==w.pointerId)return;const _=r.clientX-w.startX;v.value=x(w.startOffset+_)}function s(r){e.draggable&&w.isDown&&r.pointerId===w.pointerId&&(w.isDown=!1,w.pointerId=-1)}function h(r,_){if(!_.href||!e.draggable)return;const m=Math.abs(v.value-w.startOffset);(w.isDown||m>6)&&(r.preventDefault(),r.stopPropagation())}const L=S(()=>({"--siw-gap":`${e.gap}px`,"--siw-tile-w":`${e.tileWidth}px`,"--siw-tile-h":`${e.tileHeight}px`})),$=S(()=>({width:`${e.tileWidth}px`,height:`${e.tileHeight}px`})),j=S(()=>({gap:`${e.gap}px`})),K=S(()=>({transform:`translate3d(${v.value}px, 0, 0)`}));return(r,_)=>(f(),p("div",{ref_key:"rootEl",ref:A,class:"siw",style:C(L.value),role:"presentation","aria-hidden":"true",onPointerdown:V,onPointermove:a,onPointerup:s,onPointercancel:s,onPointerleave:s},[g.value?(f(),p("div",Zt,[t("div",{class:"siw__track",style:C(K.value)},[t("div",{class:"siw__strip",style:C(j.value)},[(f(!0),p(Z,null,J(D.value,(m,U)=>(f(),dt(ct(m.href?"a":"div"),{key:`a-${U}`,class:"siw__tile",style:C($.value),href:m.href||void 0,target:m.href?r.linkTarget:void 0,rel:m.href?r.linkRel:void 0,onClick:F=>h(F,m)},{default:P(()=>[t("img",{class:"siw__img",src:m.src,alt:"",draggable:"false"},null,8,Jt)]),_:2},1032,["style","href","target","rel","onClick"]))),128))],4),t("div",{class:"siw__strip",style:C(j.value),"aria-hidden":"true"},[(f(!0),p(Z,null,J(D.value,(m,U)=>(f(),dt(ct(m.href?"a":"div"),{key:`b-${U}`,class:"siw__tile",style:C($.value),href:m.href||void 0,target:m.href?r.linkTarget:void 0,rel:m.href?r.linkRel:void 0,tabindex:"-1"},{default:P(()=>[t("img",{class:"siw__img",src:m.src,alt:"",draggable:"false"},null,8,Qt)]),_:2},1032,["style","href","target","rel"]))),128))],4)],4),r.edgeFade?(f(),p("div",te)):X("",!0)])):(f(),p("div",Kt))],36))}}),se=Y(ee,[["__scopeId","data-v-1d762080"]]),ae={key:0,class:"ais-muted"},oe={key:1,class:"ais-error"},ne={key:2,class:"ais-scroll",role:"list"},re={class:"ais-badges","aria-hidden":"true"},ie={key:0,class:"ais-badge ais-badge--xp"},le={key:1,class:"ais-badge ais-badge--new"},de=["title","onClick","onKeydown"],ce={class:"ais-icon"},ue=["src","alt","onError"],fe={key:1,class:"ais-icon-fallback","aria-hidden":"true"},he={class:"ais-name"},pe="public-assets",ft="game-icons/",me=Q({__name:"ActivitiesIconGrid",props:{mode:{default:"both"},width:{default:"100%"},height:{default:"260px"},iconSize:{default:64},titleLines:{default:2},gap:{default:12}},setup(H){const e=H,A=xt(),n=b(!0),g=b(null),B=b([]),y=b(new Set);function k(a){return(a.tags||[]).map(s=>String(s).toLowerCase().trim())}function R(a){const s=k(a);return s.includes("teacher tool")||s.includes("teacher-tool")||s.includes("teachertool")}function T(a){const s=k(a);return s.includes("xp")||s.includes("gives_xp")||s.includes("givesxp")||s.includes("experience")}function D(a){const s=k(a);return a.status&&String(a.status).toLowerCase().trim()==="new"?!0:s.includes("new")||s.includes("recent")}N(async()=>{await kt(async()=>{try{const{data:a,error:s}=await q.from("activities").select("id, slug, name, type, url_path, external_url, icon_url, thumbnail_url, tags, status, archived_at").is("archived_at",null).order("name",{ascending:!0});if(s)throw s;B.value=a||[]}catch(a){console.error(a),g.value=a?.message??String(a)}finally{n.value=!1}},250)});const v=S(()=>B.value.slice().sort((a,s)=>(a.name||"").localeCompare(s.name||""))),M=S(()=>e.mode==="both"?v.value:e.mode==="tools"?v.value.filter(R):v.value.filter(a=>!R(a)));function I(a){return!!a&&/^[a-z][a-z0-9+\-.]*:\/\//i.test(String(a).trim())}function i(a){if(y.value.has(a.id))return"";const s=a.icon_url||a.thumbnail_url||"";if(!s)return"";if(I(s))return s;let h=String(s).replace(/^\/+/,"");h.startsWith(ft)||(h=ft+h);const{data:L}=q.storage.from(pe).getPublicUrl(h);return L?.publicUrl||""}function u(a){y.value.add(a)}function c(a){if(!a)return"";let s=String(a).trim();if(!s)return"";if(/^[a-z][a-z0-9+\-.]*:\/\//i.test(s)||/^[a-z][a-z0-9+\-.]*:/i.test(s))return s;if(s.startsWith("//"))return(window.location?.protocol||"https:")+s;/^[\w.-]+\.[a-z]{2,}([/:?#]|$)/i.test(s)&&(s="https://"+s);try{const h=new URL(s,window.location.origin);return!/\.[a-z0-9]+$/i.test(h.pathname.split("/").pop()||"")&&!h.search&&!h.hash&&!h.pathname.endsWith("/")&&(h.pathname+="/"),h.toString()}catch{return s}}function W(a){if(!a)return"";let s=String(a).trim();return s?(s.startsWith("/")||(s="/"+s),s):""}function x(a){if(a.url_path){A.push(W(a.url_path));return}if(a.slug){A.push(`/activities/${a.slug}`);return}if(a.external_url){const s=c(a.external_url);if(s){window.open(s,"_blank","noopener,noreferrer");return}}alert("No activity URL is configured.")}const w=S(()=>Math.max(6,Math.min(24,Math.floor(e.gap||12)))),V=S(()=>({width:e.width,height:e.height,"--ais-icon-base":`${e.iconSize}px`,"--ais-lines":String(e.titleLines),"--ais-gap":`${w.value}px`}));return(a,s)=>(f(),p("section",{class:"ais-root",style:C(V.value),"aria-label":"Activities icon grid"},[n.value?(f(),p("p",ae,"Loading…")):g.value?(f(),p("p",oe,E(g.value),1)):(f(),p("div",ne,[(f(!0),p(Z,null,J(M.value,h=>(f(),p("article",{key:h.id,class:"ais-item",role:"listitem"},[t("div",re,[T(h)?(f(),p("span",ie,"XP")):X("",!0),D(h)?(f(),p("span",le,"NEW")):X("",!0)]),t("button",{class:"ais-iconBtn",type:"button",title:h.name,onClick:L=>x(h),onKeydown:[ut(et(L=>x(h),["prevent"]),["enter"]),ut(et(L=>x(h),["prevent"]),["space"])]},[t("div",ce,[i(h)?(f(),p("img",{key:0,src:i(h),alt:h.name,loading:"lazy",decoding:"async",draggable:"false",onError:et(L=>u(h.id),["stop"])},null,40,ue)):(f(),p("div",fe))])],40,de),t("div",he,E(h.name),1)]))),128))]))],4))}}),ht=Y(me,[["__scopeId","data-v-a9a47091"]]),ve="data:image/png;base64,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",_e="/TaiyakiEduGames/assets/win_chime-BYEqQxzW.mp3",we={class:"cap-stack"},ge={class:"cap-head"},ye={key:0,class:"cap-error"},be=["disabled"],Ae=["src"],ke={class:"cap-foot","aria-label":"Community likes counters"},xe={class:"cap-counters"},Se={class:"cap-counter"},We={class:"cap-counter-value"},Ee={class:"cap-counter"},Ie={class:"cap-counter-value"},Me={class:"cap-counter"},ze={class:"cap-counter-value"},Be={class:"cap-burst-layer","aria-hidden":"true"},Re=3,De={__name:"CommunityLikesCounter",props:{width:{type:String,default:"100%"},height:{type:String,default:"100%"},rowId:{type:String,default:"EiTake"},incrementRpc:{type:String,default:"increment_community_likes"},incrementAmount:{type:Number,default:1},heartSrc:{type:String,default:ve},useDirectUpdate:{type:Boolean,default:!1}},setup(H){const e=H,A=S(()=>({width:e.width,height:e.height})),n=b({total:0,daily_total:0,monthly_total:0}),g=b(!1),B=b(!1),y=b(""),k=b(""),R=["anim-bounce","anim-spin","anim-wiggle","anim-pop","anim-squash","anim-float"],T=b(!1),D=b([]);let v=1,M=[],I={x:null,y:null};const i=b(null),u=b([]);let c=!1,W=0;function x(){try{const o=[];for(let l=0;l<Re;l++){const d=new Audio(_e);d.preload="auto",d.volume=1,o.push(d)}u.value=o}catch{}}function w(){if(c||!u.value.length)return;const o=u.value;let l=0;for(const d of o)try{const tt=d.volume;d.volume=0,d.currentTime=0;const O=d.play();O&&typeof O.then=="function"&&O.then(()=>{d.pause(),d.currentTime=0,d.volume=tt,l++,l>=o.length&&(c=!0)}).catch(()=>{})}catch{}}function V(){const o=u.value;if(!o.length)return;const l=o[W];W=(W+1)%o.length;try{l.currentTime=0,l.play()}catch{}}function a(o){return Number(o??0).toLocaleString()}async function s(){y.value="";const{data:o,error:l}=await q.from("community_likes").select("total,daily_total,monthly_total").eq("id",e.rowId).single();if(l){y.value=`Failed to load community likes. (${l.message})`;return}n.value={total:Number(o?.total??0),daily_total:Number(o?.daily_total??0),monthly_total:Number(o?.monthly_total??0)},g.value=!0}function h(o){n.value.total=Number(n.value.total??0)+o,n.value.daily_total=Number(n.value.daily_total??0)+o,n.value.monthly_total=Number(n.value.monthly_total??0)+o}async function L(){if(!e.useDirectUpdate){const{error:l}=await q.rpc(e.incrementRpc,{p_id:e.rowId,p_amount:e.incrementAmount});if(l)throw l;return}const{error:o}=await q.from("community_likes").update({total:Number(n.value.total??0)}).eq("id",e.rowId);if(o)throw o}function $(){return R[Math.floor(Math.random()*R.length)]}function j(o){!o||T.value||(T.value=!0,k.value="",o.offsetWidth,k.value=$())}function K(o,l,d){return Math.max(l,Math.min(d,o))}function r(o){w(),o&&typeof o.clientX=="number"&&typeof o.clientY=="number"&&(I={x:o.clientX,y:o.clientY})}function _(){}function m(){T.value=!1,k.value=""}function U(o){if(o&&typeof o.clientX=="number"&&typeof o.clientY=="number")return{x:o.clientX,y:o.clientY};const l=i.value;if(l){const d=l.getBoundingClientRect();return{x:d.left+d.width/2,y:d.top+d.height/2}}return I.x!=null?{x:I.x,y:I.y}:{x:window.innerWidth/2,y:window.innerHeight/2}}function F(o,l){const d=10+Math.floor(Math.random()*5),tt=Date.now();for(let O=0;O<d;O++){const st=-Math.PI/2+Math.random()*Math.PI,at=35+Math.random()*65,vt=Math.cos(st)*at+(Math.random()*26-13),_t=Math.sin(st)*at-(45+Math.random()*70),ot=900+Math.floor(Math.random()*650),nt=2200+Math.floor(Math.random()*1500),rt=Math.floor(Math.random()*140),wt=10+Math.floor(Math.random()*14),gt=Math.floor(Math.random()*220-110),yt=(.45+Math.random()*.35).toFixed(2),it=`${tt}-${v++}-${O}`;D.value.push({id:it,x:o,y:l,dx:vt,dy:_t,rot:gt,durUp:ot,durFall:nt,delay:rt,size:wt,alpha:yt});const bt=window.setTimeout(()=>{const lt=D.value.findIndex(At=>At.id===it);lt!==-1&&D.value.splice(lt,1)},ot+nt+rt+160);M.push(bt)}}async function mt(o){if(B.value||!g.value)return;B.value=!0,y.value="",V();const l=U(o);F(K(l.x,0,window.innerWidth),K(l.y,0,window.innerHeight)),await Wt(),j(i.value),h(e.incrementAmount);try{await L()}catch(d){h(-e.incrementAmount),y.value=`Could not send like. (${d?.message||"Unknown error"})`}finally{B.value=!1}}return N(async()=>{x(),await s()}),pt(()=>{for(const o of M)window.clearTimeout(o);M=[];for(const o of u.value)try{o.pause(),o.src=""}catch{}u.value=[]}),(o,l)=>(f(),p("section",{class:"cap-root",style:C(A.value),onPointerdown:r},[t("div",we,[t("header",ge,[l[0]||(l[0]=t("p",{class:"cap-subtitle"},"Tap the heart to show some love!",-1)),l[1]||(l[1]=t("div",{class:"cap-micro"}," If EiTake has every been of help, click the heart to let us know! ",-1)),y.value?(f(),p("div",ye,E(y.value),1)):X("",!0)]),t("button",{ref_key:"heartBtnEl",ref:i,class:St(["cap-heart-btn",[B.value?"is-busy":"",k.value]]),type:"button",disabled:B.value||!g.value,onClick:mt,onAnimationstart:_,onAnimationend:m,"aria-label":"Send a community like",title:"Send a like"},[t("img",{class:"cap-heart-img",src:e.heartSrc,alt:"",draggable:"false"},null,8,Ae)],42,be),t("footer",ke,[t("div",xe,[t("div",Se,[l[2]||(l[2]=t("div",{class:"cap-counter-label"},"Total Likes",-1)),t("div",We,E(a(n.value.total)),1)]),t("div",Ee,[l[3]||(l[3]=t("div",{class:"cap-counter-label"},"Today",-1)),t("div",Ie,E(a(n.value.daily_total)),1)]),t("div",Me,[l[4]||(l[4]=t("div",{class:"cap-counter-label"},"This Month",-1)),t("div",ze,E(a(n.value.monthly_total)),1)])])])]),t("div",Be,[(f(!0),p(Z,null,J(D.value,d=>(f(),p("span",{key:d.id,class:"cap-burst-heart",style:C({left:d.x+"px",top:d.y+"px","--dx":d.dx+"px","--dy":d.dy+"px","--rot":d.rot+"deg","--durUp":d.durUp+"ms","--durFall":d.durFall+"ms","--delay":d.delay+"ms","--size":d.size+"px","--alpha":d.alpha})}," ❤ ",4))),128))])],36))}},Le=Y(De,[["__scopeId","data-v-3d867823"]]),Te={class:"tutorials"},Ce=["src"],He={__name:"Tutorials",setup(H){const e=new URL("/TaiyakiEduGames/assets/work-in-progress-MVG2netq.png",import.meta.url).toString();return(A,n)=>(f(),p("section",Te,[n[0]||(n[0]=t("p",{class:"tutorials-text"}," Tutorial videos and explanations on how to use games and activities are coming soon! ",-1)),t("img",{class:"wip-img",src:Et(e),alt:"Work in progress",decoding:"async"},null,8,Ce)]))}},Ue=Y(He,[["__scopeId","data-v-bb8ccb52"]]),Fe={class:"dashboard"},Oe={class:"dashboard__content"},Pe={class:"dashboard__grid","aria-label":"Dashboard sections"},Ve={class:"dashboard__card dashboard__card--wotd","aria-label":"Word of the Day"},qe={class:"dashboard__cardBody dashboard__cardBody--padded"},Xe={class:"dashboard__card dashboard__card--games","aria-label":"Games"},Ye={class:"dashboard__cardHead"},Ge={class:"dashboard__cardTitle"},Ne={class:"dashboard__cardBody"},$e={class:"dashboard__card dashboard__card--teacherTools","aria-label":"Teacher Tools"},je={class:"dashboard__cardHead"},Ke={class:"dashboard__cardTitle"},Ze={class:"dashboard__cardBody"},Je={class:"dashboard__card dashboard__card--textbooks","aria-label":"Textbooks"},Qe={class:"dashboard__cardHead dashboard__cardHead--split"},ts={class:"dashboard__cardTitle"},es={class:"dashboard__headRight"},ss={class:"dashboard__cardBody dashboard__cardBody--wall"},as={class:"dashboard__card dashboard__card--tutorials","aria-label":"Tutorials"},os={class:"dashboard__cardBody"},ns={class:"dashboard__card dashboard__card--profile","aria-label":"User Profile"},rs={class:"dashboard__cardBody dashboard__cardBody--fill"},is={class:"dashboard__card dashboard__card--community","aria-label":"Community"},ls={class:"dashboard__cardBody"},ds={class:"dashboard__footer","aria-label":"Footer"},cs={class:"dashboard__footerLeft"},us=Q({__name:"Dashboard",setup(H){const e=[{src:new URL("/TaiyakiEduGames/assets/lets-try-1-2018-DVefs5yw.png",import.meta.url).href},{src:new URL("/TaiyakiEduGames/assets/lets-try-2-2018-DQfTaW9M.png",import.meta.url).href},{src:new URL("/TaiyakiEduGames/assets/new-horizon-5-2024-BaGMM3ni.jpg",import.meta.url).href},{src:new URL("/TaiyakiEduGames/assets/new-horizon-6-2024-Bc9NvqnJ.jpg",import.meta.url).href},{src:new URL("/TaiyakiEduGames/assets/my-picture-dictionary-new-horizon-2024-r3dztHYG.jpg",import.meta.url).href},{src:new URL("/TaiyakiEduGames/assets/new-crown-1-2025-DTUBlV8S.png",import.meta.url).href},{src:new URL("/TaiyakiEduGames/assets/holidays-BVDa_wRL.png",import.meta.url).href}];return(A,n)=>{const g=It("RouterLink");return f(),p("main",Fe,[t("div",Oe,[t("section",Pe,[t("section",Ve,[n[0]||(n[0]=t("header",{class:"dashboard__cardHead"},[t("h2",{class:"dashboard__cardTitle"},"Word of the Day")],-1)),t("div",qe,[z(jt)])]),t("section",Xe,[t("header",Ye,[t("h2",Ge,[z(g,{class:"dashboard__titleLink",to:"/activities"},{default:P(()=>[...n[1]||(n[1]=[G("Games",-1)])]),_:1})])]),t("div",Ne,[z(ht,{mode:"games",width:"100%",height:"100%"})])]),t("section",$e,[t("header",je,[t("h2",Ke,[z(g,{class:"dashboard__titleLink",to:"/activities"},{default:P(()=>[...n[2]||(n[2]=[G("Teacher Tools",-1)])]),_:1})])]),t("div",Ze,[z(ht,{mode:"tools",width:"100%",height:"100%"})])]),t("section",Je,[t("header",Qe,[t("h2",ts,[z(g,{class:"dashboard__titleLink",to:"/textbooks"},{default:P(()=>[...n[3]||(n[3]=[G("Textbooks & Flashcard Games",-1)])]),_:1})]),t("div",es,[z(Mt,{"max-height":30,scale:.7})])]),t("div",ss,[z(se,{images:e,"tile-width":200,"tile-height":300,gap:0,"speed-px-per-sec":30,direction:"left","visible-count":5,draggable:!0})])]),t("section",as,[n[4]||(n[4]=t("header",{class:"dashboard__cardHead"},[t("h2",{class:"dashboard__cardTitle"},"Tutorials")],-1)),t("div",os,[z(Ue)])]),t("section",ns,[n[5]||(n[5]=t("header",{class:"dashboard__cardHead"},[t("h2",{class:"dashboard__cardTitle"},"Progress")],-1)),t("div",rs,[z(zt)])]),t("section",is,[n[6]||(n[6]=t("header",{class:"dashboard__cardHead"},[t("h2",{class:"dashboard__cardTitle"},"Community")],-1)),t("div",ls,[z(Le)])])])]),t("footer",ds,[t("div",cs,[z(g,{class:"dashboard__footerLink",to:"/terms"},{default:P(()=>[...n[7]||(n[7]=[G("Terms of Service",-1)])]),_:1}),n[9]||(n[9]=t("span",{class:"dashboard__footerDot","aria-hidden":"true"},"•",-1)),z(g,{class:"dashboard__footerLink",to:"/privacy-policy"},{default:P(()=>[...n[8]||(n[8]=[G("Privacy Policy",-1)])]),_:1})]),n[10]||(n[10]=t("div",{class:"dashboard__footerRight"},[t("a",{class:"dashboard__brandLink",href:"https://griffiigames.com",target:"_blank",rel:"noopener noreferrer"}," Griffii Games ")],-1))])])}}}),hs=Y(us,[["__scopeId","data-v-9af62036"]]);export{hs as default};
