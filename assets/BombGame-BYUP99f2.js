import{d as yA,W as VA,r as i,c as wA,o as kA,g as EA,a as u,b as t,E as G,B as P,t as R,p as h,F as DA,h as CA,$ as RA,e as U,v as UA,w as BA,T as IA,u as SA,f as c,y as MA,G as NA,a0 as HA,a1 as xA,_ as TA}from"./index-Bs5oAewV.js";const zA={class:"bomb-game-page"},WA=["src"],YA=["aria-expanded"],GA=["src"],PA={id:"game-title"},FA={key:0,class:"muted"},LA=["onClick","aria-pressed"],QA={class:"card-front"},XA={class:"card-media"},OA=["src","alt"],ZA={key:0,class:"card-text"},jA=["src","alt"],JA={class:"settings-wrap",ref:"settingsWrap"},qA=["aria-expanded"],KA=["src"],_A=["data-mode","aria-hidden"],$A={class:"settings-row"},Ae=["max"],ee={class:"settings-actions"},te=2e3,ae=2e3,J="eitake.bombgame.transit.v1",ne=yA({__name:"BombGame",props:{cards:{},modeDefault:{},displayCount:{default:21},showEnglishDefault:{type:Boolean,default:!0}},setup(q){const p=q,K=SA(),y=VA(),r=i(p.showEnglishDefault),s=i(p.modeDefault??y.mode??"bomb"),V=i(p.displayCount),l=i(!1),w=i(V.value),B=i(r.value),g=i(s.value),m=i([]),k=i([]),b=i(!1),d=i(null),_=new URL("data:image/png;base64,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",import.meta.url).toString(),F=new URL("/TaiyakiEduGames/assets/settings-icon-yUop-EjA.png",import.meta.url).toString(),I=new URL("/TaiyakiEduGames/assets/result-bomb-C0-lQ_kp.png",import.meta.url).toString(),S=new URL("/TaiyakiEduGames/assets/taiyaki-CoU10jgl.png",import.meta.url).toString(),M=new URL("/TaiyakiEduGames/assets/result-safe-B_YthFWN.png",import.meta.url).toString(),N=new URL("/TaiyakiEduGames/assets/result-no-CseN_djh.png",import.meta.url).toString(),H=new Audio(new URL("data:audio/mpeg;base64,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",import.meta.url).toString()),L=new Audio(new URL("/TaiyakiEduGames/assets/bomb-DWFBF2Ig.mp3",import.meta.url).toString()),Q=new Audio(new URL("/TaiyakiEduGames/assets/daikichi-C_c_FTXQ.mp3",import.meta.url).toString());H.preload="auto",L.preload="auto",Q.preload="auto";const x=wA(()=>p.cards?.length?p.cards:y.cards);function $(A){for(let e=A.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[A[e],A[n]]=[A[n],A[e]]}return A}function T(A,e,n){return Math.max(e,Math.min(n,A))}function AA(A){return A.english||A.japanese?.kanji||"card"}function eA(A){switch(A.backKind){case"bomb":return I;case"mushroom":return S;case"safe":return M;case"no":return N;default:return""}}function tA(A){switch(A.backKind){case"bomb":return"Bomb";case"mushroom":return"Mushroom";case"safe":return"Safe";case"no":return"No";case"blank":return"Blank";default:return""}}function aA(A,e){const n=A.slice(0,e),a=Math.floor(Math.random()*Math.max(1,n.length));return n.map((o,f)=>({...o,isTarget:f===a,isFlipped:!1,backKind:null}))}function nA(){r.value=!r.value,B.value=r.value}const X=new Set;function E(A){if(!A||X.has(A))return;const e=new Image;e.decoding="async",e.loading="eager",e.src=A,X.add(A)}function sA(){k.value.forEach(A=>E(A.image_url)),[I,S,M,N].forEach(E)}function z(){b.value=!1,d.value=null;const A=$([...m.value]),e=T(V.value,4,A.length||4);k.value=aA(A,e),sA(),iA()}function oA(){k.value.forEach(A=>{A.isFlipped||(A.isFlipped=!0,A.backKind="blank")})}function iA(){try{const A={cards:m.value,mode:s.value};sessionStorage.setItem(J,JSON.stringify(A))}catch{}}function lA(){try{const A=sessionStorage.getItem(J);if(!A)return;const e=JSON.parse(A);Array.isArray(e?.cards)&&e.cards.length&&y.set({cards:e.cards,mode:e.mode==="mushroom"?"mushroom":"bomb"})}catch{}}const W=new WeakMap,rA={mounted(A,e){const n=e?.value||{},a=new ResizeObserver(()=>D(A,n));W.set(A,a),a.observe(A);const o=A.closest(".card");o&&a.observe(o),D(A,n),window.addEventListener("resize",Y)},updated(A,e){D(A,e?.value||{})},unmounted(A){const e=W.get(A);e&&(e.disconnect(),W.delete(A)),window.removeEventListener("resize",Y)}};function Y(){document.querySelectorAll(".card-text").forEach(A=>D(A,{}))}function D(A,e){const n=A.parentElement;if(!n)return;const a=A.clientWidth||n.clientWidth,o=A.clientHeight||Math.max(28,n.clientHeight*.22),f=n.closest(".card"),Z=f?f.clientWidth:a,bA=typeof e.minRatio=="number"?e.minRatio:.075,pA=typeof e.maxRatio=="number"?e.maxRatio:.14,j=typeof e.minPx=="number"?e.minPx:10,vA=typeof e.maxPx=="number"?e.maxPx:28;let C=T(Math.round(Z*pA),j,vA);A.style.fontSize=C+"px",A.style.lineHeight="1.1",A.style.whiteSpace="normal",A.style.wordBreak="break-word",A.style.overflow="hidden";const fA=()=>A.scrollHeight>o||A.scrollWidth>a;let hA=60;for(;fA()&&hA-- >0&&C>Math.max(j,Math.round(Z*bA));)C-=1,A.style.fontSize=C+"px"}uA("fittext",rA);function uA(A,e){const n=HA()?.appContext.app||null;n&&n.directive(A,e)}kA(()=>{x.value.length||lA(),m.value=[...x.value.length?x.value:y.cards],m.value.forEach(A=>E(A.image_url)),[I,S,M,N].forEach(E),z()}),EA(()=>{window.removeEventListener("resize",Y)});function cA(A,e){if(!(b.value||A.isFlipped))if(H.currentTime=0,H.play().catch(()=>{}),A.isFlipped=!0,A.isTarget){A.backKind=s.value==="bomb"?"bomb":"mushroom";const n=s.value==="bomb"?L:Q;n.currentTime=0,n.play().catch(()=>{}),d.value=e,s.value==="bomb"?window.setTimeout(()=>{oA(),b.value=!0,window.setTimeout(()=>d.value=null,200)},te):(b.value=!0,window.setTimeout(()=>d.value=null,ae))}else A.backKind=s.value==="bomb"?"safe":"no"}function mA(){z(),v()}function O(){l.value=!l.value,l.value&&(w.value=V.value,B.value=r.value,g.value=s.value)}function v(){l.value=!1}function dA(){V.value=T(w.value||21,4,m.value.length||21),r.value=!!B.value,s.value=g.value,v(),z()}function gA(){try{K.back()}catch{}}return(A,e)=>{const n=xA("fittext");return c(),u("section",zA,[t("button",{class:"home-button",type:"button",onClick:gA,"aria-label":"Back"},[t("img",{src:P(_),alt:""},null,8,WA)]),t("button",{class:"settings-button",type:"button",onClick:O,"aria-haspopup":"dialog","aria-expanded":l.value,"aria-controls":"settings-menu"},[t("img",{src:P(F),alt:""},null,8,GA)],8,YA),t("h1",PA,R(s.value==="bomb"?"Bomb Game":"Find the Taiyaki!"),1),m.value.length?(c(),u("div",{key:1,id:"card-grid",class:h(["card-grid",{ended:b.value}])},[(c(!0),u(DA,null,CA(k.value,(a,o)=>(c(),u("div",{key:a.id,class:h(["card",{revealed:a.isFlipped,hit:b.value&&a.isTarget}]),onClick:f=>cA(a,o),role:"button","aria-pressed":a.isFlipped},[t("div",{class:h(["card-inner",{"bomb-anim":d.value===o&&s.value==="bomb","mushroom-anim":d.value===o&&s.value==="mushroom"}])},[t("div",QA,[t("div",XA,[t("img",{class:"card-img",src:a.image_url,alt:AA(a),decoding:"async"},null,8,OA)]),r.value?G((c(),u("div",ZA,[MA(R(a.english),1)])),[[n,{minRatio:.08,maxRatio:.17,minPx:14,maxPx:32}]]):U("",!0)]),t("div",{class:h(["card-back",{blank:a.backKind==="blank","glow-yellow":d.value===o&&s.value==="mushroom"}])},[a.backKind!=="blank"?(c(),u("img",{key:0,class:"result-img",src:eA(a),alt:tA(a),decoding:"async"},null,8,jA)):U("",!0)],2)],2)],10,LA))),128))],2)):(c(),u("p",FA,"No cards loaded. Go back and select some cards.")),G(t("div",{class:"settings-backdrop",onClick:v},null,512),[[RA,l.value]]),t("div",JA,[t("button",{class:"settings-button",type:"button",onClick:O,"aria-haspopup":"dialog","aria-expanded":l.value,"aria-controls":"settings-menu"},[t("img",{src:P(F),alt:""},null,8,KA)],8,qA),l.value?(c(),u("div",{key:0,class:"settings-backdrop",onClick:v,"aria-hidden":"true"})):U("",!0),UA(IA,{name:"settings-drop"},{default:BA(()=>[l.value?(c(),u("div",{key:0,id:"settings-menu",class:"settings-dropdown",role:"dialog","aria-modal":!1,"data-mode":g.value,"aria-hidden":!l.value},[e[3]||(e[3]=t("h3",{class:"settings-title"},"Game Settings",-1)),t("div",$A,[e[2]||(e[2]=t("label",{class:"settings-label",for:"display-card-limit"},"Number of Cards",-1)),G(t("input",{class:"settings-input",type:"number",id:"display-card-limit",min:"4",max:m.value.length||4,"onUpdate:modelValue":e[0]||(e[0]=a=>w.value=a)},null,8,Ae),[[NA,w.value,void 0,{number:!0}]])]),t("div",ee,[t("button",{id:"toggle-english-btn",class:h(["btn toggle",{off:!r.value}]),onClick:nA,type:"button"}," English: "+R(r.value?"ON":"OFF"),3),t("button",{id:"mode-btn",class:"btn mode",type:"button",onClick:e[1]||(e[1]=a=>g.value=g.value==="bomb"?"mushroom":"bomb")}," Mode: "+R(g.value==="bomb"?"Bomb":"Taiyaki"),1)]),t("div",{class:"settings-actions bottom"},[t("button",{class:"btn ghost restart-btn",type:"button",onClick:mA},"Reset"),t("button",{class:"btn primary apply-btn",type:"button",onClick:dA},"Apply"),t("button",{class:"btn danger cancel-btn",type:"button",onClick:v},"Cancel")])],8,_A)):U("",!0)]),_:1})],512)])}}}),oe=TA(ne,[["__scopeId","data-v-8ec070cd"]]);export{oe as default};
