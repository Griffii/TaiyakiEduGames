import{i as Te,r as v,c as S,o as Ce,a as d,g as X,d as e,h as A,f as V,t as k,k as me,v as we,T as ke,F as O,e as D,p as Ee,b as c,n as re,_ as $e,N as qe,w as Xe,j as Ie,C as Oe,H as Ke,G as Ae,x as ue,y as Pe,u as je,B as ge,O as Ne}from"./index-olKPsY8p.js";import{b as Je}from"./back-icon-xKqy7r3s.js";import{s as Qe}from"./settings-icon-DJLQOoae.js";import{h as We,w as De}from"./shokichi-KW1WytDh.js";const Ze="/TaiyakiEduGames/assets/mystery-machine-icon-DFeu74Q1.png",et="/TaiyakiEduGames/assets/mystery-machine-body-D8HKPlGZ.png",tt="/TaiyakiEduGames/assets/slot-arm-christmas-42_i7_I_.png",at="/TaiyakiEduGames/assets/slot-machine-DpezDdAa.mp3",Re="/TaiyakiEduGames/assets/daikichi-C_c_FTXQ.mp3",Ge="/TaiyakiEduGames/assets/daikyo-CY7yqnN5.mp3",st="/TaiyakiEduGames/assets/kichi--kgZ_B-c.mp3",Be="/TaiyakiEduGames/assets/kyo-B7Jx3MGi.mp3",lt={class:"mm-stage"},nt={class:"mm-machine"},ot={class:"mm-stack"},it={class:"mm-top-panel"},rt={class:"wager-section"},ut={class:"wager-inner"},ct={class:"wager-header"},dt={class:"wager-controls"},vt=["disabled"],pt={class:"wager-value-block"},ft={class:"wager-amount"},mt=["disabled"],yt={class:"mm-toast-panel"},bt={key:"toast",class:"mm-toast"},ht={class:"mm-toast-text"},gt={class:"reels-layer"},_t={class:"slot-frame"},wt={class:"reel-symbol"},kt=["src"],Tt=["disabled","aria-disabled"],Ct=["src"],$t={key:0,class:"effect-modal"},St={class:"effect-header"},Mt={class:"effect-title"},xt={class:"effect-body"},Et={class:"effect-description"},At={class:"effect-actions"},Pt={class:"effect-modal info-modal"},Nt={class:"prize-grid"},zt={class:"prize-col"},Ft={class:"prize-list"},It={class:"prize-col"},Ot={class:"prize-list"},Wt={class:"prize-col"},Dt={class:"prize-list"},Rt={class:"prize-col"},Gt={class:"prize-list"},Bt={class:"effect-actions info-actions"},Lt=48,ze=3500,Ut=Te({__name:"MysteryMachine",props:{maxWager:{}},emits:["close","resolved"],setup(ce,{emit:K}){const j=et,Y=tt;let T=null;const x=new Map;typeof window<"u"&&typeof Audio<"u"&&(T=new Audio(at),x.set("return",We),x.set("quadruple",Re),x.set("lose_all",Ge),x.set("double",st),x.set("lose_half",Be),x.set("triple",De));function f(){if(T)try{T.currentTime=0,T.play().catch(()=>{})}catch{}}function y(r){const o=x.get(r);if(o)try{const i=new Audio(o);i.currentTime=0,i.play().catch(()=>{})}catch{}}const h=ce,z=K,p=v(10),M=["ðŸ’£","âš–ï¸","â­•","âœ¨","ðŸ†","7ï¸âƒ£"],W={lose_all:"ðŸ’£",lose_half:"â­•",return:"âš–ï¸",double:"âœ¨",triple:"ðŸ†",quadruple:"7ï¸âƒ£"},_=360/M.length,F=[2300,2900,3400],P=v([0,0,0]),b=v(!1),R=v(!1),I=v(!1),G=v(null),C=v(null),L=v(0),B=v(!1),H=v(!1),q=v(!1),J=v(""),E=[{id:"t1_refip",tier:1,label:"One re-flip (must take second card)"},{id:"t1_flip2pick1",tier:1,label:"Flip 2 cards and pick 1"},{id:"t1_steal10_each",tier:1,label:"Steal 10 points from each team"},{id:"t1_give10_one",tier:1,label:"Give away 10 points to one team"},{id:"t1_half_next",tier:1,label:"Your next card's value is halved"}],Q=[{id:"t2_steal20_each",tier:2,label:"Steal 20 points from each team"},{id:"t2_double_next",tier:2,label:"Your next card's value is doubled"},{id:"t2_convert_negative",tier:2,label:"Convert a negative card to a positive card"},{id:"t2_swap_second",tier:2,label:"Swap total points with the 2nd place team"},{id:"t2_give50_one",tier:2,label:"Choose another team to get 50 points"}],te=[{id:"t3_steal30_each",tier:3,label:"Steal 30 points from each team"},{id:"t3_steal50_one",tier:3,label:"Steal 50 points from one team"},{id:"t3_lose30_others",tier:3,label:"Every other team loses 30 points"},{id:"t3_flip3_pick2",tier:3,label:"Flip 3 cards and choose 2 next turn"},{id:"t3_plus50_others",tier:3,label:"Plus 50 points to every other team"},{id:"t3_give10_others",tier:3,label:"Give 10 points to every other team"}],Z={t1_refip:"Use once: if you dislike your next card, flip a new one â€” but you must take the second card.",t1_flip2pick1:"On a future turn, flip 2 cards instead of 1 and choose which card to keep.",t1_steal10_each:"Immediately steal 10 points from every other team and add them to your own score.",t1_give10_one:"Immediately give 10 of your points to any one team of your choice.",t1_half_next:"Your next cardâ€™s value is cut in half!",t2_steal20_each:"Steal 20 points from every other team and add them all to your score.",t2_double_next:"The next card you draw will be worth double its normal value.",t2_convert_negative:"Turn a negative card into a positive card of the same value.",t2_swap_second:"Swap your total score with the team currently in 2nd place.",t2_give50_one:"Gift +50 points to any one team.",t3_steal30_each:"Steal a huge 30 points from every other team.",t3_steal50_one:"Steal 50 points from any single team.",t3_lose30_others:"Every other team immediately loses 30 points from their total.",t3_flip3_pick2:"On a future turn, flip 3 cards and keep 2 of them. Discard the 3rd.",t3_plus50_others:"Every other team gains +50 points.",t3_give10_others:"Give 10 of your points to every other team."},l=[{type:"lose_all",weight:22},{type:"lose_half",weight:18},{type:"return",weight:25},{type:"double",weight:18},{type:"triple",weight:10},{type:"quadruple",weight:7}],a=[],n=S(()=>!(b.value||p.value<10||p.value%10!==0||h.maxWager!=null&&p.value>h.maxWager)),m=S(()=>!!C.value&&!!G.value&&!b.value),U=S(()=>ve(p.value)),se=S(()=>C.value?Z[C.value.id]??C.value.label:"");function le(r){switch(r){case"lose_all":return"Lose all wager";case"lose_half":return"Lose half wager";case"return":return"No change (return wager)";case"double":return"Double wager";case"triple":return"Triple wager";case"quadruple":return"Quadruple wager"}}const ye=S(()=>{const r=l.reduce((o,i)=>o+i.weight,0);return l.map(({type:o,weight:i})=>{const g=i/r*100;return{type:o,name:le(o),percent:g.toFixed(1)}})});function de(){p.value<0&&(p.value=0),h.maxWager!=null&&p.value>h.maxWager&&(p.value=h.maxWager),p.value%10!==0&&(p.value=Math.round(p.value/10)*10)}function ve(r){return r>=100?3:r>=50?2:1}function pe(r){const o=r===1?E:r===2?Q:te,i=Math.floor(Math.random()*o.length);return o[i]}function be(){const r=l.reduce((g,ae)=>g+ae.weight,0),o=Math.random()*r;let i=0;for(const g of l)if(i+=g.weight,o<=i)return g.type;return"return"}function ne(r,o){let i="",g=0;switch(r){case"lose_all":i="You lost your entire wager",g=-o;break;case"lose_half":i="You lost half your wager",g=-Math.round(o/2);break;case"return":i="Your wager was returned (no change)",g=0;break;case"double":i="Your wager was doubled",g=o;break;case"triple":i="Your wager was tripled",g=2*o;break;case"quadruple":i="Your wager was quadrupled",g=3*o;break}return{outcome:{type:r,label:i},delta:g}}function t(r){const i=`rotateX(${P.value[r]}deg)`;if(R.value)return{transform:i,transition:"transform 0s"};if(b.value){const g=F[r]??ze;return{transform:i,transition:`transform ${g}ms cubic-bezier(.2,.8,.3,1.1)`}}return{transform:i,transition:"transform 0s"}}function s(r){return{transform:`rotateX(${r*_}deg) translateZ(${Lt}px)`}}function u(r,o){const i=r===0?"0 points":`${r>0?"+":""}${r} points`;J.value=i,q.value=!0,y(o)}function w(){q.value=!1}function ee(){if(!n.value)return;de(),G.value=null,C.value=null,L.value=0,B.value=!1,q.value=!1;const r=be(),{outcome:o,delta:i}=ne(r,p.value),g=ve(p.value),ae=pe(g),fe=W[r],Me=M.indexOf(fe),Ue=Me>=0?Me:0;b.value=!1,R.value=!0,P.value=[0,0,0];try{document.body.offsetHeight}catch{}window.requestAnimationFrame(()=>{R.value=!1,b.value=!0;const Ve=3;P.value=P.value.map((xe,He)=>-((Ve+He)*360+Ue*_));const Ye=window.setTimeout(()=>{G.value=o,C.value=ae,L.value=i,b.value=!1;const xe={wager:p.value,wagerOutcome:o,pointsDelta:i,tier:g,effect:ae};z("resolved",xe),u(i,o.type)},ze);a.push(Ye)})}function $(){if(!n.value||b.value)return;I.value=!0,f();const r=window.setTimeout(()=>{I.value=!1},350);a.push(r),ee()}function N(r){b.value||(p.value+=r,p.value<0&&(p.value=0),de())}function he(){!m.value||!C.value||(B.value=!0)}function oe(){B.value=!1}function Se(){z("close")}function Le(){Se()}return Ce(()=>{a.forEach(r=>clearTimeout(r))}),(r,o)=>(c(),d("section",{class:"mystery-machine-overlay",role:"dialog","aria-modal":"true",onClick:X(Le,["self"])},[e("button",{class:"overlay-prizes-btn",type:"button",onClick:o[0]||(o[0]=i=>H.value=!0),"aria-label":"View prize tiers"}," ðŸŽ "),e("button",{class:"overlay-close-btn",type:"button",onClick:Se,"aria-label":"Close Mystery Machine"}," âœ• "),e("div",lt,[e("section",nt,[e("div",ot,[e("div",it,[e("section",rt,[e("div",ut,[e("div",ct,[o[5]||(o[5]=e("span",{class:"wager-label"},"Wager",-1)),e("span",{class:V(["wager-tier-pill",`tier-${U.value}`])}," Tier "+k(U.value),3)]),e("div",dt,[e("button",{type:"button",class:"arrow-btn",onClick:o[1]||(o[1]=i=>N(-10)),disabled:b.value||p.value<=0,"aria-label":"Decrease wager"}," â—€ ",8,vt),e("div",pt,[e("span",ft,k(p.value)+" pts ",1)]),e("button",{type:"button",class:"arrow-btn",onClick:o[2]||(o[2]=i=>N(10)),disabled:b.value||r.maxWager!=null&&p.value>=r.maxWager,"aria-label":"Increase wager"}," â–¶ ",8,mt)])])])]),e("div",yt,[me(ke,{name:"mm-toast-slide"},{default:we(()=>[q.value?(c(),d("div",bt,[e("span",ht,k(J.value),1),e("button",{class:"mm-toast-close",type:"button",onClick:w,"aria-label":"Dismiss message"}," âœ• ")])):A("",!0)]),_:1})]),e("div",gt,[e("div",_t,[(c(!0),d(O,null,D(P.value,(i,g)=>(c(),d("div",{key:g,class:"reel3d"},[e("div",{class:"reel3d-inner",style:re(t(g))},[(c(),d(O,null,D(M,(ae,fe)=>e("div",{key:fe,class:"reel-face",style:re(s(fe))},[e("span",wt,k(ae),1)],4)),64))],4)]))),128))])]),e("img",{src:Ee(j),alt:"Mystery Machine body",class:"machine-body-img",draggable:"false"},null,8,kt),m.value&&!B.value?(c(),d("button",{key:0,class:V(["prize-btn",{"has-prize":m.value}]),type:"button",onClick:he},[...o[6]||(o[6]=[e("span",{class:"prize-label"},"ðŸŽ Mystery Prize",-1)])],2)):A("",!0),e("button",{class:"slot-arm-btn",type:"button",disabled:!n.value||b.value,onClick:$,"aria-disabled":!n.value||b.value},[e("img",{src:Ee(Y),alt:"Pull to spin",class:V(["slot-arm-img",{"is-disabled":!n.value||b.value,"is-pulled":I.value}]),draggable:"false"},null,10,Ct)],8,Tt)])])]),B.value&&C.value?(c(),d("div",{key:0,class:"effect-modal-overlay",onClick:X(oe,["self"])},[me(ke,{name:"mm-card-pop"},{default:we(()=>[B.value?(c(),d("div",$t,[e("div",St,[e("h3",Mt,k(C.value.label),1)]),e("div",xt,[e("p",Et,k(se.value),1)]),e("div",At,[e("span",{class:V(["effect-tier-chip",`tier-${C.value.tier}`])}," Tier "+k(C.value.tier),3),e("button",{class:"pill-btn primary",type:"button",onClick:oe}," Close ")])])):A("",!0)]),_:1})])):A("",!0),H.value?(c(),d("div",{key:1,class:"effect-modal-overlay",onClick:o[4]||(o[4]=X(i=>H.value=!1,["self"]))},[e("div",Pt,[o[11]||(o[11]=e("h3",{class:"effect-title"},"Prizes & Outcomes",-1)),e("div",Nt,[e("div",zt,[o[7]||(o[7]=e("h4",null,"Wager Outcomes",-1)),e("ul",Ft,[(c(!0),d(O,null,D(ye.value,i=>(c(),d("li",{key:i.type},k(i.name)+" â€” approx "+k(i.percent)+"% ",1))),128))])]),e("div",It,[o[8]||(o[8]=e("h4",null,"Tier 1 (10â€“40)",-1)),e("ul",Ot,[(c(),d(O,null,D(E,i=>e("li",{key:i.id},k(i.label),1)),64))])]),e("div",Wt,[o[9]||(o[9]=e("h4",null,"Tier 2 (50â€“90)",-1)),e("ul",Dt,[(c(),d(O,null,D(Q,i=>e("li",{key:i.id},k(i.label),1)),64))])]),e("div",Rt,[o[10]||(o[10]=e("h4",null,"Tier 3 (100+)",-1)),e("ul",Gt,[(c(),d(O,null,D(te,i=>e("li",{key:i.id},k(i.label),1)),64))])])]),e("div",Bt,[e("button",{class:"pill-btn primary",type:"button",onClick:o[3]||(o[3]=i=>H.value=!1)}," Close ")])])])):A("",!0)]))}}),Vt=$e(Ut,[["__scopeId","data-v-613147b9"]]),Yt={key:0,class:"team-points-tracker"},Ht={key:0,class:"tracker-shell"},qt={class:"tracker-row"},Xt={class:"left-stack"},Kt=["disabled"],jt=["aria-pressed","title"],Jt={class:"tabs-row"},Qt=["onClick"],Zt={class:"tab-inner"},ea={class:"team-name"},ta={class:"team-points"},aa={key:0,class:"leader-crown","aria-label":"Current leader",role:"img"},sa={class:"team-controls"},la=["disabled"],na=["disabled"],oa={class:"edit-field"},ia={class:"edit-field"},ra={class:"edit-actions"},ua=["disabled"],ca={class:"fullscreen-modal"},da={class:"fullscreen-header"},va={class:"fullscreen-grid"},pa={key:0,class:"fullscreen-crown","aria-label":"Current leader",role:"img"},fa={class:"fullscreen-name"},ma={class:"fullscreen-points"},ya=Te({__name:"TeamPointsTracker",props:{teams:{},maxTeams:{}},emits:["update:teams","team-selected"],setup(ce,{expose:K,emit:j}){const Y=ce,T=j,x=S(()=>{const l=Y.maxTeams??8;return Math.min(Math.max(l,1),8)}),f=v([]),y=v(-1),h=v(!1),z=v(!1),p=v(!0),M=qe({name:"",points:0}),W=v(null);Xe(()=>Y.teams,l=>{if(Array.isArray(l)&&l.length>0)f.value=l.slice(0,x.value).map((a,n)=>({id:a.id??n,name:a.name??`Team ${n+1}`,points:Number.isFinite(a.points)?a.points:0}));else if(!f.value.length){const a=Math.min(4,x.value);f.value=Array.from({length:a}).map((n,m)=>({id:m,name:`Team ${m+1}`,points:0}))}},{immediate:!0,deep:!0});const _=S(()=>f.value.slice(0,x.value));function F(l){y.value===l?(y.value=-1,h.value=!1,T("team-selected",null)):(y.value=l,h.value=!1,T("team-selected",_.value[l]??null))}function P(){const l=y.value;if(!(l<0||l>=_.value.length)&&(h.value=!h.value,h.value)){const a=_.value[l];M.name=a.name,M.points=a.points}}function b(){if(y.value<0||y.value>=_.value.length)return;const l=y.value,a=[...f.value],n=Number.isFinite(M.points)?Math.round(M.points):0;a[l]={...a[l],name:M.name.trim()||`Team ${l+1}`,points:n},f.value=a,T("update:teams",a),h.value=!1}function R(l){if(!h.value)return;const a=W.value;if(!a)return;const n=l.target;n&&(a.contains(n)||(h.value=!1))}const I=S(()=>{const l=_.value;if(!l.length)return-1;let a=-1/0,n=-1;return l.forEach((m,U)=>{m.points>a&&(a=m.points,n=U)}),a<=0?-1:n}),G=S(()=>I.value!==-1),C=S(()=>f.value.length<x.value),L=S(()=>f.value.length>1);function B(){if(!C.value)return;const l=[...f.value],a=l.length,m={id:(l.length>0?Math.max(...l.map(U=>U.id)):-1)+1,name:`Team ${a+1}`,points:0};l.push(m),f.value=l,y.value=a,h.value=!1,T("update:teams",l),T("team-selected",m)}function H(){if(!L.value)return;const l=y.value;l<0||J(l)}function q(){L.value&&(y.value<0||y.value>=_.value.length||J(y.value))}function J(l){const a=[...f.value];if(l<0||l>=a.length)return;a.splice(l,1);const n=Math.min(l,a.length-1);y.value=a.length?Math.max(n,0):-1,h.value=!1,f.value=a,T("update:teams",a),T("team-selected",a[y.value]??null)}function E(){z.value=!z.value}function Q(l,a){if(l<0||l>=f.value.length||!Number.isFinite(a))return;const n=[...f.value];n[l]={...n[l],points:n[l].points+Math.round(a)},f.value=n,T("update:teams",n)}function te(l){if(!_.value.length||!Number.isFinite(l))return;const a=y.value;if(a<0||a>=_.value.length)return;const n=[...f.value];n[a]={...n[a],points:(n[a].points??0)+Math.round(l)},f.value=n,T("update:teams",n)}function Z(l,a){if(l<0||l>=f.value.length)return;const n=[...f.value];n[l]={...n[l],points:Math.round(a)},f.value=n,T("update:teams",n)}return K({addPoints:Q,setPoints:Z,applyDeltaToSelected:te}),Ie(()=>{window.addEventListener("pointerdown",R,{capture:!0})}),Ce(()=>{window.removeEventListener("pointerdown",R,{capture:!0})}),(l,a)=>_.value.length?(c(),d("section",Yt,[p.value?(c(),d("button",{key:0,type:"button",class:"reopen-btn",onClick:a[0]||(a[0]=n=>p.value=!1),title:"Show team scores"}," â–¾ ")):A("",!0),me(ke,{name:"tracker-slide"},{default:we(()=>[p.value?A("",!0):(c(),d("div",Ht,[e("div",qt,[e("div",Xt,[e("button",{type:"button",class:"stack-btn collapse-btn",onClick:a[1]||(a[1]=n=>p.value=!0),title:"Hide team bar"}," â–´ "),e("button",{type:"button",class:"stack-btn edit-btn",onClick:P,disabled:y.value<0||y.value>=_.value.length,title:"Edit selected team"}," âœ ",8,Kt),e("button",{type:"button",class:"stack-btn fullscreen-btn",onClick:E,"aria-pressed":z.value,title:z.value?"Close scoreboard view":"Open scoreboard view"}," â›¶ ",8,jt)]),e("div",Jt,[(c(!0),d(O,null,D(_.value,(n,m)=>(c(),d("button",{key:n.id,class:V(["team-tab",{"is-selected":m===y.value,"is-leader":m===I.value}]),type:"button",onClick:U=>F(m)},[e("div",Zt,[e("span",ea,k(n.name||`Team ${m+1}`),1),e("span",ta,k(n.points),1)]),I.value===m&&G.value?(c(),d("span",aa," ðŸ‘‘ ")):A("",!0)],10,Qt))),128))]),e("div",sa,[e("button",{class:"side-btn",type:"button",disabled:!L.value,onClick:H,title:"Remove team"}," âˆ’ ",8,la),e("button",{class:"side-btn",type:"button",disabled:!C.value,onClick:B,title:"Add team"}," ï¼‹ ",8,na)])]),h.value&&y.value!==-1?(c(),d("div",{key:0,class:"edit-panel",ref_key:"editPanelRef",ref:W},[e("div",oa,[e("label",null,[a[6]||(a[6]=Ae(" Team name ",-1)),ue(e("input",{"onUpdate:modelValue":a[2]||(a[2]=n=>M.name=n),type:"text",maxlength:"24"},null,512),[[Pe,M.name]])])]),e("div",ia,[e("label",null,[a[7]||(a[7]=Ae(" Points ",-1)),ue(e("input",{"onUpdate:modelValue":a[3]||(a[3]=n=>M.points=n),type:"number",step:"1"},null,512),[[Pe,M.points,void 0,{number:!0}]])])]),e("div",ra,[e("button",{type:"button",class:"btn small danger",disabled:!L.value,onClick:q}," Delete ",8,ua),e("button",{type:"button",class:"btn small primary",onClick:b}," Save ")])],512)):A("",!0)]))]),_:1}),(c(),Oe(Ke,{to:"body"},[z.value?(c(),d("div",{key:0,class:"fullscreen-overlay",onClick:a[5]||(a[5]=X(n=>z.value=!1,["self"]))},[e("div",ca,[e("header",da,[a[8]||(a[8]=e("h2",{class:"fullscreen-title"},"Team Scores",-1)),e("button",{type:"button",class:"btn small secondary",onClick:a[4]||(a[4]=n=>z.value=!1)}," Close ")]),e("div",va,[(c(!0),d(O,null,D(_.value,(n,m)=>(c(),d("article",{key:n.id,class:V(["fullscreen-card",{"is-leader":m===I.value}])},[m===I.value&&G.value?(c(),d("div",pa," ðŸ‘‘ ")):A("",!0),e("div",fa,k(n.name||`Team ${m+1}`),1),e("div",ma,k(n.points),1)],2))),128))])])])):A("",!0)]))])):A("",!0)}}),ba=$e(ya,[["__scopeId","data-v-5c2312b8"]]),ha="/TaiyakiEduGames/assets/mystery-machine-a5NpraJ-.mp3",ga=["aria-expanded"],_a={class:"menu-row"},wa={class:"menu-row"},ka={class:"menu-row"},Ta={class:"mute-row"},Ca=["aria-pressed"],$a={class:"label-cell row"},Sa=["onClick","onKeydown"],Ma={class:"face back"},_e=4,ie=6,xa=.35,Fe="random-points-settings",Ea=150,Aa=110,Pa=Te({__name:"RandomPoints",setup(ce){const K=v(!1),j=v(null),Y=v(!1),T=v(null);function x(){K.value=!1}function f(t){if(!t||typeof t.pointsDelta!="number"||!Y.value)return;const s=t.pointsDelta;s!==0&&j.value?.applyDeltaToSelected(s)}function y(t){Y.value=!!t}const h=_e*ie,z=["A","B","C","D","E","F"],p=je(),M=()=>p.back(),W=v(!1),_=v(!0),F=v(!1),P=v(!0);v(!1);const b=v(!1),R=v(Array.from({length:h},(t,s)=>({id:s,value:0,display:"",revealed:!1}))),I=v(typeof window<"u"?window.innerHeight:800),G=v(typeof window<"u"?window.innerWidth:1280),C=S(()=>{const t=G.value;return t<=360?22:t<=420?24:t<=520?26:t<=680?28:30}),L=S(()=>{const t=G.value;return t<=360?6:t<=420?7:t<=520?8:t<=680?9:10}),B=S(()=>({"--labelW":`${C.value}px`,"--gap":`${L.value}px`})),H=S(()=>({height:`${Math.max(320,I.value-Ea-Aa)}px`,gridTemplateColumns:`var(--labelW) repeat(${ie}, 1fr)`,gridTemplateRows:`repeat(${_e}, 1fr)`,gap:"var(--gap)"})),q=S(()=>({gridTemplateColumns:`var(--labelW) repeat(${ie}, 1fr)`,gap:"var(--gap)"})),J=(t,s)=>(t-1)*ie+(s-1),E=(t,s)=>R.value[J(t,s)],Q=t=>typeof t!="number";function te(t){return typeof t=="number"?t>0?"val-pos":t<0?"val-neg":"val-zero":"val-mystery val-text"}function Z(t,s){return Math.floor(Math.random()*(s-t+1))+t}const l={positive:new Audio(De),negative:new Audio(Be),swap:new Audio(We),loseAll:new Audio(Ge),fifty:new Audio(Re),mystery:new Audio(ha)};function a(){const t=b.value?0:xa;l.positive.volume=t,l.negative.volume=t,l.swap.volume=t,l.loseAll.volume=t,l.fifty.volume=t,l.mystery.volume=t}function n(t){const s=l[t];try{s.currentTime=0,s.play()}catch{}}function m(){b.value=!b.value,a(),pe()}function U(){const t=[],s=F.value?100:50;if(t.push(s),P.value){const $=h-t.length;if($>0){const N=Z(3,6),he=Math.min(N,$);for(let oe=0;oe<he;oe++)t.push("Mystery Machine")}}const u=h-t.length;let w=u,ee=0;_.value&&(w=Math.floor(u*.6),ee=u-w);for(let $=0;$<w;$++){const N=5*Z(1,5);t.push(F.value?N*2:N)}for(let $=0;$<ee;$++){const N=-5*Z(1,5);t.push(F.value?N*2:N)}for(let $=t.length-1;$>0;$--){const N=Math.floor(Math.random()*($+1));[t[$],t[N]]=[t[N],t[$]]}return t}function se(){const t=U();for(let s=0;s<h;s++){const u=t[s],w=R.value[s];w.value=u,w.display=typeof u=="number"?String(u):u,w.revealed=!1}}function le(t){if(!(!t||t.revealed)){if(typeof t.value=="string")n("mystery");else{const s=F.value?100:50;t.value===s?n("fifty"):t.value>0?n("positive"):n("negative")}t.revealed=!0,typeof t.value=="number"&&Y.value&&j.value?.applyDeltaToSelected(t.value)}}function ye(){for(const t of R.value)t.revealed=!0}function de(){se()}function ve(){W.value=!W.value}function pe(){localStorage.setItem(Fe,JSON.stringify({allowNegatives:_.value,doublePoints:F.value,allowSpecial:P.value,sfxMuted:b.value}))}function be(){pe(),se(),W.value=!1}function ne(){I.value=window.innerHeight,G.value=window.innerWidth}return Ie(()=>{try{const t=localStorage.getItem(Fe);if(t){const s=JSON.parse(t);typeof s.allowNegatives=="boolean"&&(_.value=s.allowNegatives),typeof s.doublePoints=="boolean"&&(F.value=s.doublePoints),typeof s.allowSpecial=="boolean"&&(P.value=s.allowSpecial),typeof s.sfxMuted=="boolean"&&(b.value=s.sfxMuted)}}catch{}a(),se(),ne(),window.addEventListener("resize",ne,{passive:!0})}),Ce(()=>{window.removeEventListener("resize",ne)}),(t,s)=>(c(),d("section",{class:"random-points-page app-bg",style:re(B.value)},[me(ba,{ref_key:"teamTracker",ref:j,onTeamSelected:y},null,512),e("button",{class:"icon-btn back",type:"button",onClick:M,"aria-label":"Back",title:"Back"},[...s[6]||(s[6]=[e("img",{class:"icon",src:Je,alt:""},null,-1)])]),e("button",{class:"icon-btn settings",type:"button",onClick:ve,"aria-haspopup":"dialog","aria-expanded":W.value,"aria-controls":"settings-menu","aria-label":"Open settings",title:"Settings"},[...s[7]||(s[7]=[e("img",{class:"icon",src:Qe,alt:""},null,-1)])],8,ga),e("button",{class:"icon-btn mystery",type:"button",onClick:s[0]||(s[0]=u=>K.value=!0),"aria-label":"Open Mystery Machine",title:"Mystery Machine"},[...s[8]||(s[8]=[e("img",{class:"icon",src:Ze,alt:""},null,-1)])]),K.value?(c(),Oe(Vt,{key:0,maxWager:T.value,onClose:x,onResolved:f},null,8,["maxWager"])):A("",!0),W.value?(c(),d("div",{key:1,class:"settings-overlay",role:"presentation",onClick:s[5]||(s[5]=u=>W.value=!1)},[e("div",{id:"settings-menu",class:"settings-menu",role:"dialog","aria-modal":"true",onClick:s[4]||(s[4]=X(()=>{},["stop"]))},[s[12]||(s[12]=e("h3",{class:"menu-title"},"Settings",-1)),e("label",_a,[ue(e("input",{type:"checkbox","onUpdate:modelValue":s[1]||(s[1]=u=>_.value=u)},null,512),[[ge,_.value]]),s[9]||(s[9]=e("span",null,"Negative Numbers",-1))]),e("label",wa,[ue(e("input",{type:"checkbox","onUpdate:modelValue":s[2]||(s[2]=u=>F.value=u)},null,512),[[ge,F.value]]),s[10]||(s[10]=e("span",null,"Double Points",-1))]),e("label",ka,[ue(e("input",{type:"checkbox","onUpdate:modelValue":s[3]||(s[3]=u=>P.value=u)},null,512),[[ge,P.value]]),s[11]||(s[11]=e("span",null,"Mystery Machine Cards",-1))]),e("div",Ta,[e("button",{class:"mute-btn","aria-pressed":b.value,onClick:m},k(b.value?"Unmute SFX":"Mute SFX"),9,Ca)]),e("button",{class:"apply",onClick:be},"Apply")])])):A("",!0),s[15]||(s[15]=e("h1",{class:"title"},null,-1)),e("div",{class:"labels",style:re(q.value)},[s[13]||(s[13]=e("div",null,null,-1)),(c(),d(O,null,D(z,u=>e("div",{key:u,class:"label-cell"},k(u),1)),64))],4),e("div",{class:"grid",style:re(H.value)},[(c(),d(O,null,D(_e,u=>(c(),d(O,{key:`r-${u}`},[e("div",$a,k(u),1),(c(),d(O,null,D(ie,w=>e("div",{key:`c-${u}-${w}`,class:"grid-item"},[e("div",{class:V(["card",{"mystery-card":Q(E(u,w).value),"mystery-card--revealed":Q(E(u,w).value)&&E(u,w).revealed}]),role:"button",tabindex:"0",onClick:X(ee=>le(E(u,w)),["stop"]),onKeydown:[Ne(X(ee=>le(E(u,w)),["prevent"]),["enter"]),Ne(X(ee=>le(E(u,w)),["prevent"]),["space"])]},[e("div",{class:V(["flip-inner",{revealed:E(u,w).revealed}])},[s[14]||(s[14]=e("div",{class:"face front"},null,-1)),e("div",Ma,[e("span",{class:V(["value",te(E(u,w).value)])},k(E(u,w).display),3)])],2)],42,Sa)])),64))],64))),64))],4),e("div",{class:"controls"},[e("button",{class:"big-btn",onClick:de},"Reset"),e("button",{class:"big-btn",onClick:ye},"See All")])],4))}}),Da=$e(Pa,[["__scopeId","data-v-f04dad50"]]);export{Da as default};
