const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vue-virtual-scroller.esm-DnwYXQHh.js","assets/index-CrgvobsY.js","assets/index-CZxxpChG.css"])))=>i.map(i=>d[i]);
import{Q as Pe,i as Fe,r as g,S as We,c as q,j as Je,A as ye,o as Ue,w as qe,a as o,h as l,d as t,k as Ve,u as Xe,p as ke,t as b,x as be,D as He,F as se,e as ae,y as Ye,G as Ke,v as Qe,U as Ze,m as et,s as N,b as i,V as tt,f as st,n as at,W as nt,_ as ot}from"./index-CrgvobsY.js";import{b as it}from"./back-icon-xKqy7r3s.js";const he="taiyaki.selections.v1";function lt(u){if(!u)return{};try{const c=JSON.parse(u);return typeof c=="object"&&c?c:{}}catch{return{}}}function rt(){try{return lt(localStorage.getItem(he))}catch{return{}}}function X(u){try{localStorage.setItem(he,JSON.stringify(u))}catch(c){console.warn("Failed to persist selections to localStorage:",c)}}function dt(u){const c=new Set,m=[];for(const f of u)c.has(f)||(c.add(f),m.push(f));return m}const ut=Pe("selections",{state:()=>({data:rt()}),actions:{list(u){const c=this.data[u]||{};return Object.entries(c).map(([m,f])=>({name:m,count:f.ids.length,updatedAt:f.updatedAt})).sort((m,f)=>f.updatedAt-m.updatedAt)},save(u,c,m){if(!u||!c)return;const f=dt(m.filter(Boolean));this.data[u]||(this.data[u]={}),this.data[u][c]={ids:f,updatedAt:Date.now()},X(this.data)},load(u,c){const m=this.data[u];return m?m[c]?.ids?[...m[c].ids]:[]:[]},delete(u,c){const m=this.data[u];!m||!(c in m)||(delete m[c],Object.keys(m).length===0&&delete this.data[u],X(this.data))},clearDeck(u){this.data[u]&&(delete this.data[u],X(this.data))},clearAll(){this.data={},X(this.data)}}}),ct="/TaiyakiEduGames/assets/bomb-Dbo5WG8N.png",pt="/TaiyakiEduGames/assets/sharknado-DE1BlCR3.png",mt="/TaiyakiEduGames/assets/headsup-CZLusrOt.png",gt="/TaiyakiEduGames/assets/spellingblitz-DuYpPWY-.png",vt="/TaiyakiEduGames/assets/spelling-guesser-Lfb09Kaz.png",ft="/TaiyakiEduGames/assets/sound-matcher-GJ2M5bnK.png",yt="/TaiyakiEduGames/assets/bingo-DCY4t3Hh.png",kt="/TaiyakiEduGames/assets/matching-3MQuCD6H.png",bt="/TaiyakiEduGames/assets/missing-DDLlibA2.png",ht={class:"deck-page"},wt={class:"page-topbar"},_t=["src"],St={class:"deck-title"},Ct={class:"deck-header"},Et={class:"deck-header-row"},Nt={class:"deck-header-row"},Mt={class:"deck-header-row"},xt=["disabled"],It=["aria-hidden"],At=["aria-hidden"],Dt={class:"button-container"},jt={class:"corner-rail"},Gt={key:0,class:"corner tl new"},$t={key:1,class:"corner tr xp"},Rt=["src"],Bt={class:"corner-rail"},zt={key:0,class:"corner tl new"},Tt={key:1,class:"corner tr xp"},Ot=["src"],Lt={class:"corner-rail"},Pt={key:0,class:"corner tl new"},Ft={key:1,class:"corner tr xp"},Wt=["src"],Jt={class:"corner-rail"},Ut={key:0,class:"corner tl new"},qt={key:1,class:"corner tr xp"},Vt=["src"],Xt={class:"corner-rail"},Ht={key:0,class:"corner tl new"},Yt={key:1,class:"corner tr xp"},Kt=["src"],Qt={class:"corner-rail"},Zt={key:0,class:"corner tl new"},es={key:1,class:"corner tr xp"},ts=["src"],ss={class:"corner-rail"},as={key:0,class:"corner tl new"},ns={key:1,class:"corner tr xp"},os=["src"],is={class:"corner-rail"},ls={key:0,class:"corner tl new"},rs={key:1,class:"corner tr xp"},ds=["src"],us={class:"corner-rail"},cs={key:0,class:"corner tl new"},ps={key:1,class:"corner tr xp"},ms=["src"],gs=["aria-hidden"],vs={class:"add-section"},fs={class:"radio"},ys=["checked"],ks=["disabled"],bs=["value"],hs={class:"add-section"},ws={class:"radio"},_s=["checked"],Ss=["disabled"],Cs={key:0,class:"error",role:"alert"},Es={class:"add-actions"},Ns=["disabled"],Ms=["disabled"],xs={class:"muted small",style:{"margin-top":"8px"}},Is={key:4,id:"load-modal",class:"popup add-popup",role:"dialog","aria-modal":"true"},As={key:0,class:"saved-list"},Ds={class:"saved-name"},js={class:"saved-actions"},Gs=["onClick"],$s=["onClick"],Rs={key:1,class:"muted"},Bs={class:"add-actions"},zs={class:"count-line"},Ts={id:"card-count"},Os={class:"card-content"},Ls=["src","alt"],Ps={class:"card-text"},Fs={key:0,class:"furigana"},Ws={key:1,class:"kanji"},Js={class:"english"},Us={key:5,class:"error"},qs="eitake.iconcache.",Vs="public-assets",Xs=230,Hs=Fe({__name:"DeckViewer",setup(u){const c=Ze(()=>nt(()=>import("./vue-virtual-scroller.esm-DnwYXQHh.js"),__vite__mapDeps([0,1,2])).then(s=>s.RecycleScroller||s.default?.RecycleScroller||s)),m={bomb:ct,sharknado:pt,headsup:mt,spellingblitz:gt,spellingguesser:vt,soundmatcher:ft,bingo:yt,memory:kt,missing:bt},f=g({});function ne(s){const e=s.split("/").pop()||s;return qs+e}async function we(s){const e=ne(s);if(f.value[e])return f.value[e];const n=localStorage.getItem(e);if(n)return f.value[e]=n,n;try{const r=await(await fetch(s)).blob(),d=new FileReader,v=await new Promise((S,h)=>{d.onload=()=>S(String(d.result)),d.onerror=h,d.readAsDataURL(r)});return localStorage.setItem(e,v),f.value[e]=v,v}catch{return s}}async function _e(){for(const s of Object.values(m))we(s)}const M=s=>{const e=m[s],n=ne(e);return f.value[n]||e};function x(s){const e=s.target;e.style.visibility="hidden",e.onerror=null}function oe(s){if(!s)return"";const{data:e}=N.storage.from(Vs).getPublicUrl(s);return e?.publicUrl??""}const Se={bomb:[],sharknado:[],headsup:[],spellingblitz:["xp"],spellingguesser:["xp"],soundmatcher:["xp"],bingo:[],memory:["new"],missing:["new"]},ie=(s,e)=>(Se[s]||[]).includes(e),I=s=>ie(s,"new"),A=s=>ie(s,"xp"),H=et(),k=Xe(),V=ut(),C=We(),w=g(""),O=g(""),le=g(!1);function re(){const s=H.params,e=H.query,n=s.id??s.deckId??e.id;w.value=typeof n=="string"?n:"",O.value=w.value||"unknown-deck",le.value=String(e.kind||"").toLowerCase()==="custom"}re();const _=g(""),E=g([]),L=g(null),p=g(new Set),$=g(0),R=g(!1),B=g(!1),z=g(!1),Y=g([]),P=g(""),D=g(!1),W=g(""),J=g(!1),F=g(null),j=g(!1),K=q(()=>(V.list(O.value)||[]).map(e=>typeof e=="string"?e:e?.name??"").filter(e=>!!e)),Ce=q(()=>E.value.length),de=q(()=>E.value.length>0&&p.value.size===E.value.length),U=g(2);function ue(){const s=window.innerWidth;return s>=1500?6:s>=1280?5:s>=1024?4:s>=760?3:2}function ce(){const s=ue();s!==U.value&&(U.value=s)}const Ee=q(()=>{const s=U.value||2,e=E.value,n=[];for(let a=0,r=0;a<e.length;a+=s,r++)n.push({key:r,items:e.slice(a,a+s)});return n});Je(async()=>{_e(),U.value=ue(),window.addEventListener("resize",ce,{passive:!0}),await ye(async()=>{await pe()},150),document.addEventListener("click",me)}),Ue(()=>{window.removeEventListener("resize",ce),document.removeEventListener("click",me)}),qe(()=>H.fullPath,async()=>{re(),await ye(async()=>{await pe()},150)});function Ne(s){if(Array.isArray(s))return s.map(e=>String(e).toLowerCase());if(typeof s=="string")return s.split(/[,\s]+/).map(e=>e.trim().toLowerCase()).filter(Boolean);if(s&&typeof s=="object")try{return Array.from(s).map(n=>String(n).toLowerCase())}catch{}return[]}async function pe(){if(L.value=null,p.value.clear(),$.value++,!w.value)throw L.value="Missing deck id in route.",new Error(L.value);try{if(le.value){const{data:d,error:v}=await N.from("custom_decks").select("id, title").eq("id",w.value).single();if(v)throw v;_.value=d?.title||w.value;const{data:S,error:h}=await N.from("v_custom_deck_cards_expanded").select("card_id, position, english, japanese_kanji, japanese_furigana, image_url").eq("deck_id",w.value).order("position",{ascending:!0});if(h)throw h;const T=(S??[]).map(y=>({id:y.card_id,english:y.english??"",japanese:{kanji:y.japanese_kanji??void 0,furigana:y.japanese_furigana??void 0},image_url:oe(y.image_url),is_bonus:!1}));E.value=T,T.forEach(y=>p.value.add(y.id)),$.value++;return}const{data:s,error:e}=await N.from("decks").select("id, title, slug").eq("id",w.value).single();if(e)throw e;_.value=s?.title||s?.slug||w.value;const{data:n,error:a}=await N.from("v_deck_cards_expanded").select(`
        deck_id,
        card_id,
        position,
        english,
        japanese_kanji,
        japanese_furigana,
        image_url,
        audio_url,
        tags,
        card_tags
      `).eq("deck_id",w.value).order("position",{ascending:!0});if(a)throw a;const r=(n||[]).map(d=>{const v=d.tags??d.card_tags??null,h=Ne(v).includes("bonus");return{id:d.card_id,english:d.english??"",japanese:{kanji:d.japanese_kanji??void 0,furigana:d.japanese_furigana??void 0},image_url:oe(d.image_url),is_bonus:h}});E.value=r,r.forEach(d=>p.value.add(d.id)),$.value++}catch(s){console.error(s),L.value=s?.message??"Failed to load deck."}}const Me=()=>k.back();function xe(){R.value=!0}function Q(){R.value=!1}function Ie(){B.value=!0}function Z(){B.value=!1}async function Ae(){F.value=null,D.value=!1,W.value="",P.value="",z.value=!0;const{data:s,error:e}=await N.from("custom_decks").select("id, title, card_count").order("updated_at",{ascending:!1});if(e){F.value=e.message;return}Y.value=s??[]}function ee(){z.value=!1}function me(s){const e=s.target;R.value&&!e.closest("#review-menu")&&!e.closest("[data-open-review]")&&Q(),B.value&&!e.closest("#game-menu")&&!e.closest("[data-open-game]")&&Z(),z.value&&!e.closest("#add-menu")&&!e.closest("[data-open-add]")&&ee(),j.value&&!e.closest("#load-modal")&&!e.closest("#load-selection-btn")&&(j.value=!1)}function te(s){Q();const e=w.value;if(!e)return;const n=Array.from(p.value),a={};n.length&&(a.ids=n.join(",")),s==="review"?(a.mode="review",k.push({name:"FlashcardReview",params:{id:e},query:a})):s==="random"?(a.mode="random",k.push({name:"FlashcardReview",params:{id:e},query:a})):s==="japanese"&&k.push({name:"JapaneseFlashcardReview",params:{id:e},query:a})}async function G(s){Z();const e=w.value;if(!e)return;const n=async()=>{const a=ve();if(!a.length)return alert("Select at least one card to play."),null;try{await fe(a.map(r=>r.image_url),{concurrency:8,timeoutMs:250})}catch{}return a};if(s==="bomb"){const a=await n();if(!a)return;C.set({cards:a,mode:"bomb"}),sessionStorage.setItem("eitake.bombgame.transit.v1",JSON.stringify({cards:a,mode:"bomb"})),k.push({name:"bomb-game",params:{id:e}})}else if(s==="sharknado"){const a=await n();if(!a)return;C.set({cards:a,mode:"sharknado"}),sessionStorage.setItem("eitake.sharknado.transit.v1",JSON.stringify({cards:a,mode:"sharknado"})),k.push({name:"sharknado",params:{id:e}})}else if(s==="headsup"){const a=await n();if(!a)return;C.set({cards:a,mode:"headsup"}),sessionStorage.setItem("eitake.sharknado.transit.v1",JSON.stringify({cards:a,mode:"headsup"})),k.push({name:"headsup",params:{id:e}})}else if(s==="spellingblitz"){const a=await n();if(!a)return;C.set({cards:a,mode:"spellingblitz",startMode:"easy"}),sessionStorage.setItem("eitake.spellingblitz.transit.v1",JSON.stringify({cards:a,startMode:"easy"})),k.push({name:"spellingblitz",params:{id:e},query:{mode:"easy"}})}else if(s==="spellingguesser"){const a=await n();if(!a)return;C.set({cards:a,mode:"spellingguesser",deckName:_.value}),sessionStorage.setItem("eitake.spellingguesser.transit.v1",JSON.stringify({cards:a,deckName:_.value})),k.push({name:"spellingguesser",params:{id:e},query:{deckName:_.value}})}else if(s==="soundmatcher"){const a=await n();if(!a)return;C.seedForListening?.({deckId:e,deckName:_.value,cards:a,startMode:"easy",audioLocale:"en-US",ttsRate:1})??C.set({cards:a,mode:"listening",startMode:"easy",deckName:_.value}),sessionStorage.setItem("eitake.soundmatcher.transit.v1",JSON.stringify({cards:a,deckName:_.value,startMode:"easy",deckId:e})),k.push({name:"sound-matcher",params:{deckId:e}})}else if(s==="bingo"){const a=ve();if(a.length<9){alert("Select at least 9 cards to play Bingo (3×3).");return}try{await fe(a.map(r=>r.image_url),{concurrency:8,timeoutMs:250})}catch{}C.set({cards:a,mode:"bingo",deckName:_.value}),sessionStorage.setItem("eitake.bingo.transit.v1",JSON.stringify({cards:a,deckName:_.value})),k.push({name:"bingo",params:{id:e}})}else if(s==="memory"){const a=await n();if(!a)return;C.set({cards:a,mode:"memory"}),sessionStorage.setItem("eitake.memory.transit.v1",JSON.stringify({cards:a,mode:"memory"})),k.push({name:"memory",params:{id:e}})}else if(s==="missing"){const a=await n();if(!a)return;C.set({cards:a,mode:"missing"}),sessionStorage.setItem("eitake.memory.transit.v1",JSON.stringify({cards:a,mode:"missing"})),k.push({name:"missing",params:{id:e}})}}function ge(s){return s.image_url||s.image||""}function De(s){p.value.has(s)?p.value.delete(s):p.value.add(s),$.value++}function je(){de.value?p.value.clear():E.value.forEach(s=>p.value.add(s.id)),$.value++}function Ge(){if(!E.value.length||!p.value.size)return;const s=new Set(E.value.filter(e=>e.is_bonus).map(e=>e.id));p.value.forEach(e=>{s.has(e)&&p.value.delete(e)}),$.value++}function ve(){return E.value.filter(s=>p.value.has(s.id)).map(s=>({id:s.id,english:s.english,image_url:ge(s),japanese:s.japanese??null}))}function fe(s,{concurrency:e=8,timeoutMs:n=250}={}){const a=[...s.filter(Boolean)];let r=0,d;const v=new Promise(T=>d=T),S=Date.now()+n;function h(){if(!a.length){r===0&&d();return}if(Date.now()>S){r===0&&d();return}for(;r<e&&a.length;){r++;const T=a.shift(),y=new Image;y.onload=y.onerror=()=>{r--,h()},y.decoding="async",y.loading="eager",y.referrerPolicy="no-referrer",y.src=T}}return h(),v}function $e(){const s=Array.from(p.value);if(!s.length){alert("No cards selected to save.");return}const e=`Set (${new Date().toLocaleString()})`,n=window.prompt("Name this selection:",e);if(n)try{V.save(O.value,n,s),j.value=!0}catch(a){console.error(a),alert("Failed to save selection.")}}function Re(s){try{const e=V.load(O.value,s)||[];p.value.clear(),e.forEach(n=>p.value.add(n)),$.value++,j.value=!1}catch(e){console.error(e),alert("Failed to load selection.")}}function Be(s){try{V.delete(O.value,s)}catch(e){console.error(e),alert("Failed to delete selection.")}}const ze=q(()=>R.value||B.value||z.value||j.value);function Te(){R.value=!1,B.value=!1,z.value=!1,j.value=!1}async function Oe(){if(!D.value){if(!P.value)throw new Error("Choose a custom deck.");return P.value}const s=W.value.trim();if(!s)throw new Error("Enter a title for the new custom deck.");const{data:e,error:n}=await N.auth.getUser();if(n||!e?.user?.id)throw new Error("Not authenticated");const{data:a,error:r}=await N.from("custom_decks").insert({owner_user_id:e.user.id,title:s,visibility:"private"}).select("id, title, card_count").single();if(r)throw r;return Y.value.unshift(a),P.value=a.id,D.value=!1,W.value="",a.id}async function Le(){J.value=!0,F.value=null;try{const s=await Oe(),e=Array.from(p.value);if(e.length===0)throw new Error("Select at least one card to add.");const{data:n,error:a}=await N.from("custom_deck_cards").select("position").eq("deck_id",s).order("position",{ascending:!1}).limit(1);if(a)throw a;let r=(n?.[0]?.position??0)||0;const d=e.map(S=>(r+=1e3,{deck_id:s,flashcard_id:S,position:r})),{error:v}=await N.from("custom_deck_cards").upsert(d,{onConflict:"deck_id,flashcard_id"});if(v)throw v;ee(),alert(`Added ${e.length} card(s) to your custom deck.`)}catch(s){F.value=s?.message??"Failed to add cards."}finally{J.value=!1}}return(s,e)=>(i(),o("section",ht,[ze.value?(i(),o("div",{key:0,class:"frosted-overlay",role:"presentation","aria-hidden":"true",onClick:Te})):l("",!0),t("div",wt,[t("button",{class:"icon-btn back-btn",type:"button",onClick:Me,"aria-label":"Back",title:"Back"},[t("img",{class:"icon",src:ke(it),alt:""},null,8,_t)]),t("h1",St,b(_.value||O.value),1),t("button",{class:"add-to-custom-btn",type:"button","data-open-add":"",onClick:e[0]||(e[0]=n=>Ae()),"aria-label":"Add to custom deck",title:"Add to Custom Deck"},[...e[30]||(e[30]=[t("span",{class:"icon"},"+",-1),t("span",{class:"label"},"Add to Custom Deck",-1)])])]),t("div",Ct,[t("div",Et,[t("button",{"data-open-review":"",type:"button",onClick:e[1]||(e[1]=n=>xe())},"Review Mode"),t("button",{"data-open-game":"",type:"button",onClick:e[2]||(e[2]=n=>Ie())},"Games")]),t("div",Nt,[t("button",{id:"toggle-bonus-btn",type:"button",onClick:e[3]||(e[3]=n=>Ge())},"Deselect Bonus Words"),t("button",{id:"toggle-all-btn",type:"button",onClick:e[4]||(e[4]=n=>je())},b(de.value?"Deselect All":"Select All"),1)]),t("div",Mt,[t("button",{type:"button",onClick:e[5]||(e[5]=n=>$e())},"Save Selection"),t("button",{id:"load-selection-btn",type:"button",onClick:e[6]||(e[6]=n=>j.value=!0),disabled:!K.value.length}," Load Selection ",8,xt)])]),R.value?(i(),o("div",{key:1,id:"review-menu",class:"popup",role:"dialog","aria-modal":"true","aria-hidden":!R.value},[e[31]||(e[31]=t("h3",null,"Select a Review Mode",-1)),t("button",{class:"normal-review-btn",type:"button",onClick:e[7]||(e[7]=n=>te("review"))},"Regular Order"),t("button",{class:"random-btn",type:"button",onClick:e[8]||(e[8]=n=>te("random"))},"Random Order"),t("button",{class:"japanese-mode-btn",type:"button",onClick:e[9]||(e[9]=n=>te("japanese"))},"Japanese Mode (Random)"),t("button",{class:"cancel-btn",type:"button",onClick:e[10]||(e[10]=n=>Q())},"Cancel")],8,It)):l("",!0),B.value?(i(),o("div",{key:2,id:"game-menu",class:"game-popup",role:"dialog","aria-modal":"true","aria-hidden":!B.value},[e[59]||(e[59]=t("h3",null,"Select a Game Mode",-1)),t("div",Dt,[t("button",{class:"game-btn bomb-game-btn",type:"button",onClick:e[11]||(e[11]=n=>G("bomb"))},[t("div",jt,[I("bomb")?(i(),o("div",Gt,[...e[32]||(e[32]=[t("span",null,"NEW",-1)])])):l("",!0),A("bomb")?(i(),o("div",$t,[...e[33]||(e[33]=[t("span",null,"XP",-1)])])):l("",!0)]),e[34]||(e[34]=t("p",{class:"game-popup-text"},"Bomb Game",-1)),t("img",{class:"game-icon",src:M("bomb"),alt:"Bomb Game",loading:"eager",decoding:"async",fetchpriority:"high",onError:x},null,40,Rt)]),t("button",{class:"game-btn sharknado-game-btn",type:"button",onClick:e[12]||(e[12]=n=>G("sharknado"))},[t("div",Bt,[I("sharknado")?(i(),o("div",zt,[...e[35]||(e[35]=[t("span",null,"NEW",-1)])])):l("",!0),A("sharknado")?(i(),o("div",Tt,[...e[36]||(e[36]=[t("span",null,"XP",-1)])])):l("",!0)]),e[37]||(e[37]=t("p",{class:"game-popup-text"},"Sharknado!",-1)),t("img",{class:"game-icon",src:M("sharknado"),alt:"Sharknado",loading:"eager",decoding:"async",fetchpriority:"high",onError:x},null,40,Ot)]),t("button",{class:"game-btn headsup-game-btn",type:"button",onClick:e[13]||(e[13]=n=>G("headsup"))},[t("div",Lt,[I("headsup")?(i(),o("div",Pt,[...e[38]||(e[38]=[t("span",null,"NEW",-1)])])):l("",!0),A("headsup")?(i(),o("div",Ft,[...e[39]||(e[39]=[t("span",null,"XP",-1)])])):l("",!0)]),e[40]||(e[40]=t("p",{class:"game-popup-text"},"Heads Up",-1)),t("img",{class:"game-icon",src:M("headsup"),alt:"Heads Up",loading:"eager",decoding:"async",fetchpriority:"high",onError:x},null,40,Wt)]),t("button",{class:"game-btn spelling-blitz-btn",type:"button",onClick:e[14]||(e[14]=n=>G("spellingblitz"))},[t("div",Jt,[I("spellingblitz")?(i(),o("div",Ut,[...e[41]||(e[41]=[t("span",null,"NEW",-1)])])):l("",!0),A("spellingblitz")?(i(),o("div",qt,[...e[42]||(e[42]=[t("span",null,"XP",-1)])])):l("",!0)]),e[43]||(e[43]=t("p",{class:"game-popup-text"},"Spelling Blitz",-1)),t("img",{class:"game-icon",src:M("spellingblitz"),alt:"Spelling Blitz",loading:"eager",decoding:"async",fetchpriority:"high",onError:x},null,40,Vt)]),t("button",{class:"game-btn spelling-guesser-btn",type:"button",onClick:e[15]||(e[15]=n=>G("spellingguesser"))},[t("div",Xt,[I("spellingguesser")?(i(),o("div",Ht,[...e[44]||(e[44]=[t("span",null,"NEW",-1)])])):l("",!0),A("spellingguesser")?(i(),o("div",Yt,[...e[45]||(e[45]=[t("span",null,"XP",-1)])])):l("",!0)]),e[46]||(e[46]=t("p",{class:"game-popup-text"},"Spelling Guesser",-1)),t("img",{class:"game-icon",src:M("spellingguesser"),alt:"Spelling Guesser",loading:"eager",decoding:"async",fetchpriority:"high",onError:x},null,40,Kt)]),t("button",{class:"game-btn sound-matcher-btn",type:"button",onClick:e[16]||(e[16]=n=>G("soundmatcher"))},[t("div",Qt,[I("soundmatcher")?(i(),o("div",Zt,[...e[47]||(e[47]=[t("span",null,"NEW",-1)])])):l("",!0),A("soundmatcher")?(i(),o("div",es,[...e[48]||(e[48]=[t("span",null,"XP",-1)])])):l("",!0)]),e[49]||(e[49]=t("p",{class:"game-popup-text"},"Sound Matcher",-1)),t("img",{class:"game-icon",src:M("soundmatcher"),alt:"Sound Matcher",loading:"eager",decoding:"async",fetchpriority:"high",onError:x},null,40,ts)]),t("button",{class:"game-btn bingo-btn",type:"button",onClick:e[17]||(e[17]=n=>G("bingo"))},[t("div",ss,[I("bingo")?(i(),o("div",as,[...e[50]||(e[50]=[t("span",null,"NEW",-1)])])):l("",!0),A("bingo")?(i(),o("div",ns,[...e[51]||(e[51]=[t("span",null,"XP",-1)])])):l("",!0)]),e[52]||(e[52]=t("p",{class:"game-popup-text"},"Bingo",-1)),t("img",{class:"game-icon",src:M("bingo"),alt:"Bingo",loading:"eager",decoding:"async",fetchpriority:"high",onError:x},null,40,os)]),t("button",{class:"game-btn memory-btn",type:"button",onClick:e[18]||(e[18]=n=>G("memory"))},[t("div",is,[I("memory")?(i(),o("div",ls,[...e[53]||(e[53]=[t("span",null,"NEW",-1)])])):l("",!0),A("memory")?(i(),o("div",rs,[...e[54]||(e[54]=[t("span",null,"XP",-1)])])):l("",!0)]),e[55]||(e[55]=t("p",{class:"game-popup-text"},"Memory Game",-1)),t("img",{class:"game-icon",src:M("memory"),alt:"Memory",loading:"eager",decoding:"async",fetchpriority:"high",onError:x},null,40,ds)]),t("button",{class:"game-btn missing-btn",type:"button",onClick:e[19]||(e[19]=n=>G("missing"))},[t("div",us,[I("missing")?(i(),o("div",cs,[...e[56]||(e[56]=[t("span",null,"NEW",-1)])])):l("",!0),A("missing")?(i(),o("div",ps,[...e[57]||(e[57]=[t("span",null,"XP",-1)])])):l("",!0)]),e[58]||(e[58]=t("p",{class:"game-popup-text"},"What's Missing?",-1)),t("img",{class:"game-icon",src:M("missing"),alt:"Missing Game",loading:"eager",decoding:"async",fetchpriority:"high",onError:x},null,40,ms)])]),t("button",{class:"cancel-btn",type:"button",onClick:e[20]||(e[20]=n=>Z())},"Cancel")],8,At)):l("",!0),z.value?(i(),o("div",{key:3,id:"add-menu",class:"popup add-popup",role:"dialog","aria-modal":"true","aria-hidden":!z.value},[e[63]||(e[63]=t("h3",{style:{"margin-top":"0"}},"Add to Custom Deck",-1)),t("div",vs,[t("label",fs,[t("input",{type:"radio",name:"add-target",checked:!D.value,onChange:e[21]||(e[21]=n=>D.value=!1)},null,40,ys),e[60]||(e[60]=t("span",null,"Select existing deck",-1))]),be(t("select",{class:"deck-select",disabled:D.value,"onUpdate:modelValue":e[22]||(e[22]=n=>P.value=n)},[e[61]||(e[61]=t("option",{value:"",disabled:""},"Select a deck…",-1)),(i(!0),o(se,null,ae(Y.value,n=>(i(),o("option",{key:n.id,value:n.id},b(n.title)+" ("+b(n.card_count)+") ",9,bs))),128))],8,ks),[[He,P.value]])]),t("div",hs,[t("label",ws,[t("input",{type:"radio",name:"add-target",checked:D.value,onChange:e[23]||(e[23]=n=>D.value=!0)},null,40,_s),e[62]||(e[62]=t("span",null,"Create a new custom deck",-1))]),be(t("input",{class:"deck-input",type:"text",disabled:!D.value,"onUpdate:modelValue":e[24]||(e[24]=n=>W.value=n),maxlength:"120",placeholder:"New deck title"},null,8,Ss),[[Ye,W.value,void 0,{trim:!0}]])]),F.value?(i(),o("p",Cs,b(F.value),1)):l("",!0),t("div",Es,[t("button",{class:"cancel-btn",type:"button",onClick:e[25]||(e[25]=n=>ee()),disabled:J.value},"Cancel",8,Ns),t("button",{class:"confirm-btn",type:"button",onClick:e[26]||(e[26]=n=>Le()),disabled:J.value},b(J.value?"Adding…":"Add"),9,Ms)]),t("p",xs,b(p.value.size)+" card(s) selected ",1)],8,gs)):l("",!0),j.value?(i(),o("div",Is,[e[64]||(e[64]=t("h3",{style:{"margin-top":"0"}},"Load a Saved Selection",-1)),K.value.length?(i(),o("div",As,[(i(!0),o(se,null,ae(K.value,n=>(i(),o("div",{class:"saved-row",key:n},[t("div",Ds,b(n),1),t("div",js,[t("button",{type:"button",onClick:a=>Re(n)},"Load",8,Gs),t("button",{type:"button",class:"danger",onClick:a=>Be(n)},"Delete",8,$s)])]))),128))])):(i(),o("p",Rs,"No saved selections yet.")),t("div",Bs,[t("button",{class:"cancel-btn",type:"button",onClick:e[27]||(e[27]=n=>j.value=!1)},"Close")])])):l("",!0),t("h2",zs,[e[65]||(e[65]=Ke("Cards in this Deck: ",-1)),t("span",Ts,b(Ce.value),1)]),Ve(ke(c),{class:"deck-scroller",items:Ee.value,"item-size":Xs,"key-field":"key"},{default:Qe(({item:n})=>[t("div",{class:"row-grid",style:at({gridTemplateColumns:`repeat(${U.value}, 1fr)`})},[(i(!0),o(se,null,ae(n.items,(a,r,d,v)=>{const S=[$.value,p.value.has(a.id)];if(v&&v.key===a.id&&tt(v,S))return v;const h=(i(),o("div",{key:a.id,class:st(["deck-card",{selected:p.value.has(a.id)}]),onClick:T=>De(a.id)},[t("div",Os,[t("img",{src:ge(a),alt:a.english,class:"deck-card-img",loading:"lazy",decoding:"async",referrerpolicy:"no-referrer",draggable:"false"},null,8,Ls),t("div",Ps,[a.japanese?.furigana?(i(),o("p",Fs,b(a.japanese.furigana),1)):l("",!0),a.japanese?.kanji?(i(),o("p",Ws,b(a.japanese.kanji),1)):l("",!0),t("p",Js,b(a.english),1)])])],10,["onClick"]));return h.memo=S,h},e,28),128))],4)]),_:1},8,["items"]),L.value?(i(),o("p",Us,b(L.value),1)):l("",!0)]))}}),Qs=ot(Hs,[["__scopeId","data-v-f2a40c46"]]);export{Qs as default};
