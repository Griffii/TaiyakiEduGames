import{i as Se,S as je,r as s,c as w,j as Ee,J as Ie,w as W,a as i,d as n,x as ae,h as k,p as j,t as u,f as ne,X as te,g as Re,u as He,b as r,_ as Ce}from"./index-3MvJemfc.js";const Ye={class:"headsup-page"},Ne=["src"],Ue=["aria-expanded"],Te=["src"],De={class:"topbar"},Me={class:"timer","aria-live":"polite"},Ge=["aria-label"],Je={class:"card-content"},Pe={key:0,class:"image-container"},We=["src","alt"],ze={key:1,class:"japanese-container"},Be={class:"jp-stack"},xe={key:0,class:"jp-furi"},Oe={key:1,class:"jp-kanji"},Le={key:2,class:"jp-fallback"},Ze={key:0,class:"english-container"},Xe={class:"english"},Ve={class:"settings-backdrop"},Fe=["aria-hidden"],Qe={key:0,class:"settings-backdrop","aria-hidden":"true"},qe={class:"final-score"},Ke=["src"],_e=["src"],$e=["src"],Y="headsup.",ea=Se({__name:"HeadsUp",props:{cards:{},durationSeconds:{default:60}},setup(se){const oe=He(),le=je(),c={showImage:Y+"showImage",showEnglish:Y+"showEnglish",showJapanese:Y+"showJapanese",pool:Y+"lastPool"},g=se,l=s(!1),z=s(null),B=s(null),m=s(J(c.showImage,!0)),f=s(J(c.showEnglish,!0)),d=s(J(c.showJapanese,!0)),h=s([]),E=s([]),o=s(null),N=s(0),U=s(g.durationSeconds),y=s(null),v=s(null),A=s(g.durationSeconds*1e3),p=s(!1),ie=new URL("/TaiyakiEduGames/assets/stop_waitaminute-C7jWNK1b.mp3",import.meta.url).toString(),ue=new URL("/TaiyakiEduGames/assets/chukichi-DatWPktF.mp3",import.meta.url).toString(),re=new URL("/TaiyakiEduGames/assets/shokichi-CwJs826m.mp3",import.meta.url).toString(),x=s(null),O=s(null),L=s(null),ce=new URL("data:image/png;base64,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",import.meta.url).toString(),de=new URL("/TaiyakiEduGames/assets/settings-icon-yUop-EjA.png",import.meta.url).toString(),T=w(()=>g.cards?.length?g.cards:le.cards),I=w(()=>o.value?.english??""),ve=w(()=>o.value?.image_url??""),R=w(()=>{const e=o.value||{};return typeof e.kanji=="string"?e.kanji:e.japanese&&typeof e.japanese=="object"&&typeof e.japanese.kanji=="string"?e.japanese.kanji:typeof e.japanese=="string"?e.japanese:""}),D=w(()=>{const e=o.value||{};return typeof e.furigana=="string"?e.furigana:e.japanese&&typeof e.japanese=="object"&&typeof e.japanese.furigana=="string"?e.japanese.furigana:typeof e.kana=="string"?e.kana:""}),H=w(()=>{const e=o.value||{};return typeof e.japanese=="string"?e.japanese:""}),pe=w(()=>{const e=[];if(d.value){const a=[D.value,R.value].filter(Boolean).join(" / ");a?e.push(a):H.value&&e.push(H.value)}return f.value&&I.value&&e.push(I.value),e.join(" â€” ")}),b=new Set;function Z(){S(),A.value=g.durationSeconds*1e3,v.value=Date.now()+A.value,C(),y.value=window.setInterval(C,200)}function C(){if(!v.value)return;const e=Math.max(0,v.value-Date.now());A.value=e,U.value=Math.ceil(e/1e3),e<=0&&(S(),fe())}function S(){y.value!=null&&(clearInterval(y.value),y.value=null)}function M(e){b.has(e)||(b.add(e),v.value&&(A.value=Math.max(0,v.value-Date.now()),v.value=null),S())}function G(e){b.delete(e),!(b.size>0||p.value)&&(A.value<=0||v.value||(v.value=Date.now()+A.value,C(),y.value=window.setInterval(C,200)))}Ee(()=>{V(),Z(),window.addEventListener("pointerdown",K,!0),window.addEventListener("keydown",_),document.addEventListener("visibilitychange",X)}),Ie(()=>{S(),window.removeEventListener("pointerdown",K,!0),window.removeEventListener("keydown",_),document.removeEventListener("visibilitychange",X)}),W([m,f,d],ke,{deep:!0}),W(l,e=>{e?M("settings"):G("settings")}),W(p,e=>{e?M("modal"):G("modal")});function X(){document.hidden?M("hidden"):G("hidden")}function V(){const e=(T.value&&T.value.length?T.value:be())??[];e.length?(h.value=$(e.slice()),E.value=[],o.value=h.value.shift()??null,ye(e)):(h.value=[],o.value=null),N.value=0,U.value=g.durationSeconds,A.value=g.durationSeconds*1e3,p.value=!1,b.clear()}function ge(){o.value&&(N.value+=1,O.value?.play().catch(()=>{}),E.value.push(o.value),F())}function me(){o.value&&(L.value?.play().catch(()=>{}),h.value.push(o.value),F())}function F(){o.value=h.value.shift()??null,!o.value&&E.value.length&&(h.value=$(E.value.splice(0)),o.value=h.value.shift()??null)}function fe(){x.value?.play().catch(()=>{}),p.value=!0}function Q(){V(),Z(),l.value=!1}function he(){S(),p.value=!0}function Ae(){q()}function q(){try{oe.back()}catch{}}function we(){l.value=!l.value}function K(e){if(!l.value)return;const a=e.target;B.value?.contains(a)||z.value?.contains(a)||(l.value=!1)}function _(e){e.key==="Escape"&&l.value&&(l.value=!1)}function ke(){P(c.showImage,m.value),P(c.showEnglish,f.value),P(c.showJapanese,d.value)}function ye(e){try{const a=e.map(t=>({id:t.id,english:t.english,image_url:t.image_url,kanji:t.kanji,furigana:t.furigana,japanese:t.japanese,kana:t.kana}));sessionStorage.setItem(c.pool,JSON.stringify(a))}catch{}}function be(){try{const e=sessionStorage.getItem(c.pool);return e?JSON.parse(e):null}catch{return null}}function J(e,a){const t=localStorage.getItem(e);return t==null?a:t==="true"}function P(e,a){localStorage.setItem(e,String(a))}function $(e){const a=[...e];for(let t=a.length-1;t>0;t--){const ee=Math.floor(Math.random()*(t+1));[a[t],a[ee]]=[a[ee],a[t]]}return a}return(e,a)=>(r(),i("section",Ye,[n("button",{class:"home-button",type:"button",onClick:q,"aria-label":"Back"},[n("img",{src:j(ce),alt:""},null,8,Ne)]),n("button",{class:"settings-button",type:"button",onClick:we,"aria-haspopup":"dialog","aria-expanded":l.value,"aria-controls":"settings-menu",ref_key:"settingsBtnRef",ref:z},[n("img",{src:j(de),alt:""},null,8,Te)],8,Ue),n("div",De,[n("div",Me,u(U.value),1)]),n("div",{class:ne(["flashcard-container",{"image-hidden":!m.value,"japanese-hidden":!d.value}]),role:"group","aria-label":pe.value},[n("div",Je,[m.value?(r(),i("div",Pe,[n("img",{src:ve.value,alt:I.value||"Card image"},null,8,We)])):k("",!0),d.value?(r(),i("div",ze,[n("div",Be,[D.value?(r(),i("div",xe,u(D.value),1)):k("",!0),R.value?(r(),i("div",Oe,u(R.value),1)):!R.value&&H.value?(r(),i("div",Le,u(H.value),1)):k("",!0)])])):k("",!0)]),f.value?(r(),i("div",Ze,[n("div",Xe,u(I.value),1)])):k("",!0)],10,Ge),n("div",{class:"buttons-container"},[n("button",{class:"pass-btn",type:"button",onClick:me},"Pass"),n("button",{class:"get-btn",type:"button",onClick:ge},"Get")]),ae(n("div",Ve,null,512),[[te,l.value]]),ae(n("div",{id:"settings-menu",class:"settings-menu",role:"dialog","aria-modal":!1,"aria-hidden":!l.value,onClick:a[3]||(a[3]=Re(()=>{},["stop"])),ref_key:"settingsMenuRef",ref:B},[a[4]||(a[4]=n("h3",null,"Settings",-1)),n("button",{class:"toggle-btn",onClick:a[0]||(a[0]=t=>m.value=!m.value)},u(m.value?"Hide Image":"Show Image"),1),n("button",{id:"toggle-japanese-btn",class:"toggle-btn",onClick:a[1]||(a[1]=t=>d.value=!d.value)},u(d.value?"Hide Japanese":"Show Japanese"),1),n("button",{id:"toggle-english-btn",class:"toggle-btn",onClick:a[2]||(a[2]=t=>f.value=!f.value)},u(f.value?"Hide English":"Show English"),1),n("button",{class:"restart-btn",onClick:Q},"Restart Game"),n("button",{class:"end-game-btn",onClick:he},"End Game")],8,Fe),[[te,l.value]]),p.value?(r(),i("div",Qe)):k("",!0),p.value?(r(),i("div",{key:1,class:ne(["score-screen",{show:p.value}])},[a[5]||(a[5]=n("h1",null,"Game Over!",-1)),a[6]||(a[6]=n("p",{class:"your-score-label"},"Your Score:",-1)),n("div",qe,u(N.value),1),n("div",{class:"score-actions"},[n("button",{class:"play-again",onClick:Q},"Play Again"),n("button",{class:"back-deck",onClick:Ae},"Back to Deck")])],2)):k("",!0),n("audio",{ref_key:"timeUpRef",ref:x,src:j(ie)},null,8,Ke),n("audio",{ref_key:"correctRef",ref:O,src:j(ue)},null,8,_e),n("audio",{ref_key:"passRef",ref:L,src:j(re)},null,8,$e)]))}}),na=Ce(ea,[["__scopeId","data-v-3b782e28"]]);export{na as default};
