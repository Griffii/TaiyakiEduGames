import{i as oe,r as u,c as y,j as ae,o as ie,a as m,d as l,h as ue,u as re,x as L,B as U,t as k,g as C,F as x,e as V,n as _,b as w,O as z,f as D,_ as de}from"./index-DSm9wnlA.js";import{b as pe}from"./back-icon-xKqy7r3s.js";import{s as ve}from"./settings-icon-DNAQU5t-.js";import{h as ce,w as fe}from"./shokichi-CrdggLxn.js";const ge="/assets/kyo-B7Jx3MGi.mp3",me="/assets/daikyo-CY7yqnN5.mp3",we="/assets/daikichi-C_c_FTXQ.mp3",be=["aria-expanded"],ye={class:"menu-row"},Se={class:"menu-row"},ke={class:"menu-row"},Ce={class:"mute-row"},xe=["aria-pressed"],he={class:"label-cell row"},Ae=["onClick","onKeydown"],Me={class:"face back"},F=4,S=6,$e=.35,T="random-points-settings",Ne=150,Be=110,Pe=oe({__name:"RandomPoints",setup(Le){const h=F*S,H=["A","B","C","D","E","F"],O=re(),j=()=>O.back(),d=u(!1),p=u(!0),i=u(!1),v=u(!0),r=u(!1),A=u(Array.from({length:h},(e,t)=>({id:t,value:0,display:"",revealed:!1}))),I=u(typeof window<"u"?window.innerHeight:800),M=u(typeof window<"u"?window.innerWidth:1280),K=y(()=>{const e=M.value;return e<=360?22:e<=420?24:e<=520?26:e<=680?28:30}),X=y(()=>{const e=M.value;return e<=360?6:e<=420?7:e<=520?8:e<=680?9:10}),J=y(()=>({"--labelW":`${K.value}px`,"--gap":`${X.value}px`})),Y=y(()=>({height:`${Math.max(320,I.value-Ne-Be)}px`,gridTemplateColumns:`var(--labelW) repeat(${S}, 1fr)`,gridTemplateRows:`repeat(${F}, 1fr)`,gap:"var(--gap)"})),q=y(()=>({gridTemplateColumns:`var(--labelW) repeat(${S}, 1fr)`,gap:"var(--gap)"})),G=(e,t)=>(e-1)*S+(t-1),c=(e,t)=>A.value[G(e,t)];function Q(e){return typeof e=="number"?e>0?"val-pos":e<0?"val-neg":"val-zero":e==="Lose All"?"val-lose val-text":"val-swap val-text"}function $(e,t){return Math.floor(Math.random()*(t-e+1))+e}const f={positive:new Audio(fe),negative:new Audio(ge),swap:new Audio(ce),loseAll:new Audio(me),fifty:new Audio(we)};function E(){const e=r.value?0:$e;f.positive.volume=e,f.negative.volume=e,f.swap.volume=e,f.loseAll.volume=e,f.fifty.volume=e}function b(e){const t=f[e];try{t.currentTime=0,t.play()}catch{}}function Z(){r.value=!r.value,E(),R()}function ee(){const e=[],t=i.value?100:50;e.push(t),v.value&&p.value&&e.push("Lose All");const n=v.value?$(1,5):0;for(let o=0;o<n;o++){const a=Math.random();a<.45?e.push("Swap Up"):a<.9?e.push("Swap Down"):e.push("Swap Choice")}const s=h-e.length;let g=s,W=0;p.value&&(g=Math.floor(s*.6),W=s-g);for(let o=0;o<g;o++){const a=5*$(1,5);e.push(i.value?a*2:a)}for(let o=0;o<W;o++){const a=-5*$(1,5);e.push(i.value?a*2:a)}for(let o=e.length-1;o>0;o--){const a=Math.floor(Math.random()*(o+1));[e[o],e[a]]=[e[a],e[o]]}return e}function N(){const e=ee();for(let t=0;t<h;t++){const n=e[t],s=A.value[t];s.value=n,s.display=typeof n=="number"?String(n):n,s.revealed=!1}}function B(e){if(!(!e||e.revealed)){if(typeof e.value=="string")e.value==="Lose All"?b("loseAll"):b("swap");else{const t=i.value?100:50;e.value===t?b("fifty"):e.value>0?b("positive"):b("negative")}e.revealed=!0}}function te(){for(const e of A.value)e.revealed=!0}function le(){N()}function ne(){d.value=!d.value}function R(){localStorage.setItem(T,JSON.stringify({allowNegatives:p.value,doublePoints:i.value,allowSpecial:v.value,sfxMuted:r.value}))}function se(){R(),N(),d.value=!1}function P(){I.value=window.innerHeight,M.value=window.innerWidth}return ae(()=>{try{const e=localStorage.getItem(T);if(e){const t=JSON.parse(e);typeof t.allowNegatives=="boolean"&&(p.value=t.allowNegatives),typeof t.doublePoints=="boolean"&&(i.value=t.doublePoints),typeof t.allowSpecial=="boolean"&&(v.value=t.allowSpecial),typeof t.sfxMuted=="boolean"&&(r.value=t.sfxMuted)}}catch{}E(),N(),P(),window.addEventListener("resize",P,{passive:!0})}),ie(()=>{window.removeEventListener("resize",P)}),(e,t)=>(w(),m("section",{class:"random-points-page app-bg",style:_(J.value)},[l("button",{class:"icon-btn back",type:"button",onClick:j,"aria-label":"Back",title:"Back"},[...t[5]||(t[5]=[l("img",{class:"icon",src:pe,alt:""},null,-1)])]),l("button",{class:"icon-btn settings",type:"button",onClick:ne,"aria-haspopup":"dialog","aria-expanded":d.value,"aria-controls":"settings-menu","aria-label":"Open settings",title:"Settings"},[...t[6]||(t[6]=[l("img",{class:"icon",src:ve,alt:""},null,-1)])],8,be),d.value?(w(),m("div",{key:0,class:"settings-overlay",role:"presentation",onClick:t[4]||(t[4]=n=>d.value=!1)},[l("div",{id:"settings-menu",class:"settings-menu",role:"dialog","aria-modal":"true",onClick:t[3]||(t[3]=C(()=>{},["stop"]))},[t[10]||(t[10]=l("h3",{class:"menu-title"},"Settings",-1)),l("label",ye,[L(l("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=n=>p.value=n)},null,512),[[U,p.value]]),t[7]||(t[7]=l("span",null,"Negative Numbers",-1))]),l("label",Se,[L(l("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=n=>i.value=n)},null,512),[[U,i.value]]),t[8]||(t[8]=l("span",null,"Double Points",-1))]),l("label",ke,[L(l("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=n=>v.value=n)},null,512),[[U,v.value]]),t[9]||(t[9]=l("span",null,"Special Cards (Swap Up/Down/Choice)",-1))]),l("div",Ce,[l("button",{class:"mute-btn","aria-pressed":r.value,onClick:Z},k(r.value?"Unmute SFX":"Mute SFX"),9,xe)]),l("button",{class:"apply",onClick:se},"Apply")])])):ue("",!0),t[13]||(t[13]=l("h1",{class:"title"},"Random Points",-1)),l("div",{class:"labels",style:_(q.value)},[t[11]||(t[11]=l("div",null,null,-1)),(w(),m(x,null,V(H,n=>l("div",{key:n,class:"label-cell"},k(n),1)),64))],4),l("div",{class:"grid",style:_(Y.value)},[(w(),m(x,null,V(F,n=>(w(),m(x,{key:`r-${n}`},[l("div",he,k(n),1),(w(),m(x,null,V(S,s=>l("div",{key:`c-${n}-${s}`,class:"grid-item"},[l("div",{class:"card",role:"button",tabindex:"0",onClick:C(g=>B(c(n,s)),["stop"]),onKeydown:[z(C(g=>B(c(n,s)),["prevent"]),["enter"]),z(C(g=>B(c(n,s)),["prevent"]),["space"])]},[l("div",{class:D(["flip-inner",{revealed:c(n,s).revealed}])},[t[12]||(t[12]=l("div",{class:"face front"},null,-1)),l("div",Me,[l("span",{class:D(["value",Q(c(n,s).value)])},k(c(n,s).display),3)])],2)],40,Ae)])),64))],64))),64))],4),l("div",{class:"controls"},[l("button",{class:"big-btn",onClick:le},"Reset"),l("button",{class:"big-btn",onClick:te},"See All")])],4))}}),Ie=de(Pe,[["__scopeId","data-v-46a60bcd"]]);export{Ie as default};
