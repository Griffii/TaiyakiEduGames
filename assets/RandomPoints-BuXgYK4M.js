import{i as oe,r as u,c as y,j as ae,o as ie,a as g,d as l,h as ue,u as re,x as E,B as L,t as S,g as C,F as x,e as T,n as U,b as w,O as W,f as z,_ as de}from"./index-CzXY4mDr.js";import{b as pe}from"./back-icon-xKqy7r3s.js";import{s as ve}from"./settings-icon-DJLQOoae.js";import{h as ce,w as fe}from"./shokichi-KW1WytDh.js";const me="/TaiyakiEduGames/assets/kyo-B7Jx3MGi.mp3",ge="/TaiyakiEduGames/assets/daikyo-CY7yqnN5.mp3",we="/TaiyakiEduGames/assets/daikichi-C_c_FTXQ.mp3",be=["aria-expanded"],ye={class:"menu-row"},ke={class:"menu-row"},Se={class:"menu-row"},Ce={class:"mute-row"},xe=["aria-pressed"],he={class:"label-cell row"},Ae=["onClick","onKeydown"],Me={class:"face back"},V=4,k=6,$e=.35,D="random-points-settings",Ne=150,Be=110,Pe=oe({__name:"RandomPoints",setup(Ee){const h=V*k,H=["A","B","C","D","E","F"],O=re(),j=()=>O.back(),d=u(!1),p=u(!0),i=u(!1),v=u(!0),r=u(!1),A=u(Array.from({length:h},(e,t)=>({id:t,value:0,display:"",revealed:!1}))),_=u(typeof window<"u"?window.innerHeight:800),M=u(typeof window<"u"?window.innerWidth:1280),G=y(()=>{const e=M.value;return e<=360?22:e<=420?24:e<=520?26:e<=680?28:30}),K=y(()=>{const e=M.value;return e<=360?6:e<=420?7:e<=520?8:e<=680?9:10}),X=y(()=>({"--labelW":`${G.value}px`,"--gap":`${K.value}px`})),J=y(()=>({height:`${Math.max(320,_.value-Ne-Be)}px`,gridTemplateColumns:`var(--labelW) repeat(${k}, 1fr)`,gridTemplateRows:`repeat(${V}, 1fr)`,gap:"var(--gap)"})),Y=y(()=>({gridTemplateColumns:`var(--labelW) repeat(${k}, 1fr)`,gap:"var(--gap)"})),q=(e,t)=>(e-1)*k+(t-1),c=(e,t)=>A.value[q(e,t)];function Q(e){return typeof e=="number"?e>0?"val-pos":e<0?"val-neg":"val-zero":e==="Lose All"?"val-lose val-text":"val-swap val-text"}function $(e,t){return Math.floor(Math.random()*(t-e+1))+e}const f={positive:new Audio(fe),negative:new Audio(me),swap:new Audio(ce),loseAll:new Audio(ge),fifty:new Audio(we)};function F(){const e=r.value?0:$e;f.positive.volume=e,f.negative.volume=e,f.swap.volume=e,f.loseAll.volume=e,f.fifty.volume=e}function b(e){const t=f[e];try{t.currentTime=0,t.play()}catch{}}function Z(){r.value=!r.value,F(),I()}function ee(){const e=[],t=i.value?100:50;e.push(t),v.value&&p.value&&e.push("Lose All");const s=v.value?$(1,5):0;for(let o=0;o<s;o++){const a=Math.random();a<.45?e.push("Swap Up"):a<.9?e.push("Swap Down"):e.push("Swap Choice")}const n=h-e.length;let m=n,R=0;p.value&&(m=Math.floor(n*.6),R=n-m);for(let o=0;o<m;o++){const a=5*$(1,5);e.push(i.value?a*2:a)}for(let o=0;o<R;o++){const a=-5*$(1,5);e.push(i.value?a*2:a)}for(let o=e.length-1;o>0;o--){const a=Math.floor(Math.random()*(o+1));[e[o],e[a]]=[e[a],e[o]]}return e}function N(){const e=ee();for(let t=0;t<h;t++){const s=e[t],n=A.value[t];n.value=s,n.display=typeof s=="number"?String(s):s,n.revealed=!1}}function B(e){if(!(!e||e.revealed)){if(typeof e.value=="string")e.value==="Lose All"?b("loseAll"):b("swap");else{const t=i.value?100:50;e.value===t?b("fifty"):e.value>0?b("positive"):b("negative")}e.revealed=!0}}function te(){for(const e of A.value)e.revealed=!0}function le(){N()}function se(){d.value=!d.value}function I(){localStorage.setItem(D,JSON.stringify({allowNegatives:p.value,doublePoints:i.value,allowSpecial:v.value,sfxMuted:r.value}))}function ne(){I(),N(),d.value=!1}function P(){_.value=window.innerHeight,M.value=window.innerWidth}return ae(()=>{try{const e=localStorage.getItem(D);if(e){const t=JSON.parse(e);typeof t.allowNegatives=="boolean"&&(p.value=t.allowNegatives),typeof t.doublePoints=="boolean"&&(i.value=t.doublePoints),typeof t.allowSpecial=="boolean"&&(v.value=t.allowSpecial),typeof t.sfxMuted=="boolean"&&(r.value=t.sfxMuted)}}catch{}F(),N(),P(),window.addEventListener("resize",P,{passive:!0})}),ie(()=>{window.removeEventListener("resize",P)}),(e,t)=>(w(),g("section",{class:"random-points-page app-bg",style:U(X.value)},[l("button",{class:"icon-btn back",type:"button",onClick:j,"aria-label":"Back",title:"Back"},[...t[5]||(t[5]=[l("img",{class:"icon",src:pe,alt:""},null,-1)])]),l("button",{class:"icon-btn settings",type:"button",onClick:se,"aria-haspopup":"dialog","aria-expanded":d.value,"aria-controls":"settings-menu","aria-label":"Open settings",title:"Settings"},[...t[6]||(t[6]=[l("img",{class:"icon",src:ve,alt:""},null,-1)])],8,be),d.value?(w(),g("div",{key:0,class:"settings-overlay",role:"presentation",onClick:t[4]||(t[4]=s=>d.value=!1)},[l("div",{id:"settings-menu",class:"settings-menu",role:"dialog","aria-modal":"true",onClick:t[3]||(t[3]=C(()=>{},["stop"]))},[t[10]||(t[10]=l("h3",{class:"menu-title"},"Settings",-1)),l("label",ye,[E(l("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>p.value=s)},null,512),[[L,p.value]]),t[7]||(t[7]=l("span",null,"Negative Numbers",-1))]),l("label",ke,[E(l("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=s=>i.value=s)},null,512),[[L,i.value]]),t[8]||(t[8]=l("span",null,"Double Points",-1))]),l("label",Se,[E(l("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=s=>v.value=s)},null,512),[[L,v.value]]),t[9]||(t[9]=l("span",null,"Special Cards (Swap Up/Down/Choice)",-1))]),l("div",Ce,[l("button",{class:"mute-btn","aria-pressed":r.value,onClick:Z},S(r.value?"Unmute SFX":"Mute SFX"),9,xe)]),l("button",{class:"apply",onClick:ne},"Apply")])])):ue("",!0),t[13]||(t[13]=l("h1",{class:"title"},"Random Points",-1)),l("div",{class:"labels",style:U(Y.value)},[t[11]||(t[11]=l("div",null,null,-1)),(w(),g(x,null,T(H,s=>l("div",{key:s,class:"label-cell"},S(s),1)),64))],4),l("div",{class:"grid",style:U(J.value)},[(w(),g(x,null,T(V,s=>(w(),g(x,{key:`r-${s}`},[l("div",he,S(s),1),(w(),g(x,null,T(k,n=>l("div",{key:`c-${s}-${n}`,class:"grid-item"},[l("div",{class:"card",role:"button",tabindex:"0",onClick:C(m=>B(c(s,n)),["stop"]),onKeydown:[W(C(m=>B(c(s,n)),["prevent"]),["enter"]),W(C(m=>B(c(s,n)),["prevent"]),["space"])]},[l("div",{class:z(["flip-inner",{revealed:c(s,n).revealed}])},[t[12]||(t[12]=l("div",{class:"face front"},null,-1)),l("div",Me,[l("span",{class:z(["value",Q(c(s,n).value)])},S(c(s,n).display),3)])],2)],40,Ae)])),64))],64))),64))],4),l("div",{class:"controls"},[l("button",{class:"big-btn",onClick:le},"Reset"),l("button",{class:"big-btn",onClick:te},"See All")])],4))}}),_e=de(Pe,[["__scopeId","data-v-46a60bcd"]]);export{_e as default};
