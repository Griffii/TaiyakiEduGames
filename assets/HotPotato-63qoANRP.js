import{i as ie,r as n,c as h,j as re,o as G,w as R,a as v,d as a,p as H,h as de,G as me,E as ve,t as ce,F as P,e as W,g as pe,x as f,B as fe,y as C,D as N,n as K,u as be,L as z,b as c,_ as ye}from"./index-CzXY4mDr.js";import{b as ge}from"./back-icon-xKqy7r3s.js";import{s as he}from"./settings-icon-DJLQOoae.js";const Me="/TaiyakiEduGames/assets/the-world-of-8-bit-games-CNTIKXue.mp3",we="/TaiyakiEduGames/assets/Three%20Red%20Hearts%20-%20Out%20of%20Time-HOdImQKi.ogg",ke="/TaiyakiEduGames/assets/bomb-DWFBF2Ig.mp3",Se="/TaiyakiEduGames/assets/dun-dun-dun-sound-effect-DofVW6mp.mp3",Te="/TaiyakiEduGames/assets/Stop_Oblivion-BS8HVNqE.mp3",xe={class:"hot-potato-page app-bg"},Ee=["src"],Ve=["aria-expanded"],Be=["src"],Ce={class:"hp-card",role:"region","aria-label":"Hot Potato Sound Board"},Le={class:"hp-actions"},_e=["disabled","aria-pressed","aria-busy"],Ue={class:"hp-btn-inner"},De={key:0,class:"hp-btn-label"},Fe={key:1,class:"hp-btn-label loading"},Ae={class:"hp-timer","aria-live":"polite","aria-atomic":"true"},Ie=["src","type"],Oe=["src","type"],Ge={class:"modal"},Re={class:"modal-body"},He={class:"row toggle"},Pe={class:"switch"},We={class:"row"},Ne={class:"inline"},Ke=["disabled"],ze=["disabled"],Xe={class:"row"},qe={class:"row"},$e={class:"row"},je={class:"row"},Qe=ie({__name:"HotPotato",setup(Je){const X={"World of Games":[{url:Me,type:"audio/mpeg"}],"Out of Time":[{url:we,type:"audio/ogg"}]},q={bomb:[{url:ke,type:"audio/mpeg"}],dundun:[{url:Se,type:"audio/mpeg"}],stop:[{url:Te,type:"audio/mpeg"}]},M=n(.35),w=n(.9);function b(){o.value&&(o.value.volume=M.value),s.value&&(s.value.volume=w.value)}const L=h({get:()=>Math.round(M.value*100),set:t=>{M.value=Math.min(1,Math.max(0,t/100)),b()}}),_=h({get:()=>Math.round(w.value*100),set:t=>{w.value=Math.min(1,Math.max(0,t/100)),b()}}),$=be();function j(){$.back()}const o=n(null),s=n(null),u=n(!1),r=n(!1),k=n("World of Games"),U=n("bomb"),Q=h(()=>X[k.value]),J=h(()=>q[U.value]),S=n(null),T=n(0);let p=null;const Y=h(()=>{const t=Math.floor(T.value/1e3),e=String(Math.floor(t/60)).padStart(2,"0"),l=String(t%60).padStart(2,"0");return`${e}:${l}`});function F(t){S.value!=null&&(T.value=t-S.value,p=requestAnimationFrame(F))}function Z(){S.value=performance.now(),T.value=0,p=requestAnimationFrame(F)}function A(){p!=null&&cancelAnimationFrame(p),p=null,S.value=null,T.value=0}const g=n(!1),d=n(2),m=n(60),i=n(!1);let x=null;function ee(t,e){const l=Math.max(2,Math.min(t,e)),B=Math.min(60,Math.max(t,e)),ue=l+Math.random()*(B-l);return Math.round(ue*1e3)}function y(){x!=null&&(window.clearTimeout(x),x=null)}function E(){if(y(),!i.value||!u.value)return;const t=ee(d.value,m.value);x=window.setTimeout(async()=>{await I(),y()},t)}function ae(){i.value&&u.value?E():y()}function D(){if(d.value<5&&(d.value=2),m.value>30&&(m.value=60),d.value>m.value){const t=d.value;d.value=m.value,m.value=t}i.value&&u.value&&E()}async function te(){if(!(!o.value||!r.value)&&!u.value){s.value&&(s.value.pause(),s.value.currentTime=0),o.value.loop=!0,o.value.currentTime=0;try{await o.value.play(),u.value=!0,Z(),i.value&&E()}catch(t){console.warn("Music play blocked by browser:",t)}}}async function I(){if(o.value&&(o.value.pause(),o.value.currentTime=0),u.value=!1,s.value)try{s.value.currentTime=0,await s.value.play()}catch(t){console.warn("Bomb play blocked by browser:",t)}A(),y()}function le(){g.value=!0,document.documentElement.style.overflow="hidden"}function V(){g.value=!1,document.documentElement.style.overflow=""}function O(t){r.value=!1;const e=()=>{t.removeEventListener("loadedmetadata",l),t.removeEventListener("canplay",l),t.removeEventListener("canplaythrough",l),t.removeEventListener("error",B)},l=()=>{r.value=!0,e()},B=()=>{r.value=!1,console.warn("Music element error",t.error),e()};t.addEventListener("loadedmetadata",l),t.addEventListener("canplay",l),t.addEventListener("canplaythrough",l),t.addEventListener("error",B),t.readyState>=2&&(r.value=!0,e())}async function oe(){if(r.value=!1,!o.value)return;u.value&&(o.value.pause(),u.value=!1,A(),y());const t=o.value;await z(),t.load(),O(t),b()}async function se(){s.value&&(await z(),s.value.load(),b())}function ne(){D(),V()}return re(()=>{o.value&&O(o.value),s.value&&s.value.addEventListener("error",()=>console.warn("Bomb element error",s.value?.error));const t=e=>{e.key==="Escape"&&g.value&&V()};window.addEventListener("keydown",t),b(),G(()=>{window.removeEventListener("keydown",t)})}),G(()=>{o.value&&(o.value.pause(),o.value.currentTime=0),s.value&&(s.value.pause(),s.value.currentTime=0),p!=null&&cancelAnimationFrame(p),y(),document.documentElement.style.overflow=""}),R([i,k,d,m],()=>{i.value&&u.value&&E()}),R([M,w],b),(t,e)=>(c(),v("section",xe,[a("button",{class:"back-floating",type:"button","aria-label":"Back",title:"Back",onClick:j},[a("img",{src:H(ge),alt:""},null,8,Ee)]),a("button",{class:"settings-floating",type:"button",title:"Settings","aria-haspopup":"dialog","aria-expanded":g.value?"true":"false","aria-controls":"hp-settings",onClick:le},[a("img",{src:H(he),alt:"Settings"},null,8,Be)],8,Ve),a("div",Ce,[e[24]||(e[24]=a("header",{class:"hp-topbar"},[a("h2",{class:"hp-title"},"Hot Potato Sound Board")],-1)),e[25]||(e[25]=a("p",{class:"hp-sub"},"Tap ðŸŽµ to start the music & timer. Tap ðŸ’£ to stop and reset.",-1)),a("div",Le,[a("button",{class:"hp-btn music",type:"button",onClick:te,disabled:!r.value||u.value,"aria-pressed":u.value?"true":"false","aria-busy":r.value?"false":"true","aria-label":"Start music and timer"},[a("div",Ue,[e[8]||(e[8]=a("svg",{viewBox:"0 0 24 24",class:"hp-icon","aria-hidden":"true"},[a("path",{d:"M12 3v10.55a4 4 0 1 1-2-3.45V6h8V3h-6z",fill:"currentColor"})],-1)),r.value?(c(),v("span",De,"Music")):(c(),v("span",Fe,[...e[7]||(e[7]=[a("span",{class:"spinner","aria-hidden":"true"},null,-1),me(" Loadingâ€¦ ",-1)])]))])],8,_e),a("button",{class:"hp-btn bomb",type:"button",onClick:I,"aria-label":"Stop music and play bomb"},[...e[9]||(e[9]=[ve('<div class="hp-btn-inner" data-v-1a089f0d><svg viewBox="0 0 24 24" class="hp-icon" aria-hidden="true" data-v-1a089f0d><path d="M17.5 2a1 1 0 0 1 .96.73l.27.97.97.27A1 1 0 0 1 20 6l-.86.5.38.92a1 1 0 0 1-1.84.76l-.38-.92-.92.38a1 1 0 0 1-.76-1.84l.92-.38L17 3a1 1 0 0 1 .5-1z" fill="currentColor" data-v-1a089f0d></path><path d="M10 8a7 7 0 1 0 0 14 7 7 0 0 0 0-14z" fill="currentColor" opacity=".95" data-v-1a089f0d></path></svg><span class="hp-btn-label" data-v-1a089f0d>Bomb</span></div>',1)])])]),a("div",Ae,ce(Y.value),1),a("audio",{ref_key:"musicEl",ref:o,preload:"metadata",playsinline:""},[(c(!0),v(P,null,W(Q.value,l=>(c(),v("source",{key:l.url,src:l.url,type:l.type},null,8,Ie))),128))],512),a("audio",{ref_key:"bombEl",ref:s,preload:"metadata",playsinline:""},[(c(!0),v(P,null,W(J.value,l=>(c(),v("source",{key:l.url,src:l.url,type:l.type},null,8,Oe))),128))],512),g.value?(c(),v("div",{key:0,class:"modal-wrap",role:"dialog","aria-modal":"true",id:"hp-settings",onClick:pe(V,["self"])},[a("div",Ge,[a("header",{class:"modal-head"},[e[10]||(e[10]=a("h3",{class:"modal-title"},"Hot Potato Settings",-1)),a("button",{class:"modal-x",onClick:V,"aria-label":"Close settings"},"Ã—")]),a("div",Re,[a("div",He,[e[12]||(e[12]=a("label",{class:"lbl",for:"autoMode"},"Auto Mode",-1)),a("label",Pe,[f(a("input",{id:"autoMode",type:"checkbox","onUpdate:modelValue":e[0]||(e[0]=l=>i.value=l),onChange:ae},null,544),[[fe,i.value]]),e[11]||(e[11]=a("span",{class:"slider"},null,-1))])]),a("div",We,[e[16]||(e[16]=a("label",{class:"lbl",for:"randMin"},"Random Interval",-1)),a("div",Ne,[e[13]||(e[13]=a("span",null,"Range:",-1)),f(a("input",{id:"randMin",type:"number",min:"2",max:"60","onUpdate:modelValue":e[1]||(e[1]=l=>d.value=l),disabled:!i.value,onChange:D},null,40,Ke),[[C,d.value,void 0,{number:!0}]]),e[14]||(e[14]=a("span",null,"â€“",-1)),f(a("input",{id:"randMax",type:"number",min:"2",max:"60","onUpdate:modelValue":e[2]||(e[2]=l=>m.value=l),disabled:!i.value,onChange:D},null,40,ze),[[C,m.value,void 0,{number:!0}]]),e[15]||(e[15]=a("span",null,"seconds",-1))]),e[17]||(e[17]=a("p",{class:"hint"},"When Auto Mode is on, a bomb will play after a random delay in this range.",-1))]),a("div",Xe,[e[19]||(e[19]=a("label",{class:"lbl",for:"musicSel"},"Music",-1)),f(a("select",{id:"musicSel","onUpdate:modelValue":e[3]||(e[3]=l=>k.value=l),onChange:oe},[...e[18]||(e[18]=[a("option",{value:"World of Games"},"World of Games (default)",-1),a("option",{value:"Out of Time"},"Out of Time",-1)])],544),[[N,k.value]])]),a("div",qe,[e[21]||(e[21]=a("label",{class:"lbl",for:"bombSel"},"Bomb SFX",-1)),f(a("select",{id:"bombSel","onUpdate:modelValue":e[4]||(e[4]=l=>U.value=l),onChange:se},[...e[20]||(e[20]=[a("option",{value:"bomb"},"Bomb (default)",-1),a("option",{value:"dundun"},"Dun-Dun-Da-Dun",-1),a("option",{value:"stop"},"Stop! (Law violation)",-1)])],544),[[N,U.value]])]),a("div",$e,[e[22]||(e[22]=a("label",{class:"lbl",for:"musicVol"},"Music Volume",-1)),f(a("input",{id:"musicVol",class:"range",type:"range",min:"0",max:"100",step:"1","onUpdate:modelValue":e[5]||(e[5]=l=>L.value=l),style:K({"--range-fill":L.value+"%"})},null,4),[[C,L.value,void 0,{number:!0}]])]),a("div",je,[e[23]||(e[23]=a("label",{class:"lbl",for:"sfxVol"},"SFX Volume",-1)),f(a("input",{id:"sfxVol",class:"range",type:"range",min:"0",max:"100",step:"1","onUpdate:modelValue":e[6]||(e[6]=l=>_.value=l),style:K({"--range-fill":_.value+"%"})},null,4),[[C,_.value,void 0,{number:!0}]])])]),a("footer",{class:"modal-foot"},[a("button",{class:"btn primary btn-scale",onClick:ne},"Update")])])])):de("",!0)])]))}}),aa=ye(Qe,[["__scopeId","data-v-1a089f0d"]]);export{aa as default};
