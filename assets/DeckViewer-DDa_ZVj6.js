const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/vue-virtual-scroller.esm-Smq1a-c5.js","assets/index-CxPuBSkI.js","assets/index-C5GLiPhp.css"])))=>i.map(i=>d[i]);
import{V as Le,d as We,r as g,W as Fe,c as U,o as Je,k as ye,g as Xe,Q as Ue,a as o,e as l,b as t,v as qe,u as Ve,B as be,t as k,E as ke,J as He,F as se,h as ne,G as Ye,y as Ke,w as Ze,X as Qe,A as et,s as D,f as i,Y as tt,p as st,n as nt,Z as at,_ as ot}from"./index-CxPuBSkI.js";import{i as it}from"./megaphone-Cs9AbUGH.js";import{b as lt}from"./back-icon-xKqy7r3s.js";const he="taiyaki.selections.v1";function rt(u){if(!u)return{};try{const c=JSON.parse(u);return typeof c=="object"&&c?c:{}}catch{return{}}}function dt(){try{return rt(localStorage.getItem(he))}catch{return{}}}function V(u){try{localStorage.setItem(he,JSON.stringify(u))}catch(c){console.warn("Failed to persist selections to localStorage:",c)}}function ut(u){const c=new Set,m=[];for(const f of u)c.has(f)||(c.add(f),m.push(f));return m}const ct=Le("selections",{state:()=>({data:dt()}),actions:{list(u){const c=this.data[u]||{};return Object.entries(c).map(([m,f])=>({name:m,count:f.ids.length,updatedAt:f.updatedAt})).sort((m,f)=>f.updatedAt-m.updatedAt)},save(u,c,m){if(!u||!c)return;const f=ut(m.filter(Boolean));this.data[u]||(this.data[u]={}),this.data[u][c]={ids:f,updatedAt:Date.now()},V(this.data)},load(u,c){const m=this.data[u];return m?m[c]?.ids?[...m[c].ids]:[]:[]},delete(u,c){const m=this.data[u];!m||!(c in m)||(delete m[c],Object.keys(m).length===0&&delete this.data[u],V(this.data))},clearDeck(u){this.data[u]&&(delete this.data[u],V(this.data))},clearAll(){this.data={},V(this.data)}}}),pt="/TaiyakiEduGames/assets/taiyaki-bomb-DRbWWukK.png",mt="/TaiyakiEduGames/assets/sharknado-DE1BlCR3.png",gt="/TaiyakiEduGames/assets/headsup-CZLusrOt.png",vt="/TaiyakiEduGames/assets/spellingblitz-DuYpPWY-.png",ft="/TaiyakiEduGames/assets/spelling-guesser-Lfb09Kaz.png",yt="/TaiyakiEduGames/assets/sound-matcher-GJ2M5bnK.png",bt="/TaiyakiEduGames/assets/bingo-DCY4t3Hh.png",kt="/TaiyakiEduGames/assets/matching-3MQuCD6H.png",ht="/TaiyakiEduGames/assets/missing-DDLlibA2.png",wt="/TaiyakiEduGames/assets/shuffle-laCkiZmF.png",_t={class:"deck-page"},St={class:"page-topbar"},Ct=["src"],Et={class:"deck-title"},Nt={class:"deck-header"},xt={class:"deck-header-row"},Mt={class:"deck-header-row"},It={class:"deck-header-row"},At=["disabled"],Dt=["aria-hidden"],Gt=["aria-hidden"],$t={class:"button-container"},jt={class:"corner-rail"},Rt={key:0,class:"corner tl new"},Bt={key:1,class:"corner tr xp"},Tt=["src"],zt={class:"corner-rail"},Ot={key:0,class:"corner tl new"},Pt={key:1,class:"corner tr xp"},Lt=["src"],Wt={class:"corner-rail"},Ft={key:0,class:"corner tl new"},Jt={key:1,class:"corner tr xp"},Xt=["src"],Ut={class:"corner-rail"},qt={key:0,class:"corner tl new"},Vt={key:1,class:"corner tr xp"},Ht=["src"],Yt={class:"corner-rail"},Kt={key:0,class:"corner tl new"},Zt={key:1,class:"corner tr xp"},Qt=["src"],es={class:"corner-rail"},ts={key:0,class:"corner tl new"},ss={key:1,class:"corner tr xp"},ns=["src"],as={class:"corner-rail"},os={key:0,class:"corner tl new"},is={key:1,class:"corner tr xp"},ls=["src"],rs={class:"corner-rail"},ds={key:0,class:"corner tl new"},us={key:1,class:"corner tr xp"},cs=["src"],ps={class:"corner-rail"},ms={key:0,class:"corner tl new"},gs={key:1,class:"corner tr xp"},vs=["src"],fs={class:"corner-rail"},ys={key:0,class:"corner tl new"},bs={key:1,class:"corner tr xp"},ks=["src"],hs={class:"corner-rail"},ws={key:0,class:"corner tl new"},_s={key:1,class:"corner tr xp"},Ss=["src"],Cs=["aria-hidden"],Es={class:"add-section"},Ns={class:"radio"},xs=["checked"],Ms=["disabled"],Is=["value"],As={class:"add-section"},Ds={class:"radio"},Gs=["checked"],$s=["disabled"],js={key:0,class:"error",role:"alert"},Rs={class:"add-actions"},Bs=["disabled"],Ts=["disabled"],zs={class:"muted small",style:{"margin-top":"8px"}},Os={key:4,id:"load-modal",class:"popup add-popup",role:"dialog","aria-modal":"true"},Ps={key:0,class:"saved-list"},Ls={class:"saved-name"},Ws={class:"saved-actions"},Fs=["onClick"],Js=["onClick"],Xs={key:1,class:"muted"},Us={class:"add-actions"},qs={class:"count-line"},Vs={id:"card-count"},Hs={class:"card-content"},Ys=["src","alt"],Ks={class:"card-text"},Zs={key:0,class:"furigana"},Qs={key:1,class:"kanji"},en={class:"english"},tn={key:5,class:"error"},sn="eitake.iconcache.",nn="public-assets",an=230,on=We({__name:"DeckViewer",setup(u){const c=Qe(()=>at(()=>import("./vue-virtual-scroller.esm-Smq1a-c5.js"),__vite__mapDeps([0,1,2])).then(s=>s.RecycleScroller||s.default?.RecycleScroller||s)),m={bomb:pt,sharknado:mt,headsup:gt,spellingblitz:vt,spellingguesser:ft,soundmatcher:yt,bingo:bt,memory:kt,missing:ht,shuffle:wt,onthebeat:it},f=g({});function ae(s){const e=s.split("/").pop()||s;return sn+e}async function we(s){const e=ae(s);if(f.value[e])return f.value[e];const a=localStorage.getItem(e);if(a)return f.value[e]=a,a;try{const r=await(await fetch(s)).blob(),d=new FileReader,v=await new Promise((I,w)=>{d.onload=()=>I(String(d.result)),d.onerror=w,d.readAsDataURL(r)});return localStorage.setItem(e,v),f.value[e]=v,v}catch{return s}}async function _e(){for(const s of Object.values(m))we(s)}const _=s=>{const e=m[s],a=ae(e);return f.value[a]||e};function S(s){const e=s.target;e.style.visibility="hidden",e.onerror=null}function oe(s){if(!s)return"";const{data:e}=D.storage.from(nn).getPublicUrl(s);return e?.publicUrl??""}const Se={bomb:[],sharknado:[],headsup:[],spellingblitz:["xp"],spellingguesser:["xp"],soundmatcher:["xp"],bingo:[],memory:["new"],missing:["new"],shuffle:["new"],onthebeat:["new"]},ie=(s,e)=>(Se[s]||[]).includes(e),C=s=>ie(s,"new"),E=s=>ie(s,"xp"),H=et(),y=Ve(),q=ct(),h=Fe(),N=g(""),O=g(""),le=g(!1);function re(){const s=H.params,e=H.query,a=s.id??s.deckId??e.id;N.value=typeof a=="string"?a:"",O.value=N.value||"unknown-deck",le.value=String(e.kind||"").toLowerCase()==="custom"}re();const x=g(""),A=g([]),P=g(null),p=g(new Set),j=g(0),R=g(!1),B=g(!1),T=g(!1),Y=g([]),L=g(""),G=g(!1),F=g(""),J=g(!1),W=g(null),$=g(!1),K=U(()=>(q.list(O.value)||[]).map(e=>typeof e=="string"?e:e?.name??"").filter(e=>!!e)),Ce=U(()=>A.value.length),de=U(()=>A.value.length>0&&p.value.size===A.value.length),X=g(2);function ue(){const s=window.innerWidth;return s>=1500?6:s>=1280?5:s>=1024?4:s>=760?3:2}function ce(){const s=ue();s!==X.value&&(X.value=s)}const Ee=U(()=>{const s=X.value||2,e=A.value,a=[];for(let n=0,r=0;n<e.length;n+=s,r++)a.push({key:r,items:e.slice(n,n+s)});return a});Je(async()=>{_e(),X.value=ue(),window.addEventListener("resize",ce,{passive:!0}),await ye(async()=>{await pe()},150),document.addEventListener("click",me)}),Xe(()=>{window.removeEventListener("resize",ce),document.removeEventListener("click",me)}),Ue(()=>H.fullPath,async()=>{re(),await ye(async()=>{await pe()},150)});function Ne(s){if(Array.isArray(s))return s.map(e=>String(e).toLowerCase());if(typeof s=="string")return s.split(/[,\s]+/).map(e=>e.trim().toLowerCase()).filter(Boolean);if(s&&typeof s=="object")try{return Array.from(s).map(a=>String(a).toLowerCase())}catch{}return[]}async function pe(){if(P.value=null,p.value.clear(),j.value++,!N.value)throw P.value="Missing deck id in route.",new Error(P.value);try{if(le.value){const{data:d,error:v}=await D.from("custom_decks").select("id, title").eq("id",N.value).single();if(v)throw v;x.value=d?.title||N.value;const{data:I,error:w}=await D.from("v_custom_deck_cards_expanded").select("card_id, position, english, japanese_kanji, japanese_furigana, image_url").eq("deck_id",N.value).order("position",{ascending:!0});if(w)throw w;const z=(I??[]).map(b=>({id:b.card_id,english:b.english??"",japanese:{kanji:b.japanese_kanji??void 0,furigana:b.japanese_furigana??void 0},image_url:oe(b.image_url),is_bonus:!1}));A.value=z,z.forEach(b=>p.value.add(b.id)),j.value++;return}const{data:s,error:e}=await D.from("decks").select("id, title, slug").eq("id",N.value).single();if(e)throw e;x.value=s?.title||s?.slug||N.value;const{data:a,error:n}=await D.from("v_deck_cards_expanded").select(`
        deck_id,
        card_id,
        position,
        english,
        japanese_kanji,
        japanese_furigana,
        image_url,
        audio_url,
        tags,
        card_tags
      `).eq("deck_id",N.value).order("position",{ascending:!0});if(n)throw n;const r=(a||[]).map(d=>{const v=d.tags??d.card_tags??null,w=Ne(v).includes("bonus");return{id:d.card_id,english:d.english??"",japanese:{kanji:d.japanese_kanji??void 0,furigana:d.japanese_furigana??void 0},image_url:oe(d.image_url),is_bonus:w}});A.value=r,r.forEach(d=>p.value.add(d.id)),j.value++}catch(s){console.error(s),P.value=s?.message??"Failed to load deck."}}const xe=()=>y.back();function Me(){R.value=!0}function Z(){R.value=!1}function Ie(){B.value=!0}function Q(){B.value=!1}async function Ae(){W.value=null,G.value=!1,F.value="",L.value="",T.value=!0;const{data:s,error:e}=await D.from("custom_decks").select("id, title, card_count").order("updated_at",{ascending:!1});if(e){W.value=e.message;return}Y.value=s??[]}function ee(){T.value=!1}function me(s){const e=s.target;R.value&&!e.closest("#review-menu")&&!e.closest("[data-open-review]")&&Z(),B.value&&!e.closest("#game-menu")&&!e.closest("[data-open-game]")&&Q(),T.value&&!e.closest("#add-menu")&&!e.closest("[data-open-add]")&&ee(),$.value&&!e.closest("#load-modal")&&!e.closest("#load-selection-btn")&&($.value=!1)}function te(s){Z();const e=N.value;if(!e)return;const a=Array.from(p.value),n={};a.length&&(n.ids=a.join(",")),s==="review"?(n.mode="review",y.push({name:"FlashcardReview",params:{id:e},query:n})):s==="random"?(n.mode="random",y.push({name:"FlashcardReview",params:{id:e},query:n})):s==="japanese"&&y.push({name:"JapaneseFlashcardReview",params:{id:e},query:n})}async function M(s){Q();const e=N.value;if(!e)return;const a=async()=>{const n=ve();if(!n.length)return alert("Select at least one card to play."),null;try{await fe(n.map(r=>r.image_url),{concurrency:8,timeoutMs:250})}catch{}return n};if(s==="bomb"){const n=await a();if(!n)return;h.set({cards:n,mode:"bomb"}),sessionStorage.setItem("eitake.bombgame.transit.v1",JSON.stringify({cards:n,mode:"bomb"})),y.push({name:"bomb-game",params:{id:e}})}else if(s==="sharknado"){const n=await a();if(!n)return;h.set({cards:n,mode:"sharknado"}),sessionStorage.setItem("eitake.sharknado.transit.v1",JSON.stringify({cards:n,mode:"sharknado"})),y.push({name:"sharknado",params:{id:e}})}else if(s==="headsup"){const n=await a();if(!n)return;h.set({cards:n,mode:"headsup"}),sessionStorage.setItem("eitake.sharknado.transit.v1",JSON.stringify({cards:n,mode:"headsup"})),y.push({name:"headsup",params:{id:e}})}else if(s==="spellingblitz"){const n=await a();if(!n)return;h.set({cards:n,mode:"spellingblitz",startMode:"easy"}),sessionStorage.setItem("eitake.spellingblitz.transit.v1",JSON.stringify({cards:n,startMode:"easy"})),y.push({name:"spellingblitz",params:{id:e},query:{mode:"easy"}})}else if(s==="spellingguesser"){const n=await a();if(!n)return;h.set({cards:n,mode:"spellingguesser",deckName:x.value}),sessionStorage.setItem("eitake.spellingguesser.transit.v1",JSON.stringify({cards:n,deckName:x.value})),y.push({name:"spellingguesser",params:{id:e},query:{deckName:x.value}})}else if(s==="soundmatcher"){const n=await a();if(!n)return;h.seedForListening?.({deckId:e,deckName:x.value,cards:n,startMode:"easy",audioLocale:"en-US",ttsRate:1})??h.set({cards:n,mode:"listening",startMode:"easy",deckName:x.value}),sessionStorage.setItem("eitake.soundmatcher.transit.v1",JSON.stringify({cards:n,deckName:x.value,startMode:"easy",deckId:e})),y.push({name:"sound-matcher",params:{deckId:e}})}else if(s==="bingo"){const n=ve();if(n.length<9){alert("Select at least 9 cards to play Bingo (3×3).");return}try{await fe(n.map(r=>r.image_url),{concurrency:8,timeoutMs:250})}catch{}h.set({cards:n,mode:"bingo",deckName:x.value}),sessionStorage.setItem("eitake.bingo.transit.v1",JSON.stringify({cards:n,deckName:x.value})),y.push({name:"bingo",params:{id:e}})}else if(s==="memory"){const n=await a();if(!n)return;h.set({cards:n,mode:"memory"}),sessionStorage.setItem("eitake.memory.transit.v1",JSON.stringify({cards:n,mode:"memory"})),y.push({name:"memory",params:{id:e}})}else if(s==="missing"){const n=await a();if(!n)return;h.set({cards:n,mode:"missing"}),sessionStorage.setItem("eitake.memory.transit.v1",JSON.stringify({cards:n,mode:"missing"})),y.push({name:"missing",params:{id:e}})}else if(s==="shuffle"){const n=await a();if(!n)return;h.set({cards:n,mode:"shuffle"}),sessionStorage.setItem("eitake.memory.transit.v1",JSON.stringify({cards:n,mode:"shuffle"})),y.push({name:"shuffle",params:{id:e}})}else if(s==="onthebeat"){const n=await a();if(!n)return;h.set({cards:n,mode:"onthebeat"}),sessionStorage.setItem("eitake.memory.transit.v1",JSON.stringify({cards:n,mode:"onthebeat"})),y.push({name:"onthebeat-flashcards",params:{id:e}})}}function ge(s){return s.image_url||s.image||""}function De(s){p.value.has(s)?p.value.delete(s):p.value.add(s),j.value++}function Ge(){de.value?p.value.clear():A.value.forEach(s=>p.value.add(s.id)),j.value++}function $e(){if(!A.value.length||!p.value.size)return;const s=new Set(A.value.filter(e=>e.is_bonus).map(e=>e.id));p.value.forEach(e=>{s.has(e)&&p.value.delete(e)}),j.value++}function ve(){return A.value.filter(s=>p.value.has(s.id)).map(s=>({id:s.id,english:s.english,image_url:ge(s),japanese:s.japanese??null}))}function fe(s,{concurrency:e=8,timeoutMs:a=250}={}){const n=[...s.filter(Boolean)];let r=0,d;const v=new Promise(z=>d=z),I=Date.now()+a;function w(){if(!n.length){r===0&&d();return}if(Date.now()>I){r===0&&d();return}for(;r<e&&n.length;){r++;const z=n.shift(),b=new Image;b.onload=b.onerror=()=>{r--,w()},b.decoding="async",b.loading="eager",b.referrerPolicy="no-referrer",b.src=z}}return w(),v}function je(){const s=Array.from(p.value);if(!s.length){alert("No cards selected to save.");return}const e=`Set (${new Date().toLocaleString()})`,a=window.prompt("Name this selection:",e);if(a)try{q.save(O.value,a,s),$.value=!0}catch(n){console.error(n),alert("Failed to save selection.")}}function Re(s){try{const e=q.load(O.value,s)||[];p.value.clear(),e.forEach(a=>p.value.add(a)),j.value++,$.value=!1}catch(e){console.error(e),alert("Failed to load selection.")}}function Be(s){try{q.delete(O.value,s)}catch(e){console.error(e),alert("Failed to delete selection.")}}const Te=U(()=>R.value||B.value||T.value||$.value);function ze(){R.value=!1,B.value=!1,T.value=!1,$.value=!1}async function Oe(){if(!G.value){if(!L.value)throw new Error("Choose a custom deck.");return L.value}const s=F.value.trim();if(!s)throw new Error("Enter a title for the new custom deck.");const{data:e,error:a}=await D.auth.getUser();if(a||!e?.user?.id)throw new Error("Not authenticated");const{data:n,error:r}=await D.from("custom_decks").insert({owner_user_id:e.user.id,title:s,visibility:"private"}).select("id, title, card_count").single();if(r)throw r;return Y.value.unshift(n),L.value=n.id,G.value=!1,F.value="",n.id}async function Pe(){J.value=!0,W.value=null;try{const s=await Oe(),e=Array.from(p.value);if(e.length===0)throw new Error("Select at least one card to add.");const{data:a,error:n}=await D.from("custom_deck_cards").select("position").eq("deck_id",s).order("position",{ascending:!1}).limit(1);if(n)throw n;let r=(a?.[0]?.position??0)||0;const d=e.map(I=>(r+=1e3,{deck_id:s,flashcard_id:I,position:r})),{error:v}=await D.from("custom_deck_cards").upsert(d,{onConflict:"deck_id,flashcard_id"});if(v)throw v;ee(),alert(`Added ${e.length} card(s) to your custom deck.`)}catch(s){W.value=s?.message??"Failed to add cards."}finally{J.value=!1}}return(s,e)=>(i(),o("section",_t,[Te.value?(i(),o("div",{key:0,class:"frosted-overlay",role:"presentation","aria-hidden":"true",onClick:ze})):l("",!0),t("div",St,[t("button",{class:"icon-btn back-btn",type:"button",onClick:xe,"aria-label":"Back",title:"Back"},[t("img",{class:"icon",src:be(lt),alt:""},null,8,Ct)]),t("h1",Et,k(x.value||O.value),1),t("button",{class:"add-to-custom-btn",type:"button","data-open-add":"",onClick:e[0]||(e[0]=a=>Ae()),"aria-label":"Add to custom deck",title:"Add to Custom Deck"},[...e[32]||(e[32]=[t("span",{class:"icon"},"+",-1),t("span",{class:"label"},"Add to Custom Deck",-1)])])]),t("div",Nt,[t("div",xt,[t("button",{"data-open-review":"",type:"button",onClick:e[1]||(e[1]=a=>Me())},"Review Mode"),t("button",{"data-open-game":"",type:"button",onClick:e[2]||(e[2]=a=>Ie())},"Games")]),t("div",Mt,[t("button",{id:"toggle-bonus-btn",type:"button",onClick:e[3]||(e[3]=a=>$e())},"Deselect Bonus Words"),t("button",{id:"toggle-all-btn",type:"button",onClick:e[4]||(e[4]=a=>Ge())},k(de.value?"Deselect All":"Select All"),1)]),t("div",It,[t("button",{type:"button",onClick:e[5]||(e[5]=a=>je())},"Save Selection"),t("button",{id:"load-selection-btn",type:"button",onClick:e[6]||(e[6]=a=>$.value=!0),disabled:!K.value.length}," Load Selection ",8,At)])]),R.value?(i(),o("div",{key:1,id:"review-menu",class:"popup",role:"dialog","aria-modal":"true","aria-hidden":!R.value},[e[33]||(e[33]=t("h3",null,"Select a Review Mode",-1)),t("button",{class:"normal-review-btn",type:"button",onClick:e[7]||(e[7]=a=>te("review"))},"Regular Order"),t("button",{class:"random-btn",type:"button",onClick:e[8]||(e[8]=a=>te("random"))},"Random Order"),t("button",{class:"japanese-mode-btn",type:"button",onClick:e[9]||(e[9]=a=>te("japanese"))},"Japanese Mode (Random)"),t("button",{class:"cancel-btn",type:"button",onClick:e[10]||(e[10]=a=>Z())},"Cancel")],8,Dt)):l("",!0),B.value?(i(),o("div",{key:2,id:"game-menu",class:"game-popup",role:"dialog","aria-modal":"true","aria-hidden":!B.value},[e[67]||(e[67]=t("h3",null,"Select a Game Mode",-1)),t("div",$t,[t("button",{class:"game-btn bomb-game-btn",type:"button",onClick:e[11]||(e[11]=a=>M("bomb"))},[t("div",jt,[C("bomb")?(i(),o("div",Rt,[...e[34]||(e[34]=[t("span",null,"NEW",-1)])])):l("",!0),E("bomb")?(i(),o("div",Bt,[...e[35]||(e[35]=[t("span",null,"XP",-1)])])):l("",!0)]),e[36]||(e[36]=t("p",{class:"game-popup-text"},"Bomb Game",-1)),t("img",{class:"game-icon",src:_("bomb"),alt:"Bomb Game",loading:"eager",decoding:"async",fetchpriority:"high",onError:S},null,40,Tt)]),t("button",{class:"game-btn sharknado-game-btn",type:"button",onClick:e[12]||(e[12]=a=>M("sharknado"))},[t("div",zt,[C("sharknado")?(i(),o("div",Ot,[...e[37]||(e[37]=[t("span",null,"NEW",-1)])])):l("",!0),E("sharknado")?(i(),o("div",Pt,[...e[38]||(e[38]=[t("span",null,"XP",-1)])])):l("",!0)]),e[39]||(e[39]=t("p",{class:"game-popup-text"},"Sharknado!",-1)),t("img",{class:"game-icon",src:_("sharknado"),alt:"Sharknado",loading:"eager",decoding:"async",fetchpriority:"high",onError:S},null,40,Lt)]),t("button",{class:"game-btn headsup-game-btn",type:"button",onClick:e[13]||(e[13]=a=>M("headsup"))},[t("div",Wt,[C("headsup")?(i(),o("div",Ft,[...e[40]||(e[40]=[t("span",null,"NEW",-1)])])):l("",!0),E("headsup")?(i(),o("div",Jt,[...e[41]||(e[41]=[t("span",null,"XP",-1)])])):l("",!0)]),e[42]||(e[42]=t("p",{class:"game-popup-text"},"Heads Up",-1)),t("img",{class:"game-icon",src:_("headsup"),alt:"Heads Up",loading:"eager",decoding:"async",fetchpriority:"high",onError:S},null,40,Xt)]),t("button",{class:"game-btn spelling-blitz-btn",type:"button",onClick:e[14]||(e[14]=a=>M("spellingblitz"))},[t("div",Ut,[C("spellingblitz")?(i(),o("div",qt,[...e[43]||(e[43]=[t("span",null,"NEW",-1)])])):l("",!0),E("spellingblitz")?(i(),o("div",Vt,[...e[44]||(e[44]=[t("span",null,"XP",-1)])])):l("",!0)]),e[45]||(e[45]=t("p",{class:"game-popup-text"},"Spelling Blitz",-1)),t("img",{class:"game-icon",src:_("spellingblitz"),alt:"Spelling Blitz",loading:"eager",decoding:"async",fetchpriority:"high",onError:S},null,40,Ht)]),t("button",{class:"game-btn spelling-guesser-btn",type:"button",onClick:e[15]||(e[15]=a=>M("spellingguesser"))},[t("div",Yt,[C("spellingguesser")?(i(),o("div",Kt,[...e[46]||(e[46]=[t("span",null,"NEW",-1)])])):l("",!0),E("spellingguesser")?(i(),o("div",Zt,[...e[47]||(e[47]=[t("span",null,"XP",-1)])])):l("",!0)]),e[48]||(e[48]=t("p",{class:"game-popup-text"},"Spelling Guesser",-1)),t("img",{class:"game-icon",src:_("spellingguesser"),alt:"Spelling Guesser",loading:"eager",decoding:"async",fetchpriority:"high",onError:S},null,40,Qt)]),t("button",{class:"game-btn sound-matcher-btn",type:"button",onClick:e[16]||(e[16]=a=>M("soundmatcher"))},[t("div",es,[C("soundmatcher")?(i(),o("div",ts,[...e[49]||(e[49]=[t("span",null,"NEW",-1)])])):l("",!0),E("soundmatcher")?(i(),o("div",ss,[...e[50]||(e[50]=[t("span",null,"XP",-1)])])):l("",!0)]),e[51]||(e[51]=t("p",{class:"game-popup-text"},"Sound Matcher",-1)),t("img",{class:"game-icon",src:_("soundmatcher"),alt:"Sound Matcher",loading:"eager",decoding:"async",fetchpriority:"high",onError:S},null,40,ns)]),t("button",{class:"game-btn bingo-btn",type:"button",onClick:e[17]||(e[17]=a=>M("bingo"))},[t("div",as,[C("bingo")?(i(),o("div",os,[...e[52]||(e[52]=[t("span",null,"NEW",-1)])])):l("",!0),E("bingo")?(i(),o("div",is,[...e[53]||(e[53]=[t("span",null,"XP",-1)])])):l("",!0)]),e[54]||(e[54]=t("p",{class:"game-popup-text"},"Bingo",-1)),t("img",{class:"game-icon",src:_("bingo"),alt:"Bingo",loading:"eager",decoding:"async",fetchpriority:"high",onError:S},null,40,ls)]),t("button",{class:"game-btn memory-btn",type:"button",onClick:e[18]||(e[18]=a=>M("memory"))},[t("div",rs,[C("memory")?(i(),o("div",ds,[...e[55]||(e[55]=[t("span",null,"NEW",-1)])])):l("",!0),E("memory")?(i(),o("div",us,[...e[56]||(e[56]=[t("span",null,"XP",-1)])])):l("",!0)]),e[57]||(e[57]=t("p",{class:"game-popup-text"},"Memory Game",-1)),t("img",{class:"game-icon",src:_("memory"),alt:"Memory",loading:"eager",decoding:"async",fetchpriority:"high",onError:S},null,40,cs)]),t("button",{class:"game-btn missing-btn",type:"button",onClick:e[19]||(e[19]=a=>M("missing"))},[t("div",ps,[C("missing")?(i(),o("div",ms,[...e[58]||(e[58]=[t("span",null,"NEW",-1)])])):l("",!0),E("missing")?(i(),o("div",gs,[...e[59]||(e[59]=[t("span",null,"XP",-1)])])):l("",!0)]),e[60]||(e[60]=t("p",{class:"game-popup-text"},"What's Missing?",-1)),t("img",{class:"game-icon",src:_("missing"),alt:"Missing Game",loading:"eager",decoding:"async",fetchpriority:"high",onError:S},null,40,vs)]),t("button",{class:"game-btn shuffle-btn",type:"button",onClick:e[20]||(e[20]=a=>M("shuffle"))},[t("div",fs,[C("missing")?(i(),o("div",ys,[...e[61]||(e[61]=[t("span",null,"NEW",-1)])])):l("",!0),E("missing")?(i(),o("div",bs,[...e[62]||(e[62]=[t("span",null,"XP",-1)])])):l("",!0)]),e[63]||(e[63]=t("p",{class:"game-popup-text"},"Shuffle Game",-1)),t("img",{class:"game-icon",src:_("shuffle"),alt:"Shuffle Game",loading:"eager",decoding:"async",fetchpriority:"high",onError:S},null,40,ks)]),t("button",{class:"game-btn onthebeat-btn",type:"button",onClick:e[21]||(e[21]=a=>M("onthebeat"))},[t("div",hs,[C("onthebeat")?(i(),o("div",ws,[...e[64]||(e[64]=[t("span",null,"NEW",-1)])])):l("",!0),E("onthebeat")?(i(),o("div",_s,[...e[65]||(e[65]=[t("span",null,"XP",-1)])])):l("",!0)]),e[66]||(e[66]=t("p",{class:"game-popup-text"},"On The Beat!",-1)),t("img",{class:"game-icon",src:_("onthebeat"),alt:"Say the word on the beat",loading:"eager",decoding:"async",fetchpriority:"high",onError:S},null,40,Ss)])]),t("button",{class:"cancel-btn",type:"button",onClick:e[22]||(e[22]=a=>Q())},"Cancel")],8,Gt)):l("",!0),T.value?(i(),o("div",{key:3,id:"add-menu",class:"popup add-popup",role:"dialog","aria-modal":"true","aria-hidden":!T.value},[e[71]||(e[71]=t("h3",{style:{"margin-top":"0"}},"Add to Custom Deck",-1)),t("div",Es,[t("label",Ns,[t("input",{type:"radio",name:"add-target",checked:!G.value,onChange:e[23]||(e[23]=a=>G.value=!1)},null,40,xs),e[68]||(e[68]=t("span",null,"Select existing deck",-1))]),ke(t("select",{class:"deck-select",disabled:G.value,"onUpdate:modelValue":e[24]||(e[24]=a=>L.value=a)},[e[69]||(e[69]=t("option",{value:"",disabled:""},"Select a deck…",-1)),(i(!0),o(se,null,ne(Y.value,a=>(i(),o("option",{key:a.id,value:a.id},k(a.title)+" ("+k(a.card_count)+") ",9,Is))),128))],8,Ms),[[He,L.value]])]),t("div",As,[t("label",Ds,[t("input",{type:"radio",name:"add-target",checked:G.value,onChange:e[25]||(e[25]=a=>G.value=!0)},null,40,Gs),e[70]||(e[70]=t("span",null,"Create a new custom deck",-1))]),ke(t("input",{class:"deck-input",type:"text",disabled:!G.value,"onUpdate:modelValue":e[26]||(e[26]=a=>F.value=a),maxlength:"120",placeholder:"New deck title"},null,8,$s),[[Ye,F.value,void 0,{trim:!0}]])]),W.value?(i(),o("p",js,k(W.value),1)):l("",!0),t("div",Rs,[t("button",{class:"cancel-btn",type:"button",onClick:e[27]||(e[27]=a=>ee()),disabled:J.value},"Cancel",8,Bs),t("button",{class:"confirm-btn",type:"button",onClick:e[28]||(e[28]=a=>Pe()),disabled:J.value},k(J.value?"Adding…":"Add"),9,Ts)]),t("p",zs,k(p.value.size)+" card(s) selected ",1)],8,Cs)):l("",!0),$.value?(i(),o("div",Os,[e[72]||(e[72]=t("h3",{style:{"margin-top":"0"}},"Load a Saved Selection",-1)),K.value.length?(i(),o("div",Ps,[(i(!0),o(se,null,ne(K.value,a=>(i(),o("div",{class:"saved-row",key:a},[t("div",Ls,k(a),1),t("div",Ws,[t("button",{type:"button",onClick:n=>Re(a)},"Load",8,Fs),t("button",{type:"button",class:"danger",onClick:n=>Be(a)},"Delete",8,Js)])]))),128))])):(i(),o("p",Xs,"No saved selections yet.")),t("div",Us,[t("button",{class:"cancel-btn",type:"button",onClick:e[29]||(e[29]=a=>$.value=!1)},"Close")])])):l("",!0),t("h2",qs,[e[73]||(e[73]=Ke("Cards in this Deck: ",-1)),t("span",Vs,k(Ce.value),1)]),qe(be(c),{class:"deck-scroller",items:Ee.value,"item-size":an,"key-field":"key"},{default:Ze(({item:a})=>[t("div",{class:"row-grid",style:nt({gridTemplateColumns:`repeat(${X.value}, 1fr)`})},[(i(!0),o(se,null,ne(a.items,(n,r,d,v)=>{const I=[j.value,p.value.has(n.id)];if(v&&v.key===n.id&&tt(v,I))return v;const w=(i(),o("div",{key:n.id,class:st(["deck-card",{selected:p.value.has(n.id)}]),onClick:z=>De(n.id)},[t("div",Hs,[t("img",{src:ge(n),alt:n.english,class:"deck-card-img",loading:"lazy",decoding:"async",referrerpolicy:"no-referrer",draggable:"false"},null,8,Ys),t("div",Ks,[n.japanese?.furigana?(i(),o("p",Zs,k(n.japanese.furigana),1)):l("",!0),n.japanese?.kanji?(i(),o("p",Qs,k(n.japanese.kanji),1)):l("",!0),t("p",en,k(n.english),1)])])],10,["onClick"]));return w.memo=I,w},e,30),128))],4)]),_:1},8,["items"]),P.value?(i(),o("p",tn,k(P.value),1)):l("",!0)]))}}),un=ot(on,[["__scopeId","data-v-80dc8d8b"]]);export{un as default};
