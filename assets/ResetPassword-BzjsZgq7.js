import{i as k,r as o,j as x,s as _,a as t,d as s,h as y,t as f,g as C,x as h,z as b,B as z,b as a,_ as M}from"./index-BiuPMolj.js";const S={class:"chalkboard-bg"},B={class:"login-shell",role:"main"},A={class:"login-card","aria-labelledby":"reset-title"},U={class:"login-head"},P={class:"main-sub"},V={key:0},N={key:1},R={key:0,class:"info",style:{"margin-top":"8px"}},q={class:"field-wrap has-addon"},D=["type"],$=["aria-pressed"],E={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"icon"},j={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"icon"},I=["type"],L={style:{display:"flex",gap:"8px","align-items":"center","margin-top":"4px"}},T={style:{display:"flex","align-items":"center",gap:"6px"}},W={key:0,class:"error"},Y={key:1,class:"info"},F=["disabled"],G={key:0},H={key:1},J={key:1,class:"login-form"},K=k({__name:"ResetPassword",setup(O){const u=o(!1),p=o(!1),n=o(null),c=o(null),i=o(""),v=o(""),d=o(!1),w=o(!1),m=o(null);x(async()=>{const{data:r,error:e}=await _.auth.getSession();e&&console.warn(e),u.value=!!r.session,u.value||(m.value="No active recovery session.")});async function g(){if(n.value=null,c.value=null,i.value!==v.value){n.value="Passwords do not match.";return}if(i.value.length<8){n.value="Password must be at least 8 characters.";return}p.value=!0;const{error:r}=await _.auth.updateUser({password:i.value});if(p.value=!1,r){n.value=r.message||"Could not update password.";return}c.value="Password updated. You’re all set!"}return(r,e)=>(a(),t("div",S,[s("main",B,[s("section",A,[s("header",U,[e[5]||(e[5]=s("h1",{id:"reset-title",class:"main-title"},"Set a new password",-1)),s("p",P,[u.value?(a(),t("span",N,"Enter your new password below.")):(a(),t("span",V,"We couldn’t verify a recovery session. Try the link again, or request a new one."))]),m.value?(a(),t("p",R,f(m.value),1)):y("",!0)]),u.value?(a(),t("form",{key:0,class:"login-form",onSubmit:C(g,["prevent"])},[e[9]||(e[9]=s("label",{class:"field-label",for:"pw1"},"New password",-1)),s("div",q,[h(s("input",{id:"pw1",type:d.value?"text":"password","onUpdate:modelValue":e[0]||(e[0]=l=>i.value=l),autocomplete:"new-password",placeholder:"At least 8 characters",minlength:"8",class:"field-input",required:""},null,8,D),[[b,i.value,void 0,{trim:!0}]]),s("button",{class:"icon-btn hover-scale",type:"button",onClick:e[1]||(e[1]=l=>d.value=!d.value),"aria-pressed":d.value?"true":"false"},[d.value?(a(),t("svg",j,[...e[7]||(e[7]=[s("path",{d:"M2 4.27 3.28 3 21 20.72 19.73 22l-2.39-2.39A12.2 12.2 0 0 1 12 20c-5.05 0-9.27-3.11-10.94-7.5a13.7 13.7 0 0 1 5.18-6.33L2 4.27zM12 7c4.06 0 7.52 2.44 8.95 5.5-.59 1.31-1.49 2.47-2.61 3.42l-2-2a5 5 0 0 0-6.76-6.76l-1.7-1.7A13.85 13.85 0 0 1 12 7zm-3.5 6a3.5 3.5 0 0 0 4.41 3.37l-4.28-4.28A3.47 3.47 0 0 0 8.5 13z"},null,-1)])])):(a(),t("svg",E,[...e[6]||(e[6]=[s("path",{d:"M12 5c5.05 0 9.27 3.11 10.94 7.5C21.27 16.89 17.05 20 12 20S2.73 16.89 1.06 12.5C2.73 8.11 6.95 5 12 5zm0 2C7.94 7 4.48 9.44 3.05 12.5 4.48 15.56 7.94 18 12 18s7.52-2.44 8.95-5.5C19.52 9.44 16.06 7 12 7zm0 2.5A3.5 3.5 0 1 1 8.5 13 3.5 3.5 0 0 1 12 9.5zm0 2A1.5 1.5 0 1 0 13.5 13 1.5 1.5 0 0 0 12 11.5z"},null,-1)])]))],8,$)]),e[10]||(e[10]=s("label",{class:"field-label",for:"pw2"},"Confirm password",-1)),h(s("input",{id:"pw2",type:w.value?"text":"password","onUpdate:modelValue":e[2]||(e[2]=l=>v.value=l),autocomplete:"new-password",placeholder:"Re-enter your password",minlength:"8",class:"field-input",required:""},null,8,I),[[b,v.value,void 0,{trim:!0}]]),s("div",L,[s("label",T,[h(s("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=l=>w.value=l)},null,512),[[z,w.value]]),e[8]||(e[8]=s("span",{class:"muted"},"Show confirm",-1))])]),n.value?(a(),t("p",W,f(n.value),1)):y("",!0),c.value?(a(),t("p",Y,f(c.value),1)):y("",!0),s("button",{class:"primary-btn hover-scale",type:"submit",disabled:p.value},[p.value?(a(),t("span",G,"Updating…")):(a(),t("span",H,"Update password"))],8,F)],32)):(a(),t("div",J,[s("button",{class:"primary-btn hover-scale",type:"button",onClick:e[4]||(e[4]=l=>r.$router.replace("/")),style:{"margin-top":"8px"}}," Back to login ")]))])])]))}}),X=M(K,[["__scopeId","data-v-aeb7554d"]]);export{X as default};
