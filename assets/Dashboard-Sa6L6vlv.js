import{d as Q,r as b,c as x,o as N,a as v,b as t,t as E,e as X,s as q,f as h,_ as G,g as pt,n as H,F as Z,h as J,i as dt,w as P,j as ct,k as kt,u as xt,l as et,m as ut,p as St,q as Wt,v as B,x as Et,C as It,y as Y}from"./index-DQVeBxL9.js";const Mt={class:"dw-root","aria-label":"Daily Word"},zt={class:"dw-top"},Dt={class:"dw-date"},Rt={key:0,class:"dw-body"},Bt={key:1,class:"dw-body"},Ct={class:"dw-word"},Lt={key:0,class:"dw-pos"},Ht={class:"dw-def"},Tt={class:"dw-error-msg"},Ft={class:"dw-foot"},Ot={class:"dw-source"},Ut={key:2,class:"dw-body"},Pt={class:"dw-word"},Vt={key:0,class:"dw-pos"},qt={class:"dw-def"},Xt={class:"dw-foot"},Yt={class:"dw-source"},Nt=Q({__name:"DailyWord",setup(F){const e={provider:"Local fallback",date:null,word:"Broken",definition:"This website is broken, and the dev should fix it soon.",partOfSpeech:null},S=b(!0),r=b(null),g=b(null);function z(i){return new Date(i+"T00:00:00").toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}const y=["noun","verb","adjective","adverb","pronoun","preposition","conjunction","interjection","determiner","article"];function A(i){return i.replace(/\s+/g," ").trim()}function D(i){return i&&i.charAt(0).toUpperCase()+i.slice(1)}function L(i){const u=i.toLowerCase();for(const c of y)if(new RegExp(`\\b${c}\\b\\s*[:–—-]`,"i").test(i))return D(c);for(const c of y)if(new RegExp(`\\(\\s*${c}\\s*\\)`,"i").test(i))return D(c);for(const c of y)if(new RegExp(`\\b${c}\\b`,"i").test(u))return D(c);return null}function R(i,u){let c=i;if(u){const k=u.toLowerCase(),w=c.toLowerCase().search(new RegExp(`\\b${k}\\b\\s*[:–—-]`));w>=0&&(c=c.slice(w).replace(new RegExp(`^.*?\\b${k}\\b\\s*[:–—-]\\s*`,"i"),"")||c)}c=c.replace(/^\s*(definition|meaning)\s*[:–—-]\s*/i,"");const W=c.split(new RegExp("(?<=[.!?])\\s+")).map(k=>A(k)).filter(Boolean);if(!W.length)return A(c)||null;for(const k of W)if(k.length>=12&&k.length<=300)return k;return W[0]||null}const m=x(()=>{const i=g.value;if(i){const u=i.summary?A(i.summary):"",c=i.partOfSpeech??(u?L(u):null)??null,W=i.definition??(u?R(u,c):null)??null;return{provider:i.provider||"Wordsmith — A Word A Day",date:i.date,word:i.word||e.word,pos:c,definition:W||e.definition}}return{provider:e.provider,date:e.date,word:e.word,pos:e.partOfSpeech,definition:e.definition}}),M=x(()=>m.value.date?z(m.value.date):"—");async function I(){S.value=!0,r.value=null;try{const{data:i,error:u}=await q.functions.invoke("daily-word",{method:"GET"});if(u)throw u;const c=i;if(!c||typeof c.word!="string")throw new Error("Malformed response from daily-word function.");g.value=c}catch(i){const u=i?.message||i?.details||(typeof i=="string"?i:"Unknown error");r.value=u,g.value=null}finally{S.value=!1}}return N(()=>{I()}),(i,u)=>(h(),v("section",Mt,[t("header",zt,[t("div",Dt,E(M.value),1)]),S.value?(h(),v("div",Rt,[...u[0]||(u[0]=[t("div",{class:"dw-skel dw-skel-word"},null,-1),t("div",{class:"dw-skel dw-skel-pos"},null,-1),t("div",{class:"dw-skel dw-skel-def"},null,-1),t("div",{class:"dw-skel dw-skel-def"},null,-1)])])):r.value?(h(),v("div",Bt,[t("div",Ct,E(m.value.word),1),m.value.pos?(h(),v("div",Lt,E(m.value.pos),1)):X("",!0),t("div",Ht,E(m.value.definition),1),t("div",Tt,E(r.value),1),t("footer",Ft,[t("div",Ot," Source: "+E(m.value.provider),1)])])):(h(),v("div",Ut,[t("div",Pt,E(m.value.word),1),m.value.pos?(h(),v("div",Vt,E(m.value.pos),1)):X("",!0),t("div",qt,E(m.value.definition),1),t("footer",Xt,[t("div",Yt," Source: "+E(m.value.provider),1)])]))]))}}),Gt=G(Nt,[["__scopeId","data-v-299c5ca8"]]),jt={key:0,class:"siw__empty"},$t={key:1,class:"siw__viewport"},Kt=["src"],Zt=["src"],Jt={key:0,class:"siw__fade","aria-hidden":"true"},Qt=Q({__name:"ScrollingImageWall",props:{images:{},tileWidth:{default:96},tileHeight:{default:96},gap:{default:14},visibleCount:{default:0},speedPxPerSec:{default:26},direction:{default:"left"},linkTarget:{default:"_blank"},linkRel:{default:"noopener noreferrer"},edgeFade:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0}},setup(F){const e=F,S=b(null),r=b(0),g=x(()=>Array.isArray(e.images)&&e.images.length>0),z=x(()=>{const n=[];for(const _ of e.images||[])typeof _=="string"?n.push({src:_}):_&&typeof _.src=="string"&&n.push({src:_.src,href:_.href});return n});let y=null;function A(){const n=S.value;n&&(r.value=Math.round(n.getBoundingClientRect().width))}N(()=>{A(),S.value&&"ResizeObserver"in window?(y=new ResizeObserver(()=>A()),y.observe(S.value)):window.addEventListener("resize",A,{passive:!0})}),pt(()=>{y&&S.value&&y.unobserve(S.value),y=null,window.removeEventListener("resize",A),W()});const D=x(()=>{const n=e.tileWidth+e.gap,_=Math.max(1,Math.ceil(Math.max(1,r.value)/Math.max(1,n))+2),p=e.visibleCount&&e.visibleCount>0?e.visibleCount:0;return p>0?Math.max(1,p+2):_}),L=x(()=>{const n=D.value;return n<=1?e.tileWidth:n*e.tileWidth+(n-1)*e.gap}),R=x(()=>{if(!g.value)return[];const n=z.value,_=n.length,p=D.value,T=[];for(let O=0;O<p;O++)T.push(n[O%_]);return T}),m=b(0);let M=null,I=0;const i=x(()=>e.direction==="right"?1:-1);function u(n){I||(I=n);const _=(n-I)/1e3;if(I=n,!w.isDown){const p=Math.max(0,e.speedPxPerSec);m.value+=i.value*p*_,m.value=k(m.value)}M=window.requestAnimationFrame(u)}function c(){M==null&&(I=0,M=window.requestAnimationFrame(u))}function W(){M!=null&&(window.cancelAnimationFrame(M),M=null,I=0)}function k(n){const _=L.value;if(!_||_<=0)return n;let p=n%_;return p>0&&(p-=_),p}N(()=>{c()});const w={isDown:!1,pointerId:-1,startX:0,startOffset:0};function V(n){e.draggable&&g.value&&(n.pointerType==="mouse"&&n.button!==0||(w.isDown=!0,w.pointerId=n.pointerId,w.startX=n.clientX,w.startOffset=m.value,n.currentTarget?.setPointerCapture?.(n.pointerId)))}function a(n){if(!e.draggable||!w.isDown||n.pointerId!==w.pointerId)return;const _=n.clientX-w.startX;m.value=k(w.startOffset+_)}function s(n){e.draggable&&w.isDown&&n.pointerId===w.pointerId&&(w.isDown=!1,w.pointerId=-1)}function f(n,_){if(!_.href||!e.draggable)return;const p=Math.abs(m.value-w.startOffset);(w.isDown||p>6)&&(n.preventDefault(),n.stopPropagation())}const C=x(()=>({"--siw-gap":`${e.gap}px`,"--siw-tile-w":`${e.tileWidth}px`,"--siw-tile-h":`${e.tileHeight}px`})),j=x(()=>({width:`${e.tileWidth}px`,height:`${e.tileHeight}px`})),$=x(()=>({gap:`${e.gap}px`})),K=x(()=>({transform:`translate3d(${m.value}px, 0, 0)`}));return(n,_)=>(h(),v("div",{ref_key:"rootEl",ref:S,class:"siw",style:H(C.value),role:"presentation","aria-hidden":"true",onPointerdown:V,onPointermove:a,onPointerup:s,onPointercancel:s,onPointerleave:s},[g.value?(h(),v("div",$t,[t("div",{class:"siw__track",style:H(K.value)},[t("div",{class:"siw__strip",style:H($.value)},[(h(!0),v(Z,null,J(R.value,(p,T)=>(h(),dt(ct(p.href?"a":"div"),{key:`a-${T}`,class:"siw__tile",style:H(j.value),href:p.href||void 0,target:p.href?n.linkTarget:void 0,rel:p.href?n.linkRel:void 0,onClick:O=>f(O,p)},{default:P(()=>[t("img",{class:"siw__img",src:p.src,alt:"",draggable:"false"},null,8,Kt)]),_:2},1032,["style","href","target","rel","onClick"]))),128))],4),t("div",{class:"siw__strip",style:H($.value),"aria-hidden":"true"},[(h(!0),v(Z,null,J(R.value,(p,T)=>(h(),dt(ct(p.href?"a":"div"),{key:`b-${T}`,class:"siw__tile",style:H(j.value),href:p.href||void 0,target:p.href?n.linkTarget:void 0,rel:p.href?n.linkRel:void 0,tabindex:"-1"},{default:P(()=>[t("img",{class:"siw__img",src:p.src,alt:"",draggable:"false"},null,8,Zt)]),_:2},1032,["style","href","target","rel"]))),128))],4)],4),n.edgeFade?(h(),v("div",Jt)):X("",!0)])):(h(),v("div",jt))],36))}}),te=G(Qt,[["__scopeId","data-v-1d762080"]]),ee={key:0,class:"ais-muted"},se={key:1,class:"ais-error"},ae={key:2,class:"ais-scroll",role:"list"},oe={class:"ais-badges","aria-hidden":"true"},ne={key:0,class:"ais-badge ais-badge--xp"},re={key:1,class:"ais-badge ais-badge--new"},ie=["title","onClick","onKeydown"],le={class:"ais-icon"},de=["src","alt","onError"],ce={key:1,class:"ais-icon-fallback","aria-hidden":"true"},ue={class:"ais-name"},fe="public-assets",ft="game-icons/",he=Q({__name:"ActivitiesIconGrid",props:{mode:{default:"both"},width:{default:"100%"},height:{default:"260px"},iconSize:{default:64},titleLines:{default:2},gap:{default:12}},setup(F){const e=F,S=xt(),r=b(!0),g=b(null),z=b([]),y=b(new Set);function A(a){return(a.tags||[]).map(s=>String(s).toLowerCase().trim())}function D(a){const s=A(a);return s.includes("teacher tool")||s.includes("teacher-tool")||s.includes("teachertool")}function L(a){const s=A(a);return s.includes("xp")||s.includes("gives_xp")||s.includes("givesxp")||s.includes("experience")}function R(a){const s=A(a);return a.status&&String(a.status).toLowerCase().trim()==="new"?!0:s.includes("new")||s.includes("recent")}N(async()=>{await kt(async()=>{try{const{data:a,error:s}=await q.from("activities").select("id, slug, name, type, url_path, external_url, icon_url, thumbnail_url, tags, status, archived_at").is("archived_at",null).order("name",{ascending:!0});if(s)throw s;z.value=a||[]}catch(a){console.error(a),g.value=a?.message??String(a)}finally{r.value=!1}},250)});const m=x(()=>z.value.slice().sort((a,s)=>(a.name||"").localeCompare(s.name||""))),M=x(()=>e.mode==="both"?m.value:e.mode==="tools"?m.value.filter(D):m.value.filter(a=>!D(a)));function I(a){return!!a&&/^[a-z][a-z0-9+\-.]*:\/\//i.test(String(a).trim())}function i(a){if(y.value.has(a.id))return"";const s=a.icon_url||a.thumbnail_url||"";if(!s)return"";if(I(s))return s;let f=String(s).replace(/^\/+/,"");f.startsWith(ft)||(f=ft+f);const{data:C}=q.storage.from(fe).getPublicUrl(f);return C?.publicUrl||""}function u(a){y.value.add(a)}function c(a){if(!a)return"";let s=String(a).trim();if(!s)return"";if(/^[a-z][a-z0-9+\-.]*:\/\//i.test(s)||/^[a-z][a-z0-9+\-.]*:/i.test(s))return s;if(s.startsWith("//"))return(window.location?.protocol||"https:")+s;/^[\w.-]+\.[a-z]{2,}([/:?#]|$)/i.test(s)&&(s="https://"+s);try{const f=new URL(s,window.location.origin);return!/\.[a-z0-9]+$/i.test(f.pathname.split("/").pop()||"")&&!f.search&&!f.hash&&!f.pathname.endsWith("/")&&(f.pathname+="/"),f.toString()}catch{return s}}function W(a){if(!a)return"";let s=String(a).trim();return s?(s.startsWith("/")||(s="/"+s),s):""}function k(a){if(a.url_path){S.push(W(a.url_path));return}if(a.slug){S.push(`/activities/${a.slug}`);return}if(a.external_url){const s=c(a.external_url);if(s){window.open(s,"_blank","noopener,noreferrer");return}}alert("No activity URL is configured.")}const w=x(()=>Math.max(6,Math.min(24,Math.floor(e.gap||12)))),V=x(()=>({width:e.width,height:e.height,"--ais-icon-base":`${e.iconSize}px`,"--ais-lines":String(e.titleLines),"--ais-gap":`${w.value}px`}));return(a,s)=>(h(),v("section",{class:"ais-root",style:H(V.value),"aria-label":"Activities icon grid"},[r.value?(h(),v("p",ee,"Loading…")):g.value?(h(),v("p",se,E(g.value),1)):(h(),v("div",ae,[(h(!0),v(Z,null,J(M.value,f=>(h(),v("article",{key:f.id,class:"ais-item",role:"listitem"},[t("div",oe,[L(f)?(h(),v("span",ne,"XP")):X("",!0),R(f)?(h(),v("span",re,"NEW")):X("",!0)]),t("button",{class:"ais-iconBtn",type:"button",title:f.name,onClick:C=>k(f),onKeydown:[ut(et(C=>k(f),["prevent"]),["enter"]),ut(et(C=>k(f),["prevent"]),["space"])]},[t("div",le,[i(f)?(h(),v("img",{key:0,src:i(f),alt:f.name,loading:"lazy",decoding:"async",draggable:"false",onError:et(C=>u(f.id),["stop"])},null,40,de)):(h(),v("div",ce))])],40,ie),t("div",ue,E(f.name),1)]))),128))]))],4))}}),ht=G(he,[["__scopeId","data-v-a9a47091"]]),pe="data:image/png;base64,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",ve="/TaiyakiEduGames/assets/win_chime-BYEqQxzW.mp3",me={class:"cap-stack"},_e={class:"cap-head"},we={key:0,class:"cap-error"},ge=["disabled"],ye=["src"],be={class:"cap-foot","aria-label":"Community likes counters"},Ae={class:"cap-counters"},ke={class:"cap-counter"},xe={class:"cap-counter-value"},Se={class:"cap-counter"},We={class:"cap-counter-value"},Ee={class:"cap-counter"},Ie={class:"cap-counter-value"},Me={class:"cap-burst-layer","aria-hidden":"true"},ze=3,De={__name:"CommunityLikesCounter",props:{width:{type:String,default:"100%"},height:{type:String,default:"100%"},rowId:{type:String,default:"EiTake"},incrementRpc:{type:String,default:"increment_community_likes"},incrementAmount:{type:Number,default:1},heartSrc:{type:String,default:pe},useDirectUpdate:{type:Boolean,default:!1}},setup(F){const e=F,S=x(()=>({width:e.width,height:e.height})),r=b({total:0,daily_total:0,monthly_total:0}),g=b(!1),z=b(!1),y=b(""),A=b(""),D=["anim-bounce","anim-spin","anim-wiggle","anim-pop","anim-squash","anim-float"],L=b(!1),R=b([]);let m=1,M=[],I={x:null,y:null};const i=b(null),u=b([]);let c=!1,W=0;function k(){try{const o=[];for(let l=0;l<ze;l++){const d=new Audio(ve);d.preload="auto",d.volume=1,o.push(d)}u.value=o}catch{}}function w(){if(c||!u.value.length)return;const o=u.value;let l=0;for(const d of o)try{const tt=d.volume;d.volume=0,d.currentTime=0;const U=d.play();U&&typeof U.then=="function"&&U.then(()=>{d.pause(),d.currentTime=0,d.volume=tt,l++,l>=o.length&&(c=!0)}).catch(()=>{})}catch{}}function V(){const o=u.value;if(!o.length)return;const l=o[W];W=(W+1)%o.length;try{l.currentTime=0,l.play()}catch{}}function a(o){return Number(o??0).toLocaleString()}async function s(){y.value="";const{data:o,error:l}=await q.from("community_likes").select("total,daily_total,monthly_total").eq("id",e.rowId).single();if(l){y.value=`Failed to load community likes. (${l.message})`;return}r.value={total:Number(o?.total??0),daily_total:Number(o?.daily_total??0),monthly_total:Number(o?.monthly_total??0)},g.value=!0}function f(o){r.value.total=Number(r.value.total??0)+o,r.value.daily_total=Number(r.value.daily_total??0)+o,r.value.monthly_total=Number(r.value.monthly_total??0)+o}async function C(){if(!e.useDirectUpdate){const{error:l}=await q.rpc(e.incrementRpc,{p_id:e.rowId,p_amount:e.incrementAmount});if(l)throw l;return}const{error:o}=await q.from("community_likes").update({total:Number(r.value.total??0)}).eq("id",e.rowId);if(o)throw o}function j(){return D[Math.floor(Math.random()*D.length)]}function $(o){!o||L.value||(L.value=!0,A.value="",o.offsetWidth,A.value=j())}function K(o,l,d){return Math.max(l,Math.min(d,o))}function n(o){w(),o&&typeof o.clientX=="number"&&typeof o.clientY=="number"&&(I={x:o.clientX,y:o.clientY})}function _(){}function p(){L.value=!1,A.value=""}function T(o){if(o&&typeof o.clientX=="number"&&typeof o.clientY=="number")return{x:o.clientX,y:o.clientY};const l=i.value;if(l){const d=l.getBoundingClientRect();return{x:d.left+d.width/2,y:d.top+d.height/2}}return I.x!=null?{x:I.x,y:I.y}:{x:window.innerWidth/2,y:window.innerHeight/2}}function O(o,l){const d=10+Math.floor(Math.random()*5),tt=Date.now();for(let U=0;U<d;U++){const st=-Math.PI/2+Math.random()*Math.PI,at=35+Math.random()*65,mt=Math.cos(st)*at+(Math.random()*26-13),_t=Math.sin(st)*at-(45+Math.random()*70),ot=900+Math.floor(Math.random()*650),nt=2200+Math.floor(Math.random()*1500),rt=Math.floor(Math.random()*140),wt=10+Math.floor(Math.random()*14),gt=Math.floor(Math.random()*220-110),yt=(.45+Math.random()*.35).toFixed(2),it=`${tt}-${m++}-${U}`;R.value.push({id:it,x:o,y:l,dx:mt,dy:_t,rot:gt,durUp:ot,durFall:nt,delay:rt,size:wt,alpha:yt});const bt=window.setTimeout(()=>{const lt=R.value.findIndex(At=>At.id===it);lt!==-1&&R.value.splice(lt,1)},ot+nt+rt+160);M.push(bt)}}async function vt(o){if(z.value||!g.value)return;z.value=!0,y.value="",V();const l=T(o);O(K(l.x,0,window.innerWidth),K(l.y,0,window.innerHeight)),await Wt(),$(i.value),f(e.incrementAmount);try{await C()}catch(d){f(-e.incrementAmount),y.value=`Could not send like. (${d?.message||"Unknown error"})`}finally{z.value=!1}}return N(async()=>{k(),await s()}),pt(()=>{for(const o of M)window.clearTimeout(o);M=[];for(const o of u.value)try{o.pause(),o.src=""}catch{}u.value=[]}),(o,l)=>(h(),v("section",{class:"cap-root",style:H(S.value),onPointerdown:n},[t("div",me,[t("header",_e,[l[0]||(l[0]=t("p",{class:"cap-subtitle"},"Tap the heart to show some love!",-1)),l[1]||(l[1]=t("div",{class:"cap-micro"}," If EiTake has every been of help, click the heart to let us know! ",-1)),y.value?(h(),v("div",we,E(y.value),1)):X("",!0)]),t("button",{ref_key:"heartBtnEl",ref:i,class:St(["cap-heart-btn",[z.value?"is-busy":"",A.value]]),type:"button",disabled:z.value||!g.value,onClick:vt,onAnimationstart:_,onAnimationend:p,"aria-label":"Send a community like",title:"Send a like"},[t("img",{class:"cap-heart-img",src:e.heartSrc,alt:"",draggable:"false"},null,8,ye)],42,ge),t("footer",be,[t("div",Ae,[t("div",ke,[l[2]||(l[2]=t("div",{class:"cap-counter-label"},"Total Likes",-1)),t("div",xe,E(a(r.value.total)),1)]),t("div",Se,[l[3]||(l[3]=t("div",{class:"cap-counter-label"},"Today",-1)),t("div",We,E(a(r.value.daily_total)),1)]),t("div",Ee,[l[4]||(l[4]=t("div",{class:"cap-counter-label"},"This Month",-1)),t("div",Ie,E(a(r.value.monthly_total)),1)])])])]),t("div",Me,[(h(!0),v(Z,null,J(R.value,d=>(h(),v("span",{key:d.id,class:"cap-burst-heart",style:H({left:d.x+"px",top:d.y+"px","--dx":d.dx+"px","--dy":d.dy+"px","--rot":d.rot+"deg","--durUp":d.durUp+"ms","--durFall":d.durFall+"ms","--delay":d.delay+"ms","--size":d.size+"px","--alpha":d.alpha})}," ❤ ",4))),128))])],36))}},Re=G(De,[["__scopeId","data-v-3d867823"]]),Be={class:"dashboard"},Ce={class:"dashboard__content"},Le={class:"dashboard__grid","aria-label":"Dashboard sections"},He={class:"dashboard__card dashboard__card--wotd","aria-label":"Word of the Day"},Te={class:"dashboard__cardBody dashboard__cardBody--padded"},Fe={class:"dashboard__card dashboard__card--games","aria-label":"Games"},Oe={class:"dashboard__cardHead"},Ue={class:"dashboard__cardTitle"},Pe={class:"dashboard__cardBody"},Ve={class:"dashboard__card dashboard__card--teacherTools","aria-label":"Teacher Tools"},qe={class:"dashboard__cardHead"},Xe={class:"dashboard__cardTitle"},Ye={class:"dashboard__cardBody"},Ne={class:"dashboard__card dashboard__card--textbooks","aria-label":"Textbooks"},Ge={class:"dashboard__cardHead dashboard__cardHead--split"},je={class:"dashboard__cardTitle"},$e={class:"dashboard__headRight"},Ke={class:"dashboard__cardBody dashboard__cardBody--wall"},Ze={class:"dashboard__card dashboard__card--community","aria-label":"Community"},Je={class:"dashboard__cardBody"},Qe={class:"dashboard__footer","aria-label":"Footer"},ts={class:"dashboard__footerLeft"},es=Q({__name:"Dashboard",setup(F){const e=[{src:new URL("/TaiyakiEduGames/assets/lets-try-1-2018-DVefs5yw.png",import.meta.url).href},{src:new URL("/TaiyakiEduGames/assets/lets-try-2-2018-DQfTaW9M.png",import.meta.url).href},{src:new URL("/TaiyakiEduGames/assets/new-horizon-5-2024-BaGMM3ni.jpg",import.meta.url).href},{src:new URL("/TaiyakiEduGames/assets/new-horizon-6-2024-Bc9NvqnJ.jpg",import.meta.url).href},{src:new URL("/TaiyakiEduGames/assets/my-picture-dictionary-new-horizon-2024-r3dztHYG.jpg",import.meta.url).href},{src:new URL("/TaiyakiEduGames/assets/new-crown-1-2025-DTUBlV8S.png",import.meta.url).href},{src:new URL("/TaiyakiEduGames/assets/holidays-BVDa_wRL.png",import.meta.url).href}];return(S,r)=>{const g=Et("RouterLink");return h(),v("main",Be,[t("div",Ce,[t("section",Le,[t("section",He,[r[0]||(r[0]=t("header",{class:"dashboard__cardHead"},[t("h2",{class:"dashboard__cardTitle"},"Word of the Day")],-1)),t("div",Te,[B(Gt)])]),t("section",Fe,[t("header",Oe,[t("h2",Ue,[B(g,{class:"dashboard__titleLink",to:"/activities"},{default:P(()=>[...r[1]||(r[1]=[Y("Games",-1)])]),_:1})])]),t("div",Pe,[B(ht,{mode:"games",width:"100%",height:"100%"})])]),t("section",Ve,[t("header",qe,[t("h2",Xe,[B(g,{class:"dashboard__titleLink",to:"/activities"},{default:P(()=>[...r[2]||(r[2]=[Y("Teacher Tools",-1)])]),_:1})])]),t("div",Ye,[B(ht,{mode:"tools",width:"100%",height:"100%"})])]),t("section",Ne,[t("header",Ge,[t("h2",je,[B(g,{class:"dashboard__titleLink",to:"/textbooks"},{default:P(()=>[...r[3]||(r[3]=[Y("Textbooks & Flashcard Games",-1)])]),_:1})]),t("div",$e,[B(It,{"max-height":30,scale:.7})])]),t("div",Ke,[B(te,{images:e,"tile-width":200,"tile-height":300,gap:0,"speed-px-per-sec":30,direction:"left","visible-count":5,draggable:!0})])]),t("section",Ze,[r[4]||(r[4]=t("header",{class:"dashboard__cardHead"},[t("h2",{class:"dashboard__cardTitle"},"Community")],-1)),t("div",Je,[B(Re)])])])]),t("footer",Qe,[t("div",ts,[B(g,{class:"dashboard__footerLink",to:"/terms"},{default:P(()=>[...r[5]||(r[5]=[Y("Terms of Service",-1)])]),_:1}),r[7]||(r[7]=t("span",{class:"dashboard__footerDot","aria-hidden":"true"},"•",-1)),B(g,{class:"dashboard__footerLink",to:"/privacy-policy"},{default:P(()=>[...r[6]||(r[6]=[Y("Privacy Policy",-1)])]),_:1})]),r[8]||(r[8]=t("div",{class:"dashboard__footerRight"},[t("a",{class:"dashboard__brandLink",href:"https://griffiigames.com",target:"_blank",rel:"noopener noreferrer"}," Griffii Games ")],-1))])])}}}),as=G(es,[["__scopeId","data-v-6e5d69c1"]]);export{as as default};
