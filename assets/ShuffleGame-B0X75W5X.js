import{i as Re,S as ze,r as l,c as Ae,j as ne,o as Te,a as p,d as n,h as E,p as fe,k as We,v as Ge,T as Pe,t as J,f as v,F as Xe,e as Fe,L as Qe,u as Le,b as h,n as Oe,_ as je}from"./index-Dl2g_tZF.js";const Ze={class:"shuffle-game-page"},Je={class:"game-header","aria-label":"Game header"},qe=["src"],Ke=["aria-expanded"],_e=["src"],$e={key:0,id:"settings-menu",class:"settings-dropdown",role:"menu"},et={class:"menu-block"},tt={class:"block-buttons two"},At={class:"menu-block"},nt={class:"block-buttons three"},st={class:"menu-block"},at={class:"block-buttons three"},ot={class:"menu-block"},lt={class:"settings-actions bottom"},it=["disabled"],ut=["disabled"],rt={key:0,class:"target-wrap"},ct={class:"target-card-shell"},dt={class:"target-card"},vt={class:"target-front"},ft={class:"card-media"},mt=["src","alt"],gt={key:0,class:"card-text"},pt={class:"controls"},ht=["disabled"],bt=["disabled"],yt={class:"stage-wrap"},kt=["aria-pressed","onClick"],Vt={class:"card-inner"},wt={class:"card-front"},Ct={class:"card-media"},Dt=["src","alt"],St={key:0,class:"card-text"},It={key:1,class:"empty-state"},me="eitake.shufflegame.transit.v1",w=170,ge=230,Mt=Re({__name:"ShuffleGame",props:{cards:{},modeDefault:{default:"practice"},countDefault:{default:3},showEnglishDefault:{type:Boolean,default:!0}},setup(pe){const C=pe,he=Le(),R=ze(),be=new URL("data:image/png;base64,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",import.meta.url).toString(),ye=new URL("/TaiyakiEduGames/assets/settings-icon-yUop-EjA.png",import.meta.url).toString(),ke=new URL("/TaiyakiEduGames/assets/repeating-fans-green-3FKIQgry.jpg",import.meta.url).toString(),z=new Audio(new URL("/TaiyakiEduGames/assets/Wood_Block-B0qGLkpH.ogg",import.meta.url).toString()),se=new Audio(new URL("data:audio/mpeg;base64,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",import.meta.url).toString()),ae=new Audio(new URL("/TaiyakiEduGames/assets/fanfare-C8oL-oxy.mp3",import.meta.url).toString()),oe=new Audio(new URL("/TaiyakiEduGames/assets/drum-roll-CjHty_xX.mp3",import.meta.url).toString());[z,se,ae,oe].forEach(e=>e.preload="auto");function D(e){try{e.pause(),e.currentTime=0,e.play()}catch{}}function Ve(e){try{sessionStorage.setItem(me,JSON.stringify(e))}catch{}}function we(){try{const e=sessionStorage.getItem(me);if(!e)return;const t=JSON.parse(e);Array.isArray(t?.cards)&&t.cards.length&&R.set({cards:t.cards})}catch{}}const b=l(!1),le=l(null),c=l(C.modeDefault),x=l(ie(C.countDefault)),S=l(C.showEnglishDefault),V=l("fast"),I=l(c.value),y=l(x.value),k=l(V.value);function ie(e){return e===5?5:e===7?7:3}function Ce(){b.value=!b.value,b.value&&(I.value=c.value,y.value=x.value,k.value=V.value)}function q(){b.value=!1}function De(){c.value=I.value,x.value=ie(y.value),V.value=k.value,q(),O()}const U=l([]),o=l([]),f=l("idle"),m=l(!1),g=l(null),B=l(null),M=l(!1),T=Ae(()=>g.value?o.value.find(e=>e.id===g.value)??null:null),ue=Ae(()=>m.value||!o.value.length?!1:c.value==="practice"?f.value==="resolved":c.value==="game"?f.value==="guess"&&!M.value:!1),Se=Ae(()=>f.value==="idle"||f.value==="showing"?"Shuffle":f.value==="shuffling"?"Shuffling...":"Shuffle again"),Y=l(null),W=l(0),G=l(0);let P=null;function K(){const e=Y.value;if(!e)return;const t=e.getBoundingClientRect();W.value=t.width,G.value=t.height}function Ie(e){const t=W.value||1200,A=G.value||680,a=10,u=A*.56,r=Math.max(380,t-a*2),j=20,Z=e*w+(e-1)*j<=r?j:Math.max(8,Math.floor((r-e*w)/Math.max(1,e-1))),ee=e*w+(e-1)*Z,i=(t-ee)/2+w/2,s=[];for(let d=0;d<e;d++)s.push({x:i+d*(w+Z),y:u});return s}function re(e,t,A){return Math.max(t,Math.min(A,e))}function Me(){const e=W.value||1200,t=G.value||680,A=w*.55,a=Math.max(A,e-w*.55),u=ge*.45,r=Math.max(u,t-ge*.55);return{x:re(Math.random()*e,A,a),y:re(Math.random()*t,u,r)}}function Ee(e){const t=Ie(o.value.length||x.value),A=typeof e.spotIndex=="number"&&e.spotIndex>=0,a=A?t[e.spotIndex]:null,u=A?a?.x:e.tempX,r=A?a?.y:e.tempY;return{left:`${u??W.value/2}px`,top:`${r??G.value/2}px`,zIndex:10+(e.spotIndex??0),"--back-texture":`url("${ke}")`}}function X(e){return new Promise(t=>setTimeout(t,e))}function F(e){return e[Math.floor(Math.random()*e.length)]}function _(e){for(let t=e.length-1;t>0;t--){const A=Math.floor(Math.random()*(t+1));[e[t],e[A]]=[e[A],e[t]]}return e}function xe(){return V.value==="easy"?{tickMs:240,moveMs:520}:V.value==="impossible"?{tickMs:70,moveMs:140}:{tickMs:130,moveMs:260}}function ce(e){const t=new Set;for(const A of o.value)e&&A.id===e||typeof A.spotIndex=="number"&&t.add(A.spotIndex);return t}function Q(){const e=o.value.length,t=ce(),A=[];for(let a=0;a<e;a++)t.has(a)||A.push(a);return A}function H(e,t){return ce(e.id).has(t)?!1:(e.spotIndex=t,e.tempX=null,e.tempY=null,!0)}function L(e){const t=Me();e.spotIndex=null,e.tempX=t.x,e.tempY=t.y}async function Ue(){if(!o.value.length)return;m.value=!0,f.value="shuffling",B.value=null,M.value=!1,c.value==="game"?g.value||(g.value=F(o.value).id):g.value=null,D(z),o.value.forEach(i=>i.isFaceDown=!0),await X(220),D(oe);const{tickMs:e,moveMs:t}=xe(),A=performance.now()+3e3,a=new Set;let u=null;const r=_([...o.value.map(i=>i.id)]);function j(){if(r.length){if(r[0]!==u)return r.shift();const s=r.findIndex(d=>d!==u);if(s>=0){const[d]=r.splice(s,1);return d}return r.shift()}const i=o.value.filter(s=>s.id!==u);return i.length?F(i).id:F(o.value).id}for(;performance.now()<A;){const i=j(),s=o.value.find(N=>N.id===i);if(!s){await X(e);continue}const d=Q();if(s.spotIndex===null)if(d.length>0){const N=d[Math.floor(Math.random()*d.length)];if(!H(s,N)){const te=Q(),ve=te.length?te[Math.floor(Math.random()*te.length)]:null;typeof ve=="number"&&H(s,ve)}}else L(s);else if(d.length===0)L(s);else if(Math.random()<.5){const N=d[Math.floor(Math.random()*d.length)];H(s,N)||L(s)}else L(s);a.add(s.id),u=s.id,await X(e)}const $=Q(),Z=o.value.filter(i=>i.spotIndex===null);_($);for(const i of Z){const s=$.shift();typeof s=="number"&&H(i,s)}const ee=Q();for(const i of o.value)if(i.spotIndex===null){const s=ee.shift();typeof s=="number"&&H(i,s)}await X(Math.max(120,t)),f.value=c.value==="game"?"guess":"resolved",m.value=!1}async function Be(){m.value||o.value.length&&await Ue()}function Ye(e){if(!ue.value)return;if(c.value==="practice"){D(z),e.isFaceDown=!1;return}if(c.value!=="game"||f.value!=="guess"||M.value)return;B.value=e.id,D(z),e.isFaceDown=!1,e.id===g.value?(M.value=!0,D(ae),f.value="resolved"):D(se)}function O(){if(m.value||!U.value.length)return;const e=_([...U.value]),t=Math.min(x.value,e.length),A=e.slice(0,t).map((a,u)=>({...a,key:`${a.id}-${Math.random().toString(16).slice(2)}`,spotIndex:u,isFaceDown:!1,tempX:null,tempY:null}));o.value=A,g.value=c.value==="game"?F(A).id:null,B.value=null,M.value=!1,f.value="showing",Qe(()=>K())}function de(e){return e.english||e.japanese?.kanji||"flashcard"}function He(){try{he.back()}catch{}}return ne(()=>{we();const e=Array.isArray(C.cards)&&C.cards.length?C.cards:null,t=Array.isArray(R.cards)&&R.cards.length?R.cards:null,A=e??t??[];U.value=A,A.length&&Ve({cards:A}),K(),Y.value&&(P=new ResizeObserver(()=>K()),P.observe(Y.value));const a=u=>{if(!b.value)return;const r=le.value;r&&u.target instanceof Node&&!r.contains(u.target)&&q()};document.addEventListener("mousedown",a),ne._shuffle_onDocClick=a,U.value.length&&O()}),Te(()=>{P&&Y.value&&P.disconnect();const e=ne._shuffle_onDocClick;e&&document.removeEventListener("mousedown",e)}),(e,t)=>(h(),p("section",Ze,[n("header",Je,[n("button",{class:"home-button",type:"button",onClick:He,"aria-label":"Back"},[n("img",{src:fe(be),alt:""},null,8,qe)]),n("div",{class:"settings-wrap",ref_key:"settingsWrap",ref:le},[n("button",{class:"settings-button",type:"button",onClick:Ce,"aria-haspopup":"menu","aria-expanded":b.value,"aria-controls":"settings-menu"},[n("img",{src:fe(ye),alt:""},null,8,_e)],8,Ke),b.value?(h(),p("div",{key:0,class:"settings-backdrop",onClick:q,"aria-hidden":"true"})):E("",!0),We(Pe,{name:"settings-drop"},{default:Ge(()=>[b.value?(h(),p("div",$e,[t[13]||(t[13]=n("h3",{class:"settings-title"},"Shuffle Settings",-1)),n("div",et,[t[9]||(t[9]=n("div",{class:"block-label"},"Mode",-1)),n("div",tt,[n("button",{class:v(["btn ghost",{active:I.value==="practice"}]),type:"button",onClick:t[0]||(t[0]=A=>I.value="practice")}," Practice ",2),n("button",{class:v(["btn ghost",{active:I.value==="game"}]),type:"button",onClick:t[1]||(t[1]=A=>I.value="game")}," Game ",2)])]),n("div",At,[t[10]||(t[10]=n("div",{class:"block-label"},"Cards",-1)),n("div",nt,[n("button",{class:v(["btn ghost",{active:y.value===3}]),type:"button",onClick:t[2]||(t[2]=A=>y.value=3)}," 3 ",2),n("button",{class:v(["btn ghost",{active:y.value===5}]),type:"button",onClick:t[3]||(t[3]=A=>y.value=5)}," 5 ",2),n("button",{class:v(["btn ghost",{active:y.value===7}]),type:"button",onClick:t[4]||(t[4]=A=>y.value=7)}," 7 ",2)])]),n("div",st,[t[11]||(t[11]=n("div",{class:"block-label"},"Shuffle speed",-1)),n("div",at,[n("button",{class:v(["btn ghost",{active:k.value==="easy"}]),type:"button",onClick:t[5]||(t[5]=A=>k.value="easy")}," Easy ",2),n("button",{class:v(["btn ghost",{active:k.value==="fast"}]),type:"button",onClick:t[6]||(t[6]=A=>k.value="fast")}," Fast ",2),n("button",{class:v(["btn ghost",{active:k.value==="impossible"}]),type:"button",onClick:t[7]||(t[7]=A=>k.value="impossible")}," Impossible ",2)])]),n("div",ot,[t[12]||(t[12]=n("div",{class:"block-label"},"English",-1)),n("button",{class:v(["btn toggle full",{off:!S.value}]),type:"button",onClick:t[8]||(t[8]=A=>S.value=!S.value)}," English: "+J(S.value?"ON":"OFF"),3)]),n("div",lt,[n("button",{class:"btn ghost",type:"button",onClick:O,disabled:m.value},"Reset",8,it),n("button",{class:"btn primary",type:"button",onClick:De,disabled:m.value},"Apply",8,ut)])])):E("",!0)]),_:1})],512)]),c.value==="game"&&T.value?(h(),p("div",rt,[t[14]||(t[14]=n("div",{class:"target-label"},"Find this card",-1)),n("div",ct,[n("div",dt,[n("div",vt,[n("div",ft,[n("img",{class:"card-img",src:T.value.image_url,alt:de(T.value),decoding:"async"},null,8,mt)]),S.value?(h(),p("div",gt,J(T.value.english),1)):E("",!0)])])])])):E("",!0),n("div",pt,[n("button",{class:"btn primary",type:"button",onClick:Be,disabled:m.value||o.value.length===0},J(Se.value),9,ht),n("button",{class:"btn ghost",type:"button",onClick:O,disabled:m.value||U.value.length===0}," New cards ",8,bt)]),n("div",yt,[n("div",{ref_key:"stageEl",ref:Y,class:v(["stage",{busy:m.value,impossible:V.value==="impossible",easy:V.value==="easy"}])},[(h(!0),p(Xe,null,Fe(o.value,A=>(h(),p("div",{key:A.key,class:v(["card",{revealed:A.isFaceDown,"can-click":ue.value,"correct-hit":c.value==="game"&&A.id===g.value&&!A.isFaceDown,"wrong-pick":c.value==="game"&&A.id===B.value&&B.value!==g.value&&!A.isFaceDown,bounce:c.value==="game"&&M.value&&A.id===g.value}]),style:Oe(Ee(A)),role:"button","aria-pressed":!A.isFaceDown,onClick:a=>Ye(A)},[n("div",Vt,[n("div",wt,[n("div",Ct,[n("img",{class:"card-img",src:A.image_url,alt:de(A),decoding:"async"},null,8,Dt)]),S.value?(h(),p("div",St,J(A.english),1)):E("",!0)]),t[15]||(t[15]=n("div",{class:"card-back"},null,-1))])],14,kt))),128))],2)]),o.value.length?E("",!0):(h(),p("div",It," No cards available. Open this game from a deck so it can hydrate cards. "))]))}}),xt=je(Mt,[["__scopeId","data-v-a1fabd7f"]]);export{xt as default};
