import{d as Xt,W as Ft,r as i,c as ot,o as lt,Q as ht,g as Qt,a as w,b as n,e as R,B as bt,v as Lt,w as Ot,T as Zt,t as $,p as g,F as jt,h as Jt,q as qt,u as Kt,f as V,n as _t,_ as $t}from"./index-ByczhbZr.js";const te={class:"shuffle-game-page"},ee={class:"game-header","aria-label":"Game header"},Ae=["src"],ne=["aria-expanded"],ae=["src"],se={key:0,id:"settings-menu",class:"settings-dropdown",role:"menu"},oe={class:"menu-block"},le={class:"block-buttons two"},ie={class:"menu-block"},ue={class:"block-buttons three"},re={class:"menu-block"},ce={class:"block-buttons three"},de={class:"menu-block"},fe={class:"settings-actions bottom"},ve=["disabled"],me=["disabled"],pe={key:0,class:"target-wrap"},ge={class:"target-card-shell"},he={class:"target-card"},be={class:"target-front"},ye={class:"card-media"},we=["src","alt"],Ve={key:0,class:"card-text"},ke={class:"controls"},Me=["disabled"],Ce=["disabled"],xe={class:"stage-wrap"},De=["aria-pressed","onClick"],Ie={class:"card-inner"},Se={class:"card-front"},Ee={class:"card-media"},He=["src","alt"],Ue={key:0,class:"card-text"},Be={key:1,class:"empty-state"},yt="eitake.shufflegame.transit.v1",We=Xt({__name:"ShuffleGame",props:{cards:{},modeDefault:{default:"practice"},countDefault:{default:3},showEnglishDefault:{type:Boolean,default:!0}},setup(wt){const D=wt,Vt=Kt(),H=Ft(),kt=new URL("data:image/png;base64,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",import.meta.url).toString(),Mt=new URL("/TaiyakiEduGames/assets/settings-icon-yUop-EjA.png",import.meta.url).toString(),Ct=new URL("/TaiyakiEduGames/assets/repeating-fans-green-3FKIQgry.jpg",import.meta.url).toString(),L=new Audio(new URL("/TaiyakiEduGames/assets/Wood_Block-B0qGLkpH.ogg",import.meta.url).toString()),it=new Audio(new URL("data:audio/mpeg;base64,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",import.meta.url).toString()),ut=new Audio(new URL("/TaiyakiEduGames/assets/fanfare-C8oL-oxy.mp3",import.meta.url).toString()),rt=new Audio(new URL("/TaiyakiEduGames/assets/drum-roll-CjHty_xX.mp3",import.meta.url).toString());[L,it,ut,rt].forEach(t=>t.preload="auto");function U(t){try{t.pause(),t.currentTime=0,t.play()}catch{}}function xt(t){try{sessionStorage.setItem(yt,JSON.stringify(t))}catch{}}function Dt(){try{const t=sessionStorage.getItem(yt);if(!t)return;const e=JSON.parse(t);Array.isArray(e?.cards)&&e.cards.length&&H.set({cards:e.cards})}catch{}}const k=i(!1),ct=i(null),d=i(D.modeDefault),I=i(dt(D.countDefault)),B=i(D.showEnglishDefault),S=i("fast"),W=i(d.value),M=i(I.value),C=i(S.value);function dt(t){return t===5?5:t===7?7:3}function It(){k.value=!k.value,k.value&&(W.value=d.value,M.value=I.value,C.value=S.value)}function tt(){k.value=!1}function St(){d.value=W.value,I.value=dt(M.value),S.value=C.value,tt(),_()}const z=i([]),l=i([]),h=i("idle"),b=i(!1),y=i(null),T=i(null),Y=i(!1),O=ot(()=>y.value?l.value.find(t=>t.id===y.value)??null:null),ft=ot(()=>b.value||!l.value.length?!1:d.value==="practice"?h.value==="resolved":d.value==="game"?h.value==="guess"&&!Y.value:!1),Et=ot(()=>h.value==="idle"||h.value==="showing"?"Shuffle":h.value==="shuffling"?"Shuffling...":"Shuffle again"),G=i(null),P=i(0),X=i(0);let Z=null;const et=i(170),At=i(230);function x(t,e,A){return Math.max(e,Math.min(A,t))}function Ht(t,e){return e>=1200?t===3?30:t===5?22:16:e>=900?t===3?24:t===5?18:14:t===3?16:t===5?14:12}function vt(t,e,A){const o=Math.max(320,e-48),r=Ht(t,e),c=t===3?260:t===5?210:185,f=Math.floor((o-(t-1)*r)/t),m=Math.floor(Math.max(240,A*.78)),u=Math.floor(m*170/230),s=Math.max(140,Math.min(f,u)),p=x(c,t===3?165:t===5?150:140,s),E=Math.round(p*(230/170));return{w:p,h:E,gap:r}}function Ut(t,e){const A=Math.round(x(t*.06,10,16)),a=Math.round(x(e*.03,8,14)),o=Math.round(x(e*.26,56,92)),r=Math.max(92,e-A*2-o-a),c=Math.round(x(t*.085,14,20)),f=Math.round(x(c*1.12,16,24));return{pad:A,gap:a,textBand:o,mediaH:r,font:c,line:f}}function Bt(){const t=l.value.length||I.value,e=P.value||1200,A=X.value||680,a=vt(t,e,A);et.value=a.w,At.value=a.h}function nt(){const t=G.value;if(!t)return;const e=t.getBoundingClientRect();P.value=e.width,X.value=e.height,Bt()}function Wt(t){const e=P.value||1200,A=X.value||680,a=10,o=A*.56,{w:r,gap:c}=vt(t,e,A),f=Math.max(380,e-a*2),u=t*r+(t-1)*c<=f?c:Math.max(8,Math.floor((f-t*r)/Math.max(1,t-1))),s=t*r+(t-1)*u,v=(e-s)/2+r/2,p=[];for(let E=0;E<t;E++)p.push({x:v+E*(r+u),y:o});return p}function Yt(){const t=P.value||1200,e=X.value||680,A=et.value,a=At.value,o=A*.55,r=Math.max(o,t-A*.55),c=a*.45,f=Math.max(c,e-a*.55);return{x:x(Math.random()*t,o,r),y:x(Math.random()*e,c,f)}}function Nt(t){const e=Wt(l.value.length||I.value),A=typeof t.spotIndex=="number"&&t.spotIndex>=0,a=A?e[t.spotIndex]:null,o=A?a?.x:t.tempX,r=A?a?.y:t.tempY,c=et.value,f=At.value,m=Ut(c,f);return{left:`${o??P.value/2}px`,top:`${r??X.value/2}px`,zIndex:10+(t.spotIndex??0),"--back-texture":`url("${Ct}")`,"--card-w":`${c}px`,"--card-h":`${f}px`,"--card-pad":`${m.pad}px`,"--card-gap":`${m.gap}px`,"--text-band":`${m.textBand}px`,"--media-h":`${m.mediaH}px`,"--text-size":`${m.font}px`,"--text-line":`${m.line}px`}}function j(t){return new Promise(e=>setTimeout(e,t))}function J(t){return t[Math.floor(Math.random()*t.length)]}function at(t){for(let e=t.length-1;e>0;e--){const A=Math.floor(Math.random()*(e+1));[t[e],t[A]]=[t[A],t[e]]}return t}function Rt(){return S.value==="easy"?{tickMs:240,moveMs:520}:S.value==="impossible"?{tickMs:70,moveMs:140}:{tickMs:130,moveMs:260}}function mt(t){const e=new Set;for(const A of l.value)t&&A.id===t||typeof A.spotIndex=="number"&&e.add(A.spotIndex);return e}function q(){const t=l.value.length,e=mt(),A=[];for(let a=0;a<t;a++)e.has(a)||A.push(a);return A}function F(t,e){return mt(t.id).has(e)?!1:(t.spotIndex=e,t.tempX=null,t.tempY=null,!0)}function K(t){const e=Yt();t.spotIndex=null,t.tempX=e.x,t.tempY=e.y}async function zt(){if(!l.value.length)return;b.value=!0,h.value="shuffling",T.value=null,Y.value=!1,d.value==="game"?y.value||(y.value=J(l.value).id):y.value=null,U(L),l.value.forEach(u=>u.isFaceDown=!0),await j(220),U(rt);const{tickMs:t,moveMs:e}=Rt(),A=performance.now()+3e3;let a=null;const o=at([...l.value.map(u=>u.id)]);function r(){if(o.length){if(o[0]!==a)return o.shift();const s=o.findIndex(v=>v!==a);if(s>=0){const[v]=o.splice(s,1);return v}return o.shift()}const u=l.value.filter(s=>s.id!==a);return u.length?J(u).id:J(l.value).id}for(;performance.now()<A;){const u=r(),s=l.value.find(p=>p.id===u);if(!s){await j(t);continue}const v=q();if(s.spotIndex===null)if(v.length>0){const p=v[Math.floor(Math.random()*v.length)];if(!F(s,p)){const st=q(),gt=st.length?st[Math.floor(Math.random()*st.length)]:null;typeof gt=="number"&&F(s,gt)}}else K(s);else if(v.length===0)K(s);else if(Math.random()<.5){const p=v[Math.floor(Math.random()*v.length)];F(s,p)||K(s)}else K(s);a=s.id,await j(t)}const c=q(),f=l.value.filter(u=>u.spotIndex===null);at(c);for(const u of f){const s=c.shift();typeof s=="number"&&F(u,s)}const m=q();for(const u of l.value)if(u.spotIndex===null){const s=m.shift();typeof s=="number"&&F(u,s)}await j(Math.max(120,e)),h.value=d.value==="game"?"guess":"resolved",b.value=!1}async function Tt(){b.value||l.value.length&&await zt()}function Gt(t){if(!ft.value)return;if(d.value==="practice"){U(L),t.isFaceDown=!1;return}if(d.value!=="game"||h.value!=="guess"||Y.value)return;T.value=t.id,U(L),t.isFaceDown=!1,t.id===y.value?(Y.value=!0,U(ut),h.value="resolved"):U(it)}function _(){if(b.value||!z.value.length)return;const t=at([...z.value]),e=Math.min(I.value,t.length),A=t.slice(0,e).map((a,o)=>({...a,key:`${a.id}-${Math.random().toString(16).slice(2)}`,spotIndex:o,isFaceDown:!1,tempX:null,tempY:null}));l.value=A,y.value=d.value==="game"?J(A).id:null,T.value=null,Y.value=!1,h.value="showing",qt(()=>nt())}function pt(t){return t.english||t.japanese?.kanji||"flashcard"}function Pt(){try{Vt.back()}catch{}}function N(t){return Array.isArray(t)&&t.length>0}function Q(t){z.value=t,xt({cards:t}),z.value.length&&_()}return lt(()=>{const t=N(D.cards)?D.cards:null,e=N(H.cards)?H.cards:null;if(t)Q(t);else if(e)Q(e);else{Dt();const a=N(H.cards)?H.cards:[];a.length&&Q(a)}nt(),G.value&&(Z=new ResizeObserver(()=>nt()),Z.observe(G.value));const A=a=>{if(!k.value)return;const o=ct.value;o&&a.target instanceof Node&&!o.contains(a.target)&&tt()};document.addEventListener("mousedown",A),lt._shuffle_onDocClick=A}),ht(()=>D.cards,t=>{N(t)&&Q(t)}),ht(()=>H.cards,t=>{!N(D.cards)&&N(t)&&Q(t)}),Qt(()=>{Z&&G.value&&Z.disconnect();const t=lt._shuffle_onDocClick;t&&document.removeEventListener("mousedown",t)}),(t,e)=>(V(),w("section",te,[n("header",ee,[n("button",{class:"home-button",type:"button",onClick:Pt,"aria-label":"Back"},[n("img",{src:bt(kt),alt:""},null,8,Ae)]),n("div",{class:"settings-wrap",ref_key:"settingsWrap",ref:ct},[n("button",{class:"settings-button",type:"button",onClick:It,"aria-haspopup":"menu","aria-expanded":k.value,"aria-controls":"settings-menu"},[n("img",{src:bt(Mt),alt:""},null,8,ae)],8,ne),k.value?(V(),w("div",{key:0,class:"settings-backdrop",onClick:tt,"aria-hidden":"true"})):R("",!0),Lt(Zt,{name:"settings-drop"},{default:Ot(()=>[k.value?(V(),w("div",se,[e[13]||(e[13]=n("h3",{class:"settings-title"},"Shuffle Settings",-1)),n("div",oe,[e[9]||(e[9]=n("div",{class:"block-label"},"Mode",-1)),n("div",le,[n("button",{class:g(["btn ghost",{active:W.value==="practice"}]),type:"button",onClick:e[0]||(e[0]=A=>W.value="practice")}," Practice ",2),n("button",{class:g(["btn ghost",{active:W.value==="game"}]),type:"button",onClick:e[1]||(e[1]=A=>W.value="game")}," Game ",2)])]),n("div",ie,[e[10]||(e[10]=n("div",{class:"block-label"},"Cards",-1)),n("div",ue,[n("button",{class:g(["btn ghost",{active:M.value===3}]),type:"button",onClick:e[2]||(e[2]=A=>M.value=3)},"3",2),n("button",{class:g(["btn ghost",{active:M.value===5}]),type:"button",onClick:e[3]||(e[3]=A=>M.value=5)},"5",2),n("button",{class:g(["btn ghost",{active:M.value===7}]),type:"button",onClick:e[4]||(e[4]=A=>M.value=7)},"7",2)])]),n("div",re,[e[11]||(e[11]=n("div",{class:"block-label"},"Shuffle speed",-1)),n("div",ce,[n("button",{class:g(["btn ghost",{active:C.value==="easy"}]),type:"button",onClick:e[5]||(e[5]=A=>C.value="easy")}," Easy ",2),n("button",{class:g(["btn ghost",{active:C.value==="fast"}]),type:"button",onClick:e[6]||(e[6]=A=>C.value="fast")}," Fast ",2),n("button",{class:g(["btn ghost",{active:C.value==="impossible"}]),type:"button",onClick:e[7]||(e[7]=A=>C.value="impossible")}," Impossible ",2)])]),n("div",de,[e[12]||(e[12]=n("div",{class:"block-label"},"English",-1)),n("button",{class:g(["btn toggle full",{off:!B.value}]),type:"button",onClick:e[8]||(e[8]=A=>B.value=!B.value)}," English: "+$(B.value?"ON":"OFF"),3)]),n("div",fe,[n("button",{class:"btn ghost",type:"button",onClick:_,disabled:b.value},"Reset",8,ve),n("button",{class:"btn primary",type:"button",onClick:St,disabled:b.value},"Apply",8,me)])])):R("",!0)]),_:1})],512)]),d.value==="game"&&O.value?(V(),w("div",pe,[e[14]||(e[14]=n("div",{class:"target-label"},"Find this card",-1)),n("div",ge,[n("div",he,[n("div",be,[n("div",ye,[n("img",{class:"card-img",src:O.value.image_url,alt:pt(O.value),decoding:"async"},null,8,we)]),B.value?(V(),w("div",Ve,$(O.value.english),1)):R("",!0)])])])])):R("",!0),n("div",ke,[n("button",{class:"btn primary",type:"button",onClick:Tt,disabled:b.value||l.value.length===0},$(Et.value),9,Me),n("button",{class:"btn ghost",type:"button",onClick:_,disabled:b.value||z.value.length===0}," New cards ",8,Ce)]),n("div",xe,[n("div",{ref_key:"stageEl",ref:G,class:g(["stage",[{busy:b.value,impossible:S.value==="impossible",easy:S.value==="easy"},`cards-${l.value.length||I.value}`]])},[(V(!0),w(jt,null,Jt(l.value,A=>(V(),w("div",{key:A.key,class:g(["card",{revealed:A.isFaceDown,"can-click":ft.value,"correct-hit":d.value==="game"&&A.id===y.value&&!A.isFaceDown,"wrong-pick":d.value==="game"&&A.id===T.value&&T.value!==y.value&&!A.isFaceDown,bounce:d.value==="game"&&Y.value&&A.id===y.value}]),style:_t(Nt(A)),role:"button","aria-pressed":!A.isFaceDown,onClick:a=>Gt(A)},[n("div",Ie,[n("div",Se,[n("div",Ee,[n("img",{class:"card-img",src:A.image_url,alt:pt(A),decoding:"async"},null,8,He)]),B.value?(V(),w("div",Ue,$(A.english),1)):R("",!0)]),e[15]||(e[15]=n("div",{class:"card-back"},null,-1))])],14,De))),128))],2)]),l.value.length?R("",!0):(V(),w("div",Be," No cards available. Open this game from a deck so it can hydrate cards. "))]))}}),Ne=$t(We,[["__scopeId","data-v-258edc1e"]]);export{Ne as default};
