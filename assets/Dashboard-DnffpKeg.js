import{d as tt,r as _,c as b,o as $,w as St,a as ot,b as p,e,t as S,f as G,n as F,g as K,s as Y,h as u,_ as Z,F as J,i as Q,j as ft,k as N,l as ht,m as Mt,u as Et,p as st,q as pt,v as zt,x as T,y as It,C as Rt,z as j}from"./index-BKV_-VsF.js";const Dt={class:"dw-root","aria-label":"Daily Word"},Bt={class:"dw-top"},Ct={class:"dw-date"},Lt={key:0,class:"dw-body"},Ht={key:1,class:"dw-body"},Tt={key:0,class:"dw-pos"},Ft={class:"dw-def"},Ot={class:"dw-error-msg"},Pt={class:"dw-foot"},Ut={class:"dw-source"},Vt={key:2,class:"dw-body"},qt={key:0,class:"dw-pos"},Xt={class:"dw-def"},Nt={class:"dw-foot"},Yt={class:"dw-source"},at=34,vt=16,Gt=tt({__name:"DailyWord",setup(U){const s={provider:"Local fallback",date:null,word:"Broken",definition:"This website is broken, and the dev should fix it soon.",partOfSpeech:null},x=_(!0),i=_(null),w=_(null);function I(t){return new Date(t+"T00:00:00").toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}const y=["noun","verb","adjective","adverb","pronoun","preposition","conjunction","interjection","determiner","article"];function A(t){return t.replace(/\s+/g," ").trim()}function R(t){return t&&t.charAt(0).toUpperCase()+t.slice(1)}function O(t){const o=t.toLowerCase();for(const l of y)if(new RegExp(`\\b${l}\\b\\s*[:–—-]`,"i").test(t))return R(l);for(const l of y)if(new RegExp(`\\(\\s*${l}\\s*\\)`,"i").test(t))return R(l);for(const l of y)if(new RegExp(`\\b${l}\\b`,"i").test(o))return R(l);return null}function L(t,o){let l=t;if(o){const W=o.toLowerCase(),C=l.toLowerCase().search(new RegExp(`\\b${W}\\b\\s*[:–—-]`));C>=0&&(l=l.slice(C).replace(new RegExp(`^.*?\\b${W}\\b\\s*[:–—-]\\s*`,"i"),"")||l)}l=l.replace(/^\s*(definition|meaning)\s*[:–—-]\s*/i,"");const k=l.split(new RegExp("(?<=[.!?])\\s+")).map(W=>A(W)).filter(Boolean);if(!k.length)return A(l)||null;for(const W of k)if(W.length>=12&&W.length<=300)return W;return k[0]||null}const f=b(()=>{const t=w.value;if(t){const o=t.summary?A(t.summary):"",l=t.partOfSpeech??(o?O(o):null)??null,k=t.definition??(o?L(o,l):null)??null;return{provider:t.provider||"Wordsmith — A Word A Day",date:t.date,word:t.word||s.word,pos:l,definition:k||s.definition}}return{provider:s.provider,date:s.date,word:s.word,pos:s.partOfSpeech,definition:s.definition}}),M=b(()=>f.value.date?I(f.value.date):"—"),g=_(null),z=_(at),E=b(()=>({fontSize:`${z.value}px`}));let D=null,B=0;function H(){B&&(cancelAnimationFrame(B),B=0)}function m(){H(),B=requestAnimationFrame(()=>{V()})}async function V(){const t=g.value;if(!t||(z.value=at,await K(),t.scrollWidth<=t.clientWidth))return;let l=vt,k=at,W=vt;for(;l<=k;){const C=Math.floor((l+k)/2);z.value=C,await K(),t.scrollWidth<=t.clientWidth?(W=C,l=C+1):k=C-1}z.value=W}async function a(){x.value=!0,i.value=null;try{const{data:t,error:o}=await Y.functions.invoke("daily-word",{method:"GET"});if(o)throw o;const l=t;if(!l||typeof l.word!="string")throw new Error("Malformed response from daily-word function.");w.value=l}catch(t){const o=t?.message||t?.details||(typeof t=="string"?t:"Unknown error");i.value=o,w.value=null}finally{x.value=!1,await K(),m()}}return $(()=>{a(),D=new ResizeObserver(()=>m()),g.value&&D.observe(g.value)}),St(()=>f.value.word,async()=>{await K(),m()}),ot(()=>{H(),D&&(D.disconnect(),D=null)}),(t,o)=>(u(),p("section",Dt,[e("header",Bt,[e("div",Ct,S(M.value),1)]),x.value?(u(),p("div",Lt,[...o[0]||(o[0]=[e("div",{class:"dw-skel dw-skel-word"},null,-1),e("div",{class:"dw-skel dw-skel-pos"},null,-1),e("div",{class:"dw-skel dw-skel-def"},null,-1),e("div",{class:"dw-skel dw-skel-def"},null,-1)])])):i.value?(u(),p("div",Ht,[e("div",{ref_key:"wordEl",ref:g,class:"dw-word",style:F(E.value)},S(f.value.word),5),f.value.pos?(u(),p("div",Tt,S(f.value.pos),1)):G("",!0),e("div",Ft,S(f.value.definition),1),e("div",Ot,S(i.value),1),e("footer",Pt,[e("div",Ut," Source: "+S(f.value.provider),1)])])):(u(),p("div",Vt,[e("div",{ref_key:"wordEl",ref:g,class:"dw-word",style:F(E.value)},S(f.value.word),5),f.value.pos?(u(),p("div",qt,S(f.value.pos),1)):G("",!0),e("div",Xt,S(f.value.definition),1),e("footer",Nt,[e("div",Yt," Source: "+S(f.value.provider),1)])]))]))}}),jt=Z(Gt,[["__scopeId","data-v-7b582b1f"]]),Kt={key:0,class:"siw__empty"},$t={key:1,class:"siw__viewport"},Zt=["src"],Jt=["src"],Qt={key:0,class:"siw__fade","aria-hidden":"true"},te=tt({__name:"ScrollingImageWall",props:{images:{},tileWidth:{default:96},tileHeight:{default:96},gap:{default:14},visibleCount:{default:0},speedPxPerSec:{default:26},direction:{default:"left"},linkTarget:{default:"_blank"},linkRel:{default:"noopener noreferrer"},edgeFade:{type:Boolean,default:!1},draggable:{type:Boolean,default:!0}},setup(U){const s=U,x=_(null),i=_(0),w=b(()=>Array.isArray(s.images)&&s.images.length>0),I=b(()=>{const r=[];for(const v of s.images||[])typeof v=="string"?r.push({src:v}):v&&typeof v.src=="string"&&r.push({src:v.src,href:v.href});return r});let y=null;function A(){const r=x.value;r&&(i.value=Math.round(r.getBoundingClientRect().width))}$(()=>{A(),x.value&&"ResizeObserver"in window?(y=new ResizeObserver(()=>A()),y.observe(x.value)):window.addEventListener("resize",A,{passive:!0})}),ot(()=>{y&&x.value&&y.unobserve(x.value),y=null,window.removeEventListener("resize",A),B()});const R=b(()=>{const r=s.tileWidth+s.gap,v=Math.max(1,Math.ceil(Math.max(1,i.value)/Math.max(1,r))+2),h=s.visibleCount&&s.visibleCount>0?s.visibleCount:0;return h>0?Math.max(1,h+2):v}),O=b(()=>{const r=R.value;return r<=1?s.tileWidth:r*s.tileWidth+(r-1)*s.gap}),L=b(()=>{if(!w.value)return[];const r=I.value,v=r.length,h=R.value,P=[];for(let q=0;q<h;q++)P.push(r[q%v]);return P}),f=_(0);let M=null,g=0;const z=b(()=>s.direction==="right"?1:-1);function E(r){g||(g=r);const v=(r-g)/1e3;if(g=r,!m.isDown){const h=Math.max(0,s.speedPxPerSec);f.value+=z.value*h*v,f.value=H(f.value)}M=window.requestAnimationFrame(E)}function D(){M==null&&(g=0,M=window.requestAnimationFrame(E))}function B(){M!=null&&(window.cancelAnimationFrame(M),M=null,g=0)}function H(r){const v=O.value;if(!v||v<=0)return r;let h=r%v;return h>0&&(h-=v),h}$(()=>{D()});const m={isDown:!1,pointerId:-1,startX:0,startOffset:0};function V(r){s.draggable&&w.value&&(r.pointerType==="mouse"&&r.button!==0||(m.isDown=!0,m.pointerId=r.pointerId,m.startX=r.clientX,m.startOffset=f.value,r.currentTarget?.setPointerCapture?.(r.pointerId)))}function a(r){if(!s.draggable||!m.isDown||r.pointerId!==m.pointerId)return;const v=r.clientX-m.startX;f.value=H(m.startOffset+v)}function t(r){s.draggable&&m.isDown&&r.pointerId===m.pointerId&&(m.isDown=!1,m.pointerId=-1)}function o(r,v){if(!v.href||!s.draggable)return;const h=Math.abs(f.value-m.startOffset);(m.isDown||h>6)&&(r.preventDefault(),r.stopPropagation())}const l=b(()=>({"--siw-gap":`${s.gap}px`,"--siw-tile-w":`${s.tileWidth}px`,"--siw-tile-h":`${s.tileHeight}px`})),k=b(()=>({width:`${s.tileWidth}px`,height:`${s.tileHeight}px`})),W=b(()=>({gap:`${s.gap}px`})),C=b(()=>({transform:`translate3d(${f.value}px, 0, 0)`}));return(r,v)=>(u(),p("div",{ref_key:"rootEl",ref:x,class:"siw",style:F(l.value),role:"presentation","aria-hidden":"true",onPointerdown:V,onPointermove:a,onPointerup:t,onPointercancel:t,onPointerleave:t},[w.value?(u(),p("div",$t,[e("div",{class:"siw__track",style:F(C.value)},[e("div",{class:"siw__strip",style:F(W.value)},[(u(!0),p(J,null,Q(L.value,(h,P)=>(u(),ft(ht(h.href?"a":"div"),{key:`a-${P}`,class:"siw__tile",style:F(k.value),href:h.href||void 0,target:h.href?r.linkTarget:void 0,rel:h.href?r.linkRel:void 0,onClick:q=>o(q,h)},{default:N(()=>[e("img",{class:"siw__img",src:h.src,alt:"",draggable:"false"},null,8,Zt)]),_:2},1032,["style","href","target","rel","onClick"]))),128))],4),e("div",{class:"siw__strip",style:F(W.value),"aria-hidden":"true"},[(u(!0),p(J,null,Q(L.value,(h,P)=>(u(),ft(ht(h.href?"a":"div"),{key:`b-${P}`,class:"siw__tile",style:F(k.value),href:h.href||void 0,target:h.href?r.linkTarget:void 0,rel:h.href?r.linkRel:void 0,tabindex:"-1"},{default:N(()=>[e("img",{class:"siw__img",src:h.src,alt:"",draggable:"false"},null,8,Jt)]),_:2},1032,["style","href","target","rel"]))),128))],4)],4),r.edgeFade?(u(),p("div",Qt)):G("",!0)])):(u(),p("div",Kt))],36))}}),ee=Z(te,[["__scopeId","data-v-1d762080"]]),se={key:0,class:"ais-muted"},ae={key:1,class:"ais-error"},oe={key:2,class:"ais-scroll",role:"list"},ne={class:"ais-badges","aria-hidden":"true"},re={key:0,class:"ais-badge ais-badge--xp"},ie={key:1,class:"ais-badge ais-badge--new"},le=["title","onClick","onKeydown"],de={class:"ais-icon"},ce=["src","alt","onError"],ue={key:1,class:"ais-icon-fallback","aria-hidden":"true"},fe={class:"ais-name"},he="public-assets",mt="game-icons/",pe=tt({__name:"ActivitiesIconGrid",props:{mode:{default:"both"},width:{default:"100%"},height:{default:"260px"},iconSize:{default:64},titleLines:{default:2},gap:{default:12}},setup(U){const s=U,x=Et(),i=_(!0),w=_(null),I=_([]),y=_(new Set);function A(a){return(a.tags||[]).map(t=>String(t).toLowerCase().trim())}function R(a){const t=A(a);return t.includes("teacher tool")||t.includes("teacher-tool")||t.includes("teachertool")}function O(a){const t=A(a);return t.includes("xp")||t.includes("gives_xp")||t.includes("givesxp")||t.includes("experience")}function L(a){const t=A(a);return a.status&&String(a.status).toLowerCase().trim()==="new"?!0:t.includes("new")||t.includes("recent")}$(async()=>{await Mt(async()=>{try{const{data:a,error:t}=await Y.from("activities").select("id, slug, name, type, url_path, external_url, icon_url, thumbnail_url, tags, status, archived_at").is("archived_at",null).order("name",{ascending:!0});if(t)throw t;I.value=a||[]}catch(a){console.error(a),w.value=a?.message??String(a)}finally{i.value=!1}},250)});const f=b(()=>I.value.slice().sort((a,t)=>(a.name||"").localeCompare(t.name||""))),M=b(()=>s.mode==="both"?f.value:s.mode==="tools"?f.value.filter(R):f.value.filter(a=>!R(a)));function g(a){return!!a&&/^[a-z][a-z0-9+\-.]*:\/\//i.test(String(a).trim())}function z(a){if(y.value.has(a.id))return"";const t=a.icon_url||a.thumbnail_url||"";if(!t)return"";if(g(t))return t;let o=String(t).replace(/^\/+/,"");o.startsWith(mt)||(o=mt+o);const{data:l}=Y.storage.from(he).getPublicUrl(o);return l?.publicUrl||""}function E(a){y.value.add(a)}function D(a){if(!a)return"";let t=String(a).trim();if(!t)return"";if(/^[a-z][a-z0-9+\-.]*:\/\//i.test(t)||/^[a-z][a-z0-9+\-.]*:/i.test(t))return t;if(t.startsWith("//"))return(window.location?.protocol||"https:")+t;/^[\w.-]+\.[a-z]{2,}([/:?#]|$)/i.test(t)&&(t="https://"+t);try{const o=new URL(t,window.location.origin);return!/\.[a-z0-9]+$/i.test(o.pathname.split("/").pop()||"")&&!o.search&&!o.hash&&!o.pathname.endsWith("/")&&(o.pathname+="/"),o.toString()}catch{return t}}function B(a){if(!a)return"";let t=String(a).trim();return t?(t.startsWith("/")||(t="/"+t),t):""}function H(a){if(a.url_path){x.push(B(a.url_path));return}if(a.slug){x.push(`/activities/${a.slug}`);return}if(a.external_url){const t=D(a.external_url);if(t){window.open(t,"_blank","noopener,noreferrer");return}}alert("No activity URL is configured.")}const m=b(()=>Math.max(6,Math.min(24,Math.floor(s.gap||12)))),V=b(()=>({width:s.width,height:s.height,"--ais-icon-base":`${s.iconSize}px`,"--ais-lines":String(s.titleLines),"--ais-gap":`${m.value}px`}));return(a,t)=>(u(),p("section",{class:"ais-root",style:F(V.value),"aria-label":"Activities icon grid"},[i.value?(u(),p("p",se,"Loading…")):w.value?(u(),p("p",ae,S(w.value),1)):(u(),p("div",oe,[(u(!0),p(J,null,Q(M.value,o=>(u(),p("article",{key:o.id,class:"ais-item",role:"listitem"},[e("div",ne,[O(o)?(u(),p("span",re,"XP")):G("",!0),L(o)?(u(),p("span",ie,"NEW")):G("",!0)]),e("button",{class:"ais-iconBtn",type:"button",title:o.name,onClick:l=>H(o),onKeydown:[pt(st(l=>H(o),["prevent"]),["enter"]),pt(st(l=>H(o),["prevent"]),["space"])]},[e("div",de,[z(o)?(u(),p("img",{key:0,src:z(o),alt:o.name,loading:"lazy",decoding:"async",draggable:"false",onError:st(l=>E(o.id),["stop"])},null,40,ce)):(u(),p("div",ue))])],40,le),e("div",fe,S(o.name),1)]))),128))]))],4))}}),wt=Z(pe,[["__scopeId","data-v-a9a47091"]]),ve="data:image/png;base64,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",me="/TaiyakiEduGames/assets/win_chime-BYEqQxzW.mp3",we={class:"cap-stack"},_e={class:"cap-head"},ye={key:0,class:"cap-error"},ge=["disabled"],be=["src"],Ae={class:"cap-foot","aria-label":"Community likes counters"},ke={class:"cap-counters"},xe={class:"cap-counter"},We={class:"cap-counter-value"},Se={class:"cap-counter"},Me={class:"cap-counter-value"},Ee={class:"cap-counter"},ze={class:"cap-counter-value"},Ie={class:"cap-burst-layer","aria-hidden":"true"},Re=3,De={__name:"CommunityLikesCounter",props:{width:{type:String,default:"100%"},height:{type:String,default:"100%"},rowId:{type:String,default:"EiTake"},incrementRpc:{type:String,default:"increment_community_likes"},incrementAmount:{type:Number,default:1},heartSrc:{type:String,default:ve},useDirectUpdate:{type:Boolean,default:!1}},setup(U){const s=U,x=b(()=>({width:s.width,height:s.height})),i=_({total:0,daily_total:0,monthly_total:0}),w=_(!1),I=_(!1),y=_(""),A=_(""),R=["anim-bounce","anim-spin","anim-wiggle","anim-pop","anim-squash","anim-float"],O=_(!1),L=_([]);let f=1,M=[],g={x:null,y:null};const z=_(null),E=_([]);let D=!1,B=0;function H(){try{const n=[];for(let d=0;d<Re;d++){const c=new Audio(me);c.preload="auto",c.volume=1,n.push(c)}E.value=n}catch{}}function m(){if(D||!E.value.length)return;const n=E.value;let d=0;for(const c of n)try{const et=c.volume;c.volume=0,c.currentTime=0;const X=c.play();X&&typeof X.then=="function"&&X.then(()=>{c.pause(),c.currentTime=0,c.volume=et,d++,d>=n.length&&(D=!0)}).catch(()=>{})}catch{}}function V(){const n=E.value;if(!n.length)return;const d=n[B];B=(B+1)%n.length;try{d.currentTime=0,d.play()}catch{}}function a(n){return Number(n??0).toLocaleString()}async function t(){y.value="";const{data:n,error:d}=await Y.from("community_likes").select("total,daily_total,monthly_total").eq("id",s.rowId).single();if(d){y.value=`Failed to load community likes. (${d.message})`;return}i.value={total:Number(n?.total??0),daily_total:Number(n?.daily_total??0),monthly_total:Number(n?.monthly_total??0)},w.value=!0}function o(n){i.value.total=Number(i.value.total??0)+n,i.value.daily_total=Number(i.value.daily_total??0)+n,i.value.monthly_total=Number(i.value.monthly_total??0)+n}async function l(){if(!s.useDirectUpdate){const{error:d}=await Y.rpc(s.incrementRpc,{p_id:s.rowId,p_amount:s.incrementAmount});if(d)throw d;return}const{error:n}=await Y.from("community_likes").update({total:Number(i.value.total??0)}).eq("id",s.rowId);if(n)throw n}function k(){return R[Math.floor(Math.random()*R.length)]}function W(n){!n||O.value||(O.value=!0,A.value="",n.offsetWidth,A.value=k())}function C(n,d,c){return Math.max(d,Math.min(c,n))}function r(n){m(),n&&typeof n.clientX=="number"&&typeof n.clientY=="number"&&(g={x:n.clientX,y:n.clientY})}function v(){}function h(){O.value=!1,A.value=""}function P(n){if(n&&typeof n.clientX=="number"&&typeof n.clientY=="number")return{x:n.clientX,y:n.clientY};const d=z.value;if(d){const c=d.getBoundingClientRect();return{x:c.left+c.width/2,y:c.top+c.height/2}}return g.x!=null?{x:g.x,y:g.y}:{x:window.innerWidth/2,y:window.innerHeight/2}}function q(n,d){const c=10+Math.floor(Math.random()*5),et=Date.now();for(let X=0;X<c;X++){const nt=-Math.PI/2+Math.random()*Math.PI,rt=35+Math.random()*65,yt=Math.cos(nt)*rt+(Math.random()*26-13),gt=Math.sin(nt)*rt-(45+Math.random()*70),it=900+Math.floor(Math.random()*650),lt=2200+Math.floor(Math.random()*1500),dt=Math.floor(Math.random()*140),bt=10+Math.floor(Math.random()*14),At=Math.floor(Math.random()*220-110),kt=(.45+Math.random()*.35).toFixed(2),ct=`${et}-${f++}-${X}`;L.value.push({id:ct,x:n,y:d,dx:yt,dy:gt,rot:At,durUp:it,durFall:lt,delay:dt,size:bt,alpha:kt});const xt=window.setTimeout(()=>{const ut=L.value.findIndex(Wt=>Wt.id===ct);ut!==-1&&L.value.splice(ut,1)},it+lt+dt+160);M.push(xt)}}async function _t(n){if(I.value||!w.value)return;I.value=!0,y.value="",V();const d=P(n);q(C(d.x,0,window.innerWidth),C(d.y,0,window.innerHeight)),await K(),W(z.value),o(s.incrementAmount);try{await l()}catch(c){o(-s.incrementAmount),y.value=`Could not send like. (${c?.message||"Unknown error"})`}finally{I.value=!1}}return $(async()=>{H(),await t()}),ot(()=>{for(const n of M)window.clearTimeout(n);M=[];for(const n of E.value)try{n.pause(),n.src=""}catch{}E.value=[]}),(n,d)=>(u(),p("section",{class:"cap-root",style:F(x.value),onPointerdown:r},[e("div",we,[e("header",_e,[d[0]||(d[0]=e("p",{class:"cap-subtitle"},"Tap the heart to show some love!",-1)),d[1]||(d[1]=e("div",{class:"cap-micro"}," If EiTake has every been of help, click the heart to let us know! ",-1)),y.value?(u(),p("div",ye,S(y.value),1)):G("",!0)]),e("button",{ref_key:"heartBtnEl",ref:z,class:zt(["cap-heart-btn",[I.value?"is-busy":"",A.value]]),type:"button",disabled:I.value||!w.value,onClick:_t,onAnimationstart:v,onAnimationend:h,"aria-label":"Send a community like",title:"Send a like"},[e("img",{class:"cap-heart-img",src:s.heartSrc,alt:"",draggable:"false"},null,8,be)],42,ge),e("footer",Ae,[e("div",ke,[e("div",xe,[d[2]||(d[2]=e("div",{class:"cap-counter-label"},"Total Likes",-1)),e("div",We,S(a(i.value.total)),1)]),e("div",Se,[d[3]||(d[3]=e("div",{class:"cap-counter-label"},"Today",-1)),e("div",Me,S(a(i.value.daily_total)),1)]),e("div",Ee,[d[4]||(d[4]=e("div",{class:"cap-counter-label"},"This Month",-1)),e("div",ze,S(a(i.value.monthly_total)),1)])])])]),e("div",Ie,[(u(!0),p(J,null,Q(L.value,c=>(u(),p("span",{key:c.id,class:"cap-burst-heart",style:F({left:c.x+"px",top:c.y+"px","--dx":c.dx+"px","--dy":c.dy+"px","--rot":c.rot+"deg","--durUp":c.durUp+"ms","--durFall":c.durFall+"ms","--delay":c.delay+"ms","--size":c.size+"px","--alpha":c.alpha})}," ❤ ",4))),128))])],36))}},Be=Z(De,[["__scopeId","data-v-3d867823"]]),Ce={class:"dashboard"},Le={class:"dashboard__content"},He={class:"dashboard__grid","aria-label":"Dashboard sections"},Te={class:"dashboard__card dashboard__card--wotd","aria-label":"Word of the Day"},Fe={class:"dashboard__cardBody dashboard__cardBody--padded"},Oe={class:"dashboard__card dashboard__card--games","aria-label":"Games"},Pe={class:"dashboard__cardHead"},Ue={class:"dashboard__cardTitle"},Ve={class:"dashboard__cardBody"},qe={class:"dashboard__card dashboard__card--teacherTools","aria-label":"Teacher Tools"},Xe={class:"dashboard__cardHead"},Ne={class:"dashboard__cardTitle"},Ye={class:"dashboard__cardBody"},Ge={class:"dashboard__card dashboard__card--textbooks","aria-label":"Textbooks"},je={class:"dashboard__cardHead dashboard__cardHead--split"},Ke={class:"dashboard__cardTitle"},$e={class:"dashboard__headRight"},Ze={class:"dashboard__cardBody dashboard__cardBody--wall"},Je={class:"dashboard__card dashboard__card--community","aria-label":"Community"},Qe={class:"dashboard__cardBody"},ts={class:"dashboard__footer","aria-label":"Footer"},es={class:"dashboard__footerLeft"},ss=tt({__name:"Dashboard",setup(U){const s=[{src:new URL("/TaiyakiEduGames/assets/lets-try-1-2018-DVefs5yw.png",import.meta.url).href},{src:new URL("/TaiyakiEduGames/assets/lets-try-2-2018-DQfTaW9M.png",import.meta.url).href},{src:new URL("/TaiyakiEduGames/assets/new-horizon-5-2024-BaGMM3ni.jpg",import.meta.url).href},{src:new URL("/TaiyakiEduGames/assets/new-horizon-6-2024-Bc9NvqnJ.jpg",import.meta.url).href},{src:new URL("/TaiyakiEduGames/assets/my-picture-dictionary-new-horizon-2024-r3dztHYG.jpg",import.meta.url).href},{src:new URL("/TaiyakiEduGames/assets/new-crown-1-2025-DTUBlV8S.png",import.meta.url).href},{src:new URL("/TaiyakiEduGames/assets/holidays-BVDa_wRL.png",import.meta.url).href}];return(x,i)=>{const w=It("RouterLink");return u(),p("main",Ce,[e("div",Le,[e("section",He,[e("section",Te,[i[0]||(i[0]=e("header",{class:"dashboard__cardHead"},[e("h2",{class:"dashboard__cardTitle"},"Word of the Day")],-1)),e("div",Fe,[T(jt)])]),e("section",Oe,[e("header",Pe,[e("h2",Ue,[T(w,{class:"dashboard__titleLink",to:"/activities"},{default:N(()=>[...i[1]||(i[1]=[j("Games",-1)])]),_:1})])]),e("div",Ve,[T(wt,{mode:"games",width:"100%",height:"100%"})])]),e("section",qe,[e("header",Xe,[e("h2",Ne,[T(w,{class:"dashboard__titleLink",to:"/activities"},{default:N(()=>[...i[2]||(i[2]=[j("Teacher Tools",-1)])]),_:1})])]),e("div",Ye,[T(wt,{mode:"tools",width:"100%",height:"100%"})])]),e("section",Ge,[e("header",je,[e("h2",Ke,[T(w,{class:"dashboard__titleLink",to:"/textbooks"},{default:N(()=>[...i[3]||(i[3]=[j("Textbooks & Flashcard Games",-1)])]),_:1})]),e("div",$e,[T(Rt,{"max-height":30,scale:.7})])]),e("div",Ze,[T(ee,{images:s,"tile-width":200,"tile-height":300,gap:0,"speed-px-per-sec":30,direction:"left","visible-count":5,draggable:!0})])]),e("section",Je,[i[4]||(i[4]=e("header",{class:"dashboard__cardHead"},[e("h2",{class:"dashboard__cardTitle"},"Community")],-1)),e("div",Qe,[T(Be)])])])]),e("footer",ts,[e("div",es,[T(w,{class:"dashboard__footerLink",to:"/terms"},{default:N(()=>[...i[5]||(i[5]=[j("Terms of Service",-1)])]),_:1}),i[7]||(i[7]=e("span",{class:"dashboard__footerDot","aria-hidden":"true"},"•",-1)),T(w,{class:"dashboard__footerLink",to:"/privacy-policy"},{default:N(()=>[...i[6]||(i[6]=[j("Privacy Policy",-1)])]),_:1})]),i[8]||(i[8]=e("div",{class:"dashboard__footerRight"},[e("a",{class:"dashboard__brandLink",href:"https://griffiigames.com",target:"_blank",rel:"noopener noreferrer"}," Griffii Games ")],-1))])])}}}),os=Z(ss,[["__scopeId","data-v-6e5d69c1"]]);export{os as default};
